{
  "id": "the_cage",
  "name": "THE CAGE",
  "subtitle": "Forerunner Research Facility",
  "description": "Infiltrate the Covenant-held Forerunner facility and secure the artifact.",
  "difficulty_modifiers": {
    "easy": { "enemy_health": 0.75, "enemy_damage": 0.5, "enemy_accuracy": 0.6 },
    "normal": { "enemy_health": 1.0, "enemy_damage": 1.0, "enemy_accuracy": 0.8 },
    "heroic": { "enemy_health": 1.25, "enemy_damage": 1.5, "enemy_accuracy": 0.9 },
    "legendary": { "enemy_health": 1.5, "enemy_damage": 2.0, "enemy_accuracy": 1.0 }
  },
  "sections": [
    {
      "id": "insertion",
      "name": "INSERTION",
      "subtitle": "Forerunner Delta Site",
      "objective": "Clear the Landing Zone",
      "objective_detail": "Eliminate all Covenant forces",
      "ambient": "wind",
      "music": "ambient",
      "spawn_point": { "x": -95, "y": 0.5, "z": 0 },
      "bounds": { "min_x": -105, "max_x": -70, "min_z": -20, "max_z": 20 },
      "triggers": [
        {
          "type": "dialogue",
          "trigger_at": "section_start",
          "speaker": "CORTANA",
          "text": "Chief, Pelican inbound. We've got multiple Covenant contacts at the landing site.",
          "voice_file": "cortana_intro",
          "duration": 5000
        }
      ],
      "enemy_waves": [
        {
          "trigger": "section_start",
          "delay": 3000,
          "enemies": [
            { "type": "GRUNT", "x": -85, "y": 1, "z": 5 },
            { "type": "GRUNT", "x": -85, "y": 1, "z": -5 },
            { "type": "GRUNT", "x": -80, "y": 1, "z": 0 }
          ]
        },
        {
          "trigger": "enemies_below",
          "threshold": 1,
          "delay": 0,
          "enemies": [
            { "type": "ELITE", "x": -75, "y": 2, "z": 0 }
          ]
        }
      ],
      "completion": { "type": "all_enemies_dead" }
    },
    {
      "id": "approach",
      "name": "OUTER APPROACH",
      "subtitle": "Covenant Forward Position",
      "objective": "Push Through Enemy Lines",
      "objective_detail": "Clear the path to the facility entrance",
      "ambient": "wind",
      "music": "combat",
      "spawn_point": { "x": -55, "y": 2.5, "z": 0 },
      "bounds": { "min_x": -70, "max_x": -30, "min_z": -25, "max_z": 25 },
      "triggers": [
        {
          "type": "dialogue",
          "trigger_at": "section_start",
          "speaker": "CORTANA",
          "text": "Covenant forces are dug in ahead. Watch for snipers on the elevated positions.",
          "voice_file": "cortana_enemies",
          "duration": 4000
        }
      ],
      "enemy_waves": [
        {
          "trigger": "section_start",
          "delay": 0,
          "enemies": [
            { "type": "JACKAL", "x": -60, "y": 6, "z": 15 },
            { "type": "JACKAL", "x": -50, "y": 6, "z": -15 },
            { "type": "GRUNT", "x": -55, "y": 2, "z": 5 },
            { "type": "GRUNT", "x": -55, "y": 2, "z": -5 }
          ]
        },
        {
          "trigger": "player_past_x",
          "threshold": -50,
          "delay": 0,
          "enemies": [
            { "type": "ELITE", "x": -45, "y": 2, "z": 0 },
            { "type": "GRUNT", "x": -42, "y": 2, "z": 3 },
            { "type": "GRUNT", "x": -42, "y": 2, "z": -3 }
          ]
        }
      ],
      "completion": { "type": "all_enemies_dead" }
    },
    {
      "id": "labs",
      "name": "LOWER LABS",
      "subtitle": "Flood Research Wing",
      "objective": "Investigate the Research Labs",
      "objective_detail": "Search for intel on Covenant operations",
      "ambient": "facility",
      "music": "tension",
      "spawn_point": { "x": -20, "y": -11.5, "z": -30 },
      "bounds": { "min_x": -35, "max_x": 0, "min_z": -40, "max_z": -15 },
      "triggers": [
        {
          "type": "dialogue",
          "trigger_at": "section_start",
          "speaker": "CORTANA",
          "text": "These containment cells... they were studying something here. Something dangerous.",
          "duration": 5000
        },
        {
          "type": "checkpoint",
          "trigger_at": "section_start",
          "voice_file": "cortana_checkpoint"
        }
      ],
      "enemy_waves": [
        {
          "trigger": "section_start",
          "delay": 2000,
          "enemies": [
            { "type": "GRUNT", "x": -25, "y": -12, "z": -28 },
            { "type": "GRUNT", "x": -15, "y": -12, "z": -32 }
          ]
        },
        {
          "trigger": "player_past_x",
          "threshold": -15,
          "delay": 0,
          "enemies": [
            { "type": "ELITE", "x": -10, "y": -12, "z": -25 },
            { "type": "JACKAL", "x": -8, "y": -12, "z": -28 }
          ]
        }
      ],
      "completion": { "type": "reach_area", "area": { "x": -5, "z": -20, "radius": 5 } }
    },
    {
      "id": "cage",
      "name": "THE CAGE",
      "subtitle": "Central Control Hub",
      "objective": "Secure the Control Room",
      "objective_detail": "Eliminate the Covenant commander",
      "ambient": "forerunner",
      "music": "combat",
      "spawn_point": { "x": 0, "y": 4.5, "z": 0 },
      "bounds": { "min_x": -30, "max_x": 30, "min_z": -25, "max_z": 30 },
      "triggers": [
        {
          "type": "dialogue",
          "trigger_at": "section_start",
          "speaker": "CORTANA",
          "text": "This is it - the central hub. Expect heavy resistance.",
          "duration": 4000
        }
      ],
      "enemy_waves": [
        {
          "trigger": "section_start",
          "delay": 0,
          "enemies": [
            { "type": "ELITE", "x": 24, "y": 12, "z": 0 },
            { "type": "GRUNT", "x": 20, "y": 4, "z": 5 },
            { "type": "GRUNT", "x": 20, "y": 4, "z": -5 },
            { "type": "JACKAL", "x": 0, "y": 8, "z": 20 }
          ]
        },
        {
          "trigger": "enemies_below",
          "threshold": 2,
          "delay": 0,
          "enemies": [
            { "type": "ELITE", "x": -20, "y": 13, "z": 0, "rank": "commander" },
            { "type": "GRUNT", "x": -18, "y": 10, "z": 2 },
            { "type": "GRUNT", "x": -18, "y": 10, "z": -2 }
          ]
        }
      ],
      "completion": { "type": "all_enemies_dead" }
    },
    {
      "id": "towers",
      "name": "TOWER ASSAULT",
      "subtitle": "Covenant Stronghold",
      "objective": "Clear the Towers",
      "objective_detail": "Eliminate remaining Covenant forces",
      "ambient": "forerunner",
      "music": "combat",
      "spawn_point": { "x": 50, "y": 12.5, "z": 20 },
      "bounds": { "min_x": 30, "max_x": 75, "min_z": 5, "max_z": 45 },
      "triggers": [
        {
          "type": "dialogue",
          "trigger_at": "section_start",
          "speaker": "MARINE",
          "text": "Contact! Hostiles spotted!",
          "voice_file": "marine_contact",
          "duration": 2500
        }
      ],
      "enemy_waves": [
        {
          "trigger": "section_start",
          "delay": 0,
          "enemies": [
            { "type": "ELITE", "x": 50, "y": 24, "z": 20 },
            { "type": "JACKAL", "x": 55, "y": 18, "z": 22 },
            { "type": "GRUNT", "x": 48, "y": 12, "z": 18 }
          ]
        },
        {
          "trigger": "player_past_x",
          "threshold": 55,
          "delay": 0,
          "enemies": [
            { "type": "ELITE", "x": 65, "y": 28, "z": 35 },
            { "type": "JACKAL", "x": 65, "y": 22, "z": 33 },
            { "type": "GRUNT", "x": 60, "y": 20, "z": 30 },
            { "type": "GRUNT", "x": 62, "y": 20, "z": 32 }
          ]
        }
      ],
      "completion": { "type": "all_enemies_dead" }
    },
    {
      "id": "extraction",
      "name": "EXTRACTION",
      "subtitle": "Get to the Pelican",
      "objective": "Reach the Extraction Point",
      "objective_detail": "Hold position until Pelican arrives",
      "ambient": "wind",
      "music": "tension",
      "spawn_point": { "x": 85, "y": 18.5, "z": 55 },
      "bounds": { "min_x": 70, "max_x": 100, "min_z": 40, "max_z": 70 },
      "triggers": [
        {
          "type": "dialogue",
          "trigger_at": "section_start",
          "speaker": "CORTANA",
          "text": "Chief, the extraction point is just ahead. Get to the Pelican!",
          "voice_file": "cortana_extraction",
          "duration": 4000
        },
        {
          "type": "dialogue",
          "trigger_at": "wave_2_start",
          "speaker": "MARINE",
          "text": "Covering fire! Move up!",
          "voice_file": "marine_covering",
          "duration": 2500
        }
      ],
      "enemy_waves": [
        {
          "trigger": "section_start",
          "delay": 0,
          "enemies": [
            { "type": "GRUNT", "x": 82, "y": 18, "z": 50 },
            { "type": "GRUNT", "x": 88, "y": 18, "z": 50 }
          ]
        },
        {
          "trigger": "player_in_area",
          "area": { "x": 85, "z": 55, "radius": 8 },
          "delay": 5000,
          "enemies": [
            { "type": "ELITE", "x": 78, "y": 18, "z": 52 },
            { "type": "ELITE", "x": 92, "y": 18, "z": 52 },
            { "type": "JACKAL", "x": 85, "y": 18, "z": 48 }
          ]
        }
      ],
      "completion": {
        "type": "survive_timer",
        "duration": 30000,
        "area": { "x": 85, "z": 55, "radius": 10 }
      }
    }
  ],
  "weapons": {
    "player_start": ["BR55", "PISTOL"],
    "spawns": [
      { "weapon": "SNIPER", "x": 0, "y": 8.5, "z": 24, "respawn": 45 },
      { "weapon": "SHOTGUN", "x": 24, "y": -1.5, "z": 0, "respawn": 15 },
      { "weapon": "SWORD", "x": 0, "y": -3.5, "z": 0, "respawn": 120 },
      { "weapon": "ROCKET", "x": -55, "y": 3, "z": 0, "respawn": 90 }
    ]
  },
  "marines": {
    "max_squad_size": 4,
    "spawn_with_player": 2,
    "reinforcement_checkpoints": ["labs", "towers"]
  }
}
