<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive Pokémon type effectiveness calculator with visual type chart, dual-type support, and coverage analysis">
    <title>Pokémon Type Effectiveness Calculator</title>
    <!-- pokemon, type chart, calculator, game, interactive, educational -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h2 {
            margin-bottom: 20px;
            color: #667eea;
            font-size: 1.5em;
        }

        /* Type Calculator Styles */
        .calculator-section {
            margin-bottom: 25px;
        }

        .calculator-section h3 {
            margin-bottom: 15px;
            color: #555;
            font-size: 1.1em;
        }

        .type-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .type-badge {
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-size: 0.85em;
            border: 3px solid transparent;
            user-select: none;
        }

        .type-badge:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .type-badge.selected {
            border-color: #fff;
            box-shadow: 0 0 0 3px rgba(0,0,0,0.2);
            transform: scale(1.05);
        }

        .type-badge.disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Result Display */
        .result-display {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            margin-top: 20px;
        }

        .multiplier {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
            color: #333;
        }

        .multiplier.super-effective {
            color: #e74c3c;
        }

        .multiplier.not-effective {
            color: #3498db;
        }

        .multiplier.immune {
            color: #95a5a6;
        }

        .calculation-breakdown {
            margin-top: 15px;
            font-size: 1.1em;
            color: #555;
        }

        .effectiveness-label {
            font-size: 1.3em;
            font-weight: bold;
            margin-top: 10px;
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
        }

        /* Type Chart Styles */
        .type-chart-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        .type-chart {
            display: grid;
            gap: 2px;
            min-width: 600px;
            width: 100%;
        }

        .chart-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.75em;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .chart-cell:hover {
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .chart-cell.header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            cursor: default;
            font-size: 0.7em;
        }

        .chart-cell.header:hover {
            transform: none;
            box-shadow: none;
        }

        .chart-cell.highlighted {
            box-shadow: 0 0 0 3px #ffd700;
            z-index: 5;
        }

        .effectiveness-2x {
            background-color: #e74c3c;
            color: white;
        }

        .effectiveness-0-5x {
            background-color: #3498db;
            color: white;
        }

        .effectiveness-0x {
            background-color: #95a5a6;
            color: white;
        }

        .effectiveness-1x {
            background-color: #ecf0f1;
            color: #333;
        }

        /* Quick Lookup */
        .lookup-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .lookup-result {
            padding: 15px;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .lookup-result h4 {
            margin-bottom: 10px;
            color: #667eea;
        }

        .type-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .mini-type-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            color: white;
            font-weight: bold;
        }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .legend-color {
            width: 30px;
            height: 30px;
            border-radius: 4px;
        }

        /* Educational Content */
        .info-section {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .info-section h3 {
            margin-bottom: 10px;
            color: #667eea;
        }

        .info-section p {
            line-height: 1.6;
            color: #555;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .type-selector {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
                gap: 8px;
            }

            .type-badge {
                padding: 8px 10px;
                font-size: 0.75em;
            }

            .multiplier {
                font-size: 2em;
            }

            .chart-cell {
                font-size: 0.6em;
            }
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .pulse {
            animation: pulse 0.5s ease-in-out;
        }

        /* Tooltips */
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9em;
            pointer-events: none;
            z-index: 1000;
            white-space: nowrap;
            display: none;
        }

        .chart-cell:hover .tooltip {
            display: block;
        }

        /* Clear Button */
        .clear-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .clear-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Tab System */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1em;
            font-weight: bold;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab:hover {
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Pokémon Type Effectiveness Calculator</h1>
            <p class="subtitle">Interactive type chart and matchup analyzer</p>
        </header>

        <div class="main-grid">
            <!-- Type Calculator Card -->
            <div class="card">
                <h2>Type Calculator</h2>

                <div class="calculator-section">
                    <h3>Attacking Type(s)</h3>
                    <div class="type-selector" id="attackingTypes"></div>
                </div>

                <div class="calculator-section">
                    <h3>Defending Type(s)</h3>
                    <div class="type-selector" id="defendingTypes"></div>
                </div>

                <button class="clear-btn" onclick="clearSelection()">Clear Selection</button>

                <div class="result-display" id="resultDisplay">
                    <div>Select types to calculate effectiveness</div>
                </div>
            </div>

            <!-- Quick Lookup Card -->
            <div class="card">
                <h2>Quick Lookup</h2>

                <div class="tabs">
                    <button class="tab active" onclick="switchTab('lookup')">Type Lookup</button>
                    <button class="tab" onclick="switchTab('coverage')">Coverage Guide</button>
                </div>

                <div class="tab-content active" id="lookupTab">
                    <div class="calculator-section">
                        <h3>Analyze Type</h3>
                        <div class="type-selector" id="lookupTypes"></div>
                    </div>
                    <div class="lookup-section" id="lookupResults"></div>
                </div>

                <div class="tab-content" id="coverageTab">
                    <div class="info-section">
                        <h3>Recommended Coverage Types</h3>
                        <p><strong>Fighting + Ground + Flying:</strong> Covers 14 of 18 types super effectively. Classic offensive coverage.</p>
                        <p><strong>Dragon + Electric + Ground:</strong> Great neutral coverage with few resistances.</p>
                        <p><strong>Ghost + Fighting:</strong> Hits everything for at least neutral damage.</p>
                        <p><strong>Steel + Fairy:</strong> Excellent defensive typing with many resistances.</p>
                        <p><strong>Water + Ground + Grass:</strong> Strong coverage with few gaps.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Type Chart Card -->
        <div class="card">
            <h2>Complete Type Effectiveness Chart</h2>
            <p style="margin-bottom: 15px; color: #666;">Click cells to highlight type interactions. Rows are attacking types, columns are defending types.</p>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color effectiveness-2x"></div>
                    <span>Super Effective (2×)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color effectiveness-1x"></div>
                    <span>Normal (1×)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color effectiveness-0-5x"></div>
                    <span>Not Very Effective (0.5×)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color effectiveness-0x"></div>
                    <span>No Effect (0×)</span>
                </div>
            </div>

            <div class="type-chart-container">
                <div class="type-chart" id="typeChart"></div>
            </div>
        </div>

        <!-- Educational Content -->
        <div class="card">
            <h2>Type Information</h2>
            <div class="info-section">
                <h3>How Type Effectiveness Works</h3>
                <p>In Pokémon battles, every move has a type, and every Pokémon has one or two types. When a move hits a Pokémon, the damage is multiplied based on type matchups:</p>
                <ul style="margin: 15px 0; padding-left: 20px; line-height: 1.8;">
                    <li><strong>Super Effective (2×):</strong> The attacking type is strong against the defending type</li>
                    <li><strong>Not Very Effective (0.5×):</strong> The attacking type is weak against the defending type</li>
                    <li><strong>No Effect (0×):</strong> The attacking type cannot damage the defending type at all</li>
                    <li><strong>Dual Types:</strong> Multipliers stack! A 4× weakness means both types are weak to the attack (2× × 2×)</li>
                </ul>
            </div>

            <div class="info-section" style="margin-top: 20px;">
                <h3>Type Themes</h3>
                <p><strong>Physical Elements:</strong> Fire, Water, Grass, Electric, Ice, Rock, Ground - Based on natural elements</p>
                <p><strong>Combat Styles:</strong> Fighting, Flying, Normal - Based on physical combat methods</p>
                <p><strong>Supernatural:</strong> Psychic, Ghost, Dark, Fairy - Based on mystical concepts</p>
                <p><strong>Material:</strong> Steel, Poison, Bug, Dragon - Based on physical properties or creatures</p>
            </div>
        </div>
    </div>

    <script>
        // Complete Type Effectiveness Chart
        // 0 = No Effect, 0.5 = Not Very Effective, 1 = Normal, 2 = Super Effective
        const TYPE_CHART = {
            Normal: { Normal: 1, Fire: 1, Water: 1, Electric: 1, Grass: 1, Ice: 1, Fighting: 1, Poison: 1, Ground: 1, Flying: 1, Psychic: 1, Bug: 1, Rock: 0.5, Ghost: 0, Dragon: 1, Dark: 1, Steel: 0.5, Fairy: 1 },
            Fire: { Normal: 1, Fire: 0.5, Water: 0.5, Electric: 1, Grass: 2, Ice: 2, Fighting: 1, Poison: 1, Ground: 1, Flying: 1, Psychic: 1, Bug: 2, Rock: 0.5, Ghost: 1, Dragon: 0.5, Dark: 1, Steel: 2, Fairy: 1 },
            Water: { Normal: 1, Fire: 2, Water: 0.5, Electric: 1, Grass: 0.5, Ice: 1, Fighting: 1, Poison: 1, Ground: 2, Flying: 1, Psychic: 1, Bug: 1, Rock: 2, Ghost: 1, Dragon: 0.5, Dark: 1, Steel: 1, Fairy: 1 },
            Electric: { Normal: 1, Fire: 1, Water: 2, Electric: 0.5, Grass: 0.5, Ice: 1, Fighting: 1, Poison: 1, Ground: 0, Flying: 2, Psychic: 1, Bug: 1, Rock: 1, Ghost: 1, Dragon: 0.5, Dark: 1, Steel: 1, Fairy: 1 },
            Grass: { Normal: 1, Fire: 0.5, Water: 2, Electric: 1, Grass: 0.5, Ice: 1, Fighting: 1, Poison: 0.5, Ground: 2, Flying: 0.5, Psychic: 1, Bug: 0.5, Rock: 2, Ghost: 1, Dragon: 0.5, Dark: 1, Steel: 0.5, Fairy: 1 },
            Ice: { Normal: 1, Fire: 0.5, Water: 0.5, Electric: 1, Grass: 2, Ice: 0.5, Fighting: 1, Poison: 1, Ground: 2, Flying: 2, Psychic: 1, Bug: 1, Rock: 1, Ghost: 1, Dragon: 2, Dark: 1, Steel: 0.5, Fairy: 1 },
            Fighting: { Normal: 2, Fire: 1, Water: 1, Electric: 1, Grass: 1, Ice: 2, Fighting: 1, Poison: 0.5, Ground: 1, Flying: 0.5, Psychic: 0.5, Bug: 0.5, Rock: 2, Ghost: 0, Dragon: 1, Dark: 2, Steel: 2, Fairy: 0.5 },
            Poison: { Normal: 1, Fire: 1, Water: 1, Electric: 1, Grass: 2, Ice: 1, Fighting: 1, Poison: 0.5, Ground: 0.5, Flying: 1, Psychic: 1, Bug: 1, Rock: 0.5, Ghost: 0.5, Dragon: 1, Dark: 1, Steel: 0, Fairy: 2 },
            Ground: { Normal: 1, Fire: 2, Water: 1, Electric: 2, Grass: 0.5, Ice: 1, Fighting: 1, Poison: 2, Ground: 1, Flying: 0, Psychic: 1, Bug: 0.5, Rock: 2, Ghost: 1, Dragon: 1, Dark: 1, Steel: 2, Fairy: 1 },
            Flying: { Normal: 1, Fire: 1, Water: 1, Electric: 0.5, Grass: 2, Ice: 1, Fighting: 2, Poison: 1, Ground: 1, Flying: 1, Psychic: 1, Bug: 2, Rock: 0.5, Ghost: 1, Dragon: 1, Dark: 1, Steel: 0.5, Fairy: 1 },
            Psychic: { Normal: 1, Fire: 1, Water: 1, Electric: 1, Grass: 1, Ice: 1, Fighting: 2, Poison: 2, Ground: 1, Flying: 1, Psychic: 0.5, Bug: 1, Rock: 1, Ghost: 1, Dragon: 1, Dark: 0, Steel: 0.5, Fairy: 1 },
            Bug: { Normal: 1, Fire: 0.5, Water: 1, Electric: 1, Grass: 2, Ice: 1, Fighting: 0.5, Poison: 0.5, Ground: 1, Flying: 0.5, Psychic: 2, Bug: 1, Rock: 1, Ghost: 0.5, Dragon: 1, Dark: 2, Steel: 0.5, Fairy: 0.5 },
            Rock: { Normal: 1, Fire: 2, Water: 1, Electric: 1, Grass: 1, Ice: 2, Fighting: 0.5, Poison: 1, Ground: 0.5, Flying: 2, Psychic: 1, Bug: 2, Rock: 1, Ghost: 1, Dragon: 1, Dark: 1, Steel: 0.5, Fairy: 1 },
            Ghost: { Normal: 0, Fire: 1, Water: 1, Electric: 1, Grass: 1, Ice: 1, Fighting: 1, Poison: 1, Ground: 1, Flying: 1, Psychic: 2, Bug: 1, Rock: 1, Ghost: 2, Dragon: 1, Dark: 0.5, Steel: 1, Fairy: 1 },
            Dragon: { Normal: 1, Fire: 1, Water: 1, Electric: 1, Grass: 1, Ice: 1, Fighting: 1, Poison: 1, Ground: 1, Flying: 1, Psychic: 1, Bug: 1, Rock: 1, Ghost: 1, Dragon: 2, Dark: 1, Steel: 0.5, Fairy: 0 },
            Dark: { Normal: 1, Fire: 1, Water: 1, Electric: 1, Grass: 1, Ice: 1, Fighting: 0.5, Poison: 1, Ground: 1, Flying: 1, Psychic: 2, Bug: 1, Rock: 1, Ghost: 2, Dragon: 1, Dark: 0.5, Steel: 1, Fairy: 0.5 },
            Steel: { Normal: 1, Fire: 0.5, Water: 0.5, Electric: 0.5, Grass: 1, Ice: 2, Fighting: 1, Poison: 1, Ground: 1, Flying: 1, Psychic: 1, Bug: 1, Rock: 2, Ghost: 1, Dragon: 1, Dark: 1, Steel: 0.5, Fairy: 2 },
            Fairy: { Normal: 1, Fire: 0.5, Water: 1, Electric: 1, Grass: 1, Ice: 1, Fighting: 2, Poison: 0.5, Ground: 1, Flying: 1, Psychic: 1, Bug: 1, Rock: 1, Ghost: 1, Dragon: 2, Dark: 2, Steel: 0.5, Fairy: 1 }
        };

        // Type colors matching official Pokémon colors
        const TYPE_COLORS = {
            Normal: '#A8A878',
            Fire: '#F08030',
            Water: '#6890F0',
            Electric: '#F8D030',
            Grass: '#78C850',
            Ice: '#98D8D8',
            Fighting: '#C03028',
            Poison: '#A040A0',
            Ground: '#E0C068',
            Flying: '#A890F0',
            Psychic: '#F85888',
            Bug: '#A8B820',
            Rock: '#B8A038',
            Ghost: '#705898',
            Dragon: '#7038F8',
            Dark: '#705848',
            Steel: '#B8B8D0',
            Fairy: '#EE99AC'
        };

        const TYPES = Object.keys(TYPE_CHART);

        // State
        let selectedAttackTypes = [];
        let selectedDefendTypes = [];
        let selectedLookupType = null;

        // Initialize
        function init() {
            renderTypeSelectors();
            renderTypeChart();
            renderLookupSelector();
        }

        // Render type selector badges
        function renderTypeSelectors() {
            const attackContainer = document.getElementById('attackingTypes');
            const defendContainer = document.getElementById('defendingTypes');

            attackContainer.innerHTML = '';
            defendContainer.innerHTML = '';

            TYPES.forEach(type => {
                // Attacking type badge
                const attackBadge = createTypeBadge(type, () => {
                    toggleAttackType(type);
                });
                attackContainer.appendChild(attackBadge);

                // Defending type badge
                const defendBadge = createTypeBadge(type, () => {
                    toggleDefendType(type);
                });
                defendContainer.appendChild(defendBadge);
            });
        }

        // Create type badge element
        function createTypeBadge(type, onClick) {
            const badge = document.createElement('div');
            badge.className = 'type-badge';
            badge.textContent = type;
            badge.style.backgroundColor = TYPE_COLORS[type];
            badge.onclick = onClick;
            badge.dataset.type = type;
            return badge;
        }

        // Toggle attack type selection
        function toggleAttackType(type) {
            const index = selectedAttackTypes.indexOf(type);

            if (index > -1) {
                selectedAttackTypes.splice(index, 1);
            } else {
                if (selectedAttackTypes.length < 2) {
                    selectedAttackTypes.push(type);
                } else {
                    selectedAttackTypes.shift();
                    selectedAttackTypes.push(type);
                }
            }

            updateUI();
            calculateEffectiveness();
        }

        // Toggle defend type selection
        function toggleDefendType(type) {
            const index = selectedDefendTypes.indexOf(type);

            if (index > -1) {
                selectedDefendTypes.splice(index, 1);
            } else {
                if (selectedDefendTypes.length < 2) {
                    selectedDefendTypes.push(type);
                } else {
                    selectedDefendTypes.shift();
                    selectedDefendTypes.push(type);
                }
            }

            updateUI();
            calculateEffectiveness();
        }

        // Update UI to reflect selected types
        function updateUI() {
            // Update attacking types
            document.querySelectorAll('#attackingTypes .type-badge').forEach(badge => {
                const type = badge.dataset.type;
                if (selectedAttackTypes.includes(type)) {
                    badge.classList.add('selected');
                } else {
                    badge.classList.remove('selected');
                }

                if (selectedAttackTypes.length >= 2 && !selectedAttackTypes.includes(type)) {
                    badge.classList.add('disabled');
                } else {
                    badge.classList.remove('disabled');
                }
            });

            // Update defending types
            document.querySelectorAll('#defendingTypes .type-badge').forEach(badge => {
                const type = badge.dataset.type;
                if (selectedDefendTypes.includes(type)) {
                    badge.classList.add('selected');
                } else {
                    badge.classList.remove('selected');
                }

                if (selectedDefendTypes.length >= 2 && !selectedDefendTypes.includes(type)) {
                    badge.classList.add('disabled');
                } else {
                    badge.classList.remove('disabled');
                }
            });
        }

        // Calculate type effectiveness
        function calculateEffectiveness() {
            if (selectedAttackTypes.length === 0 || selectedDefendTypes.length === 0) {
                document.getElementById('resultDisplay').innerHTML = '<div>Select types to calculate effectiveness</div>';
                return;
            }

            let totalMultiplier = 1;
            let breakdown = [];

            // Calculate for each attack type against each defend type
            selectedAttackTypes.forEach(attackType => {
                selectedDefendTypes.forEach(defendType => {
                    const multiplier = TYPE_CHART[attackType][defendType];
                    totalMultiplier *= multiplier;
                    breakdown.push(`${attackType} vs ${defendType}: ${multiplier}×`);
                });
            });

            displayResult(totalMultiplier, breakdown);
        }

        // Display calculation result
        function displayResult(multiplier, breakdown) {
            const resultDiv = document.getElementById('resultDisplay');

            let effectivenessClass = '';
            let effectivenessLabel = '';

            if (multiplier === 0) {
                effectivenessClass = 'immune';
                effectivenessLabel = 'No Effect';
            } else if (multiplier >= 4) {
                effectivenessClass = 'super-effective';
                effectivenessLabel = 'Extremely Effective!';
            } else if (multiplier >= 2) {
                effectivenessClass = 'super-effective';
                effectivenessLabel = 'Super Effective!';
            } else if (multiplier < 0.5) {
                effectivenessClass = 'not-effective';
                effectivenessLabel = 'Barely Effective';
            } else if (multiplier < 1) {
                effectivenessClass = 'not-effective';
                effectivenessLabel = 'Not Very Effective';
            } else {
                effectivenessLabel = 'Normal Effectiveness';
            }

            const breakdownText = breakdown.length > 1 ?
                `<div class="calculation-breakdown">${breakdown.join(' × ')}</div>` :
                '';

            resultDiv.innerHTML = `
                <div>Damage Multiplier</div>
                <div class="multiplier ${effectivenessClass}">${multiplier}×</div>
                <div class="effectiveness-label" style="background: ${multiplier >= 2 ? '#e74c3c' : multiplier < 1 && multiplier > 0 ? '#3498db' : multiplier === 0 ? '#95a5a6' : '#95a5a6'}; color: white;">
                    ${effectivenessLabel}
                </div>
                ${breakdownText}
            `;

            resultDiv.classList.add('pulse');
            setTimeout(() => resultDiv.classList.remove('pulse'), 500);
        }

        // Clear all selections
        function clearSelection() {
            selectedAttackTypes = [];
            selectedDefendTypes = [];
            updateUI();
            document.getElementById('resultDisplay').innerHTML = '<div>Select types to calculate effectiveness</div>';
        }

        // Render type chart
        function renderTypeChart() {
            const chartDiv = document.getElementById('typeChart');
            chartDiv.style.gridTemplateColumns = `80px repeat(${TYPES.length}, 1fr)`;

            // Header row
            chartDiv.appendChild(createChartCell('', true));
            TYPES.forEach(type => {
                chartDiv.appendChild(createChartCell(type, true, TYPE_COLORS[type]));
            });

            // Data rows
            TYPES.forEach(attackType => {
                // Row header
                chartDiv.appendChild(createChartCell(attackType, true, TYPE_COLORS[attackType]));

                // Data cells
                TYPES.forEach(defendType => {
                    const effectiveness = TYPE_CHART[attackType][defendType];
                    chartDiv.appendChild(createEffectivenessCell(attackType, defendType, effectiveness));
                });
            });
        }

        // Create chart cell
        function createChartCell(text, isHeader, color = null) {
            const cell = document.createElement('div');
            cell.className = `chart-cell ${isHeader ? 'header' : ''}`;
            cell.textContent = text;
            if (color) {
                cell.style.backgroundColor = color;
            }
            return cell;
        }

        // Create effectiveness cell
        function createEffectivenessCell(attackType, defendType, effectiveness) {
            const cell = document.createElement('div');
            cell.className = 'chart-cell';

            if (effectiveness === 2) {
                cell.classList.add('effectiveness-2x');
                cell.textContent = '2×';
            } else if (effectiveness === 0.5) {
                cell.classList.add('effectiveness-0-5x');
                cell.textContent = '½×';
            } else if (effectiveness === 0) {
                cell.classList.add('effectiveness-0x');
                cell.textContent = '0×';
            } else {
                cell.classList.add('effectiveness-1x');
                cell.textContent = '1×';
            }

            cell.onclick = () => highlightTypeInteraction(attackType, defendType);

            return cell;
        }

        // Highlight type interaction on chart
        function highlightTypeInteraction(attackType, defendType) {
            document.querySelectorAll('.chart-cell.highlighted').forEach(cell => {
                cell.classList.remove('highlighted');
            });

            const cells = document.querySelectorAll('.chart-cell');
            const attackIndex = TYPES.indexOf(attackType);
            const defendIndex = TYPES.indexOf(defendType);

            // Highlight row and column
            cells.forEach((cell, index) => {
                const row = Math.floor((index - TYPES.length - 1) / (TYPES.length + 1));
                const col = (index - TYPES.length - 1) % (TYPES.length + 1);

                if (row === attackIndex || col === defendIndex) {
                    cell.classList.add('highlighted');
                }
            });
        }

        // Quick Lookup Functions
        function renderLookupSelector() {
            const lookupContainer = document.getElementById('lookupTypes');
            lookupContainer.innerHTML = '';

            TYPES.forEach(type => {
                const badge = createTypeBadge(type, () => {
                    selectLookupType(type);
                });
                lookupContainer.appendChild(badge);
            });
        }

        function selectLookupType(type) {
            selectedLookupType = type;

            // Update UI
            document.querySelectorAll('#lookupTypes .type-badge').forEach(badge => {
                if (badge.dataset.type === type) {
                    badge.classList.add('selected');
                } else {
                    badge.classList.remove('selected');
                }
            });

            // Generate lookup results
            displayLookupResults(type);
        }

        function displayLookupResults(type) {
            const resultsDiv = document.getElementById('lookupResults');

            const superEffectiveAgainst = [];
            const weakTo = [];
            const resistsFrom = [];
            const immuneTo = [];

            // Check what this type is good against
            TYPES.forEach(defendType => {
                const effectiveness = TYPE_CHART[type][defendType];
                if (effectiveness === 2) superEffectiveAgainst.push(defendType);
            });

            // Check what this type is weak to
            TYPES.forEach(attackType => {
                const effectiveness = TYPE_CHART[attackType][type];
                if (effectiveness === 2) weakTo.push(attackType);
                if (effectiveness === 0.5) resistsFrom.push(attackType);
                if (effectiveness === 0) immuneTo.push(attackType);
            });

            resultsDiv.innerHTML = `
                ${createLookupSection('Super Effective Against', superEffectiveAgainst, '#e74c3c')}
                ${createLookupSection('Weak To', weakTo, '#e74c3c')}
                ${createLookupSection('Resists', resistsFrom, '#3498db')}
                ${immuneTo.length > 0 ? createLookupSection('Immune To', immuneTo, '#95a5a6') : ''}
            `;
        }

        function createLookupSection(title, types, color) {
            if (types.length === 0) {
                return `
                    <div class="lookup-result">
                        <h4>${title}</h4>
                        <p style="color: #999;">None</p>
                    </div>
                `;
            }

            const typeBadges = types.map(type =>
                `<span class="mini-type-badge" style="background-color: ${TYPE_COLORS[type]}">${type}</span>`
            ).join('');

            return `
                <div class="lookup-result">
                    <h4 style="color: ${color}">${title}</h4>
                    <div class="type-list">${typeBadges}</div>
                </div>
            `;
        }

        // Tab switching
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            if (tabName === 'lookup') {
                document.getElementById('lookupTab').classList.add('active');
            } else if (tabName === 'coverage') {
                document.getElementById('coverageTab').classList.add('active');
            }
        }

        // Start application
        init();
    </script>
</body>
</html>