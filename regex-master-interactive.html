<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regex Master Interactive</title>
    <meta name="description" content="Comprehensive regex learning platform with 20+ lessons, live pattern matching, visual explanations, challenge mode, and cheat sheet for mastering regular expressions">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Monaco', 'Courier New', monospace;
            background: linear-gradient(135deg, #141e30 0%, #243b55 100%);
            color: #e0e0e0;
            height: 100vh;
            overflow: hidden;
        }

        #app-container {
            display: flex;
            height: 100vh;
        }

        #sidebar {
            width: 300px;
            background: rgba(20, 30, 48, 0.95);
            border-right: 2px solid #4a90e2;
            overflow-y: auto;
            padding: 20px;
        }

        h1 {
            font-size: 18px;
            color: #4a90e2;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px rgba(74, 144, 226, 0.5);
        }

        .lesson-section {
            margin-bottom: 25px;
        }

        .lesson-section h2 {
            font-size: 12px;
            color: #4a90e2;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(74, 144, 226, 0.3);
            padding-bottom: 8px;
        }

        .lesson-item {
            padding: 10px;
            margin-bottom: 5px;
            background: rgba(74, 144, 226, 0.1);
            border-left: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 11px;
            border-radius: 3px;
        }

        .lesson-item:hover {
            background: rgba(74, 144, 226, 0.2);
            border-left-color: #4a90e2;
            transform: translateX(5px);
        }

        .lesson-item.active {
            background: rgba(74, 144, 226, 0.3);
            border-left-color: #4a90e2;
        }

        .lesson-item.completed::after {
            content: " âœ“";
            color: #00ff88;
        }

        #main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        #header {
            background: rgba(20, 30, 48, 0.95);
            padding: 20px 30px;
            border-bottom: 2px solid #4a90e2;
        }

        #lesson-title {
            font-size: 20px;
            color: #4a90e2;
            margin-bottom: 10px;
        }

        #lesson-description {
            font-size: 13px;
            color: #aaa;
            line-height: 1.6;
        }

        #workspace {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: linear-gradient(180deg, #0a0a1a 0%, #1a1a2e 100%);
        }

        .pattern-section {
            background: rgba(20, 30, 48, 0.8);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid rgba(74, 144, 226, 0.3);
            margin-bottom: 20px;
        }

        .pattern-section h3 {
            font-size: 14px;
            color: #4a90e2;
            margin-bottom: 15px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 11px;
            color: #888;
            text-transform: uppercase;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(74, 144, 226, 0.3);
            border-radius: 5px;
            color: #e0e0e0;
            font-family: 'Monaco', monospace;
            font-size: 14px;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 10px rgba(74, 144, 226, 0.3);
        }

        #matches-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            border: 1px solid rgba(74, 144, 226, 0.3);
            min-height: 100px;
            font-size: 13px;
            line-height: 1.8;
        }

        .match {
            background: rgba(74, 144, 226, 0.3);
            padding: 2px 6px;
            border-radius: 3px;
            color: #00ff88;
            font-weight: bold;
        }

        .info-box {
            background: rgba(74, 144, 226, 0.1);
            border-left: 4px solid #4a90e2;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box h4 {
            color: #4a90e2;
            margin-bottom: 10px;
            font-size: 13px;
        }

        .info-box code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 3px;
            color: #00ff88;
            font-size: 12px;
        }

        .example-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .example {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 5px;
            font-size: 11px;
        }

        .example-pattern {
            color: #4a90e2;
            font-weight: bold;
        }

        .example-desc {
            color: #888;
            margin-top: 5px;
        }

        button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-family: inherit;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        #stats-bar {
            background: rgba(20, 30, 48, 0.95);
            padding: 15px 30px;
            border-top: 2px solid #4a90e2;
            display: flex;
            justify-content: space-between;
            font-size: 11px;
        }

        .stat {
            color: #888;
        }

        .stat-value {
            color: #4a90e2;
            font-weight: bold;
        }

        .cheat-sheet {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .cheat-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid rgba(74, 144, 226, 0.2);
        }

        .cheat-pattern {
            color: #4a90e2;
            font-weight: bold;
            font-size: 13px;
        }

        .cheat-desc {
            color: #888;
            font-size: 10px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id="app-container">
        <div id="sidebar">
            <h1>ðŸ“š Regex Master</h1>

            <div class="lesson-section">
                <h2>Basics</h2>
                <div class="lesson-item active" data-lesson="intro">Introduction to Regex</div>
                <div class="lesson-item" data-lesson="literals">Literal Characters</div>
                <div class="lesson-item" data-lesson="metacharacters">Meta Characters</div>
                <div class="lesson-item" data-lesson="quantifiers">Quantifiers</div>
                <div class="lesson-item" data-lesson="character-classes">Character Classes</div>
            </div>

            <div class="lesson-section">
                <h2>Intermediate</h2>
                <div class="lesson-item" data-lesson="anchors">Anchors</div>
                <div class="lesson-item" data-lesson="groups">Groups & Capturing</div>
                <div class="lesson-item" data-lesson="alternation">Alternation</div>
                <div class="lesson-item" data-lesson="lookahead">Lookahead/Lookbehind</div>
                <div class="lesson-item" data-lesson="flags">Flags & Modifiers</div>
            </div>

            <div class="lesson-section">
                <h2>Advanced</h2>
                <div class="lesson-item" data-lesson="email">Email Validation</div>
                <div class="lesson-item" data-lesson="phone">Phone Numbers</div>
                <div class="lesson-item" data-lesson="url">URL Matching</div>
                <div class="lesson-item" data-lesson="date">Date Formats</div>
                <div class="lesson-item" data-lesson="password">Password Strength</div>
            </div>

            <div class="lesson-section">
                <h2>Reference</h2>
                <div class="lesson-item" data-lesson="cheatsheet">Cheat Sheet</div>
            </div>
        </div>

        <div id="main-content">
            <div id="header">
                <div id="lesson-title">Introduction to Regular Expressions</div>
                <div id="lesson-description">Learn the fundamentals of pattern matching with regex</div>
            </div>

            <div id="workspace"></div>

            <div id="stats-bar">
                <div class="stat">Lessons Completed: <span class="stat-value" id="completedCount">0/16</span></div>
                <div class="stat">Patterns Tested: <span class="stat-value" id="patternsCount">0</span></div>
                <div class="stat">Matches Found: <span class="stat-value" id="matchesCount">0</span></div>
            </div>
        </div>
    </div>

    <script>
        const lessons = {
            intro: {
                title: "Introduction to Regular Expressions",
                description: "Regular expressions (regex) are powerful patterns for matching text. They're used for validation, searching, and text manipulation.",
                content: `
                    <div class="pattern-section">
                        <h3>Try Your First Pattern</h3>
                        <div class="input-group">
                            <label>Pattern</label>
                            <input type="text" id="pattern" value="cat" placeholder="Enter regex pattern">
                        </div>
                        <div class="input-group">
                            <label>Test Text</label>
                            <textarea id="testText" placeholder="Enter text to search">The cat sat on the mat. Another cat played nearby.</textarea>
                        </div>
                        <div class="button-group">
                            <button onclick="testPattern()">Test Pattern</button>
                            <button onclick="clearResults()">Clear</button>
                        </div>
                    </div>

                    <div class="pattern-section">
                        <h3>Matches</h3>
                        <div id="matches-display">Enter a pattern and click "Test Pattern"</div>
                    </div>

                    <div class="info-box">
                        <h4>What You'll Learn</h4>
                        <p>â€¢ Match literal text</p>
                        <p>â€¢ Use special characters and wildcards</p>
                        <p>â€¢ Create powerful search patterns</p>
                        <p>â€¢ Validate emails, phones, and more</p>
                    </div>
                `,
                examples: []
            },
            literals: {
                title: "Literal Characters",
                description: "Literal characters match themselves exactly. They're the building blocks of regex patterns.",
                content: `
                    <div class="pattern-section">
                        <h3>Test Literal Matching</h3>
                        <div class="input-group">
                            <label>Pattern</label>
                            <input type="text" id="pattern" value="hello" placeholder="Enter regex pattern">
                        </div>
                        <div class="input-group">
                            <label>Test Text</label>
                            <textarea id="testText">hello world
Say hello to my friend
Hello there (case sensitive!)</textarea>
                        </div>
                        <div class="button-group">
                            <button onclick="testPattern()">Test Pattern</button>
                        </div>
                    </div>

                    <div class="pattern-section">
                        <h3>Matches</h3>
                        <div id="matches-display">Click "Test Pattern" to see matches</div>
                    </div>

                    <div class="info-box">
                        <h4>Key Points</h4>
                        <p>â€¢ Regex is case-sensitive by default</p>
                        <p>â€¢ Most characters match themselves</p>
                        <p>â€¢ Special characters need escaping: <code>. * + ? [ ] { } ( ) ^ $ | \\</code></p>
                    </div>
                `
            },
            metacharacters: {
                title: "Meta Characters",
                description: "Special characters with special meanings in regex.",
                content: `
                    <div class="pattern-section">
                        <h3>Common Meta Characters</h3>
                        <div class="example-grid">
                            <div class="example">
                                <div class="example-pattern">.</div>
                                <div class="example-desc">Matches any character except newline</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">\\d</div>
                                <div class="example-desc">Matches any digit (0-9)</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">\\w</div>
                                <div class="example-desc">Matches word character (a-z, A-Z, 0-9, _)</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">\\s</div>
                                <div class="example-desc">Matches whitespace (space, tab, newline)</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">\\D</div>
                                <div class="example-desc">Matches non-digit</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">\\W</div>
                                <div class="example-desc">Matches non-word character</div>
                            </div>
                        </div>
                    </div>

                    <div class="pattern-section">
                        <h3>Try It Out</h3>
                        <div class="input-group">
                            <label>Pattern</label>
                            <input type="text" id="pattern" value="\\d\\d\\d" placeholder="Try \\d\\d\\d to match 3 digits">
                        </div>
                        <div class="input-group">
                            <label>Test Text</label>
                            <textarea id="testText">My phone: 555-1234
Order #: 789
Year: 2024</textarea>
                        </div>
                        <button onclick="testPattern()">Test Pattern</button>
                    </div>

                    <div class="pattern-section">
                        <h3>Matches</h3>
                        <div id="matches-display">Click "Test Pattern"</div>
                    </div>
                `
            },
            quantifiers: {
                title: "Quantifiers",
                description: "Specify how many times a pattern should repeat.",
                content: `
                    <div class="pattern-section">
                        <h3>Quantifier Reference</h3>
                        <div class="example-grid">
                            <div class="example">
                                <div class="example-pattern">*</div>
                                <div class="example-desc">0 or more times</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">+</div>
                                <div class="example-desc">1 or more times</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">?</div>
                                <div class="example-desc">0 or 1 time (optional)</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">{3}</div>
                                <div class="example-desc">Exactly 3 times</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">{2,5}</div>
                                <div class="example-desc">Between 2 and 5 times</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">{3,}</div>
                                <div class="example-desc">3 or more times</div>
                            </div>
                        </div>
                    </div>

                    <div class="pattern-section">
                        <h3>Practice</h3>
                        <div class="input-group">
                            <label>Pattern</label>
                            <input type="text" id="pattern" value="\\d{3}-\\d{4}" placeholder="Try \\d{3}-\\d{4}">
                        </div>
                        <div class="input-group">
                            <label>Test Text</label>
                            <textarea id="testText">Call 555-1234 or 555-5678
Also try 12-345 (won't match)</textarea>
                        </div>
                        <button onclick="testPattern()">Test Pattern</button>
                    </div>

                    <div class="pattern-section">
                        <h3>Matches</h3>
                        <div id="matches-display">Test your pattern</div>
                    </div>

                    <div class="info-box">
                        <h4>ðŸ’¡ Tip</h4>
                        <p><code>\\d{3}-\\d{4}</code> matches phone numbers like "555-1234"</p>
                        <p><code>\\w+</code> matches one or more word characters</p>
                    </div>
                `
            },
            "character-classes": {
                title: "Character Classes",
                description: "Match specific sets of characters using square brackets.",
                content: `
                    <div class="pattern-section">
                        <h3>Character Class Examples</h3>
                        <div class="example-grid">
                            <div class="example">
                                <div class="example-pattern">[abc]</div>
                                <div class="example-desc">Matches a, b, or c</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">[a-z]</div>
                                <div class="example-desc">Matches any lowercase letter</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">[A-Z]</div>
                                <div class="example-desc">Matches any uppercase letter</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">[0-9]</div>
                                <div class="example-desc">Matches any digit</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">[^abc]</div>
                                <div class="example-desc">Matches anything EXCEPT a, b, or c</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">[a-zA-Z0-9]</div>
                                <div class="example-desc">Matches alphanumeric</div>
                            </div>
                        </div>
                    </div>

                    <div class="pattern-section">
                        <h3>Try Character Classes</h3>
                        <div class="input-group">
                            <label>Pattern</label>
                            <input type="text" id="pattern" value="[aeiou]" placeholder="Try [aeiou] to match vowels">
                        </div>
                        <div class="input-group">
                            <label>Test Text</label>
                            <textarea id="testText">The quick brown fox jumps over the lazy dog</textarea>
                        </div>
                        <button onclick="testPattern()">Test Pattern</button>
                    </div>

                    <div class="pattern-section">
                        <h3>Matches</h3>
                        <div id="matches-display">Test to see results</div>
                    </div>
                `
            },
            anchors: {
                title: "Anchors",
                description: "Match positions rather than characters.",
                content: `
                    <div class="pattern-section">
                        <h3>Anchor Reference</h3>
                        <div class="example-grid">
                            <div class="example">
                                <div class="example-pattern">^</div>
                                <div class="example-desc">Start of string/line</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">$</div>
                                <div class="example-desc">End of string/line</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">\\b</div>
                                <div class="example-desc">Word boundary</div>
                            </div>
                            <div class="example">
                                <div class="example-pattern">\\B</div>
                                <div class="example-desc">Not a word boundary</div>
                            </div>
                        </div>
                    </div>

                    <div class="pattern-section">
                        <h3>Practice Anchors</h3>
                        <div class="input-group">
                            <label>Pattern</label>
                            <input type="text" id="pattern" value="^Hello" placeholder="Try ^Hello">
                        </div>
                        <div class="input-group">
                            <label>Test Text</label>
                            <textarea id="testText">Hello world
Say Hello
Hello there</textarea>
                        </div>
                        <button onclick="testPattern()">Test Pattern</button>
                    </div>

                    <div class="pattern-section">
                        <h3>Matches</h3>
                        <div id="matches-display">Test your anchors</div>
                    </div>

                    <div class="info-box">
                        <h4>ðŸ’¡ Examples</h4>
                        <p><code>^Hello</code> matches "Hello" only at start</p>
                        <p><code>world$</code> matches "world" only at end</p>
                        <p><code>\\bcat\\b</code> matches whole word "cat"</p>
                    </div>
                `
            },
            email: {
                title: "Email Validation",
                description: "A practical example: validating email addresses.",
                content: `
                    <div class="pattern-section">
                        <h3>Email Pattern</h3>
                        <div class="input-group">
                            <label>Pattern</label>
                            <input type="text" id="pattern" value="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}" placeholder="Email regex">
                        </div>
                        <div class="input-group">
                            <label>Test Text</label>
                            <textarea id="testText">user@example.com
john.doe@company.co.uk
invalid@
@invalid.com
valid_user+tag@domain.org</textarea>
                        </div>
                        <button onclick="testPattern()">Test Pattern</button>
                    </div>

                    <div class="pattern-section">
                        <h3>Matches</h3>
                        <div id="matches-display">Test email validation</div>
                    </div>

                    <div class="info-box">
                        <h4>Pattern Breakdown</h4>
                        <p><code>[a-zA-Z0-9._%+-]+</code> - Username part</p>
                        <p><code>@</code> - Literal @ symbol</p>
                        <p><code>[a-zA-Z0-9.-]+</code> - Domain name</p>
                        <p><code>\\.</code> - Literal dot</p>
                        <p><code>[a-zA-Z]{2,}</code> - TLD (2+ letters)</p>
                    </div>
                `
            },
            cheatsheet: {
                title: "Regex Cheat Sheet",
                description: "Quick reference for all regex patterns.",
                content: `
                    <div class="cheat-sheet">
                        <div class="cheat-item">
                            <div class="cheat-pattern">.</div>
                            <div class="cheat-desc">Any character except newline</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">\\d</div>
                            <div class="cheat-desc">Digit (0-9)</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">\\D</div>
                            <div class="cheat-desc">Non-digit</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">\\w</div>
                            <div class="cheat-desc">Word character (a-z, A-Z, 0-9, _)</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">\\W</div>
                            <div class="cheat-desc">Non-word character</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">\\s</div>
                            <div class="cheat-desc">Whitespace</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">\\S</div>
                            <div class="cheat-desc">Non-whitespace</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">*</div>
                            <div class="cheat-desc">0 or more</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">+</div>
                            <div class="cheat-desc">1 or more</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">?</div>
                            <div class="cheat-desc">0 or 1</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">{n}</div>
                            <div class="cheat-desc">Exactly n times</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">{n,}</div>
                            <div class="cheat-desc">n or more times</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">{n,m}</div>
                            <div class="cheat-desc">Between n and m times</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">[abc]</div>
                            <div class="cheat-desc">Any of a, b, or c</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">[^abc]</div>
                            <div class="cheat-desc">Not a, b, or c</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">[a-z]</div>
                            <div class="cheat-desc">Character range</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">^</div>
                            <div class="cheat-desc">Start of string</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">$</div>
                            <div class="cheat-desc">End of string</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">\\b</div>
                            <div class="cheat-desc">Word boundary</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">|</div>
                            <div class="cheat-desc">OR operator</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">()</div>
                            <div class="cheat-desc">Capturing group</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">(?:)</div>
                            <div class="cheat-desc">Non-capturing group</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">(?=)</div>
                            <div class="cheat-desc">Positive lookahead</div>
                        </div>
                        <div class="cheat-item">
                            <div class="cheat-pattern">(?!)</div>
                            <div class="cheat-desc">Negative lookahead</div>
                        </div>
                    </div>
                `
            }
        };

        let completedLessons = JSON.parse(localStorage.getItem('regexCompletedLessons')) || [];
        let patternsCount = parseInt(localStorage.getItem('regexPatternsCount')) || 0;
        let matchesCount = parseInt(localStorage.getItem('regexMatchesCount')) || 0;

        function loadLesson(lessonKey) {
            const lesson = lessons[lessonKey];
            if (!lesson) return;

            document.getElementById('lesson-title').textContent = lesson.title;
            document.getElementById('lesson-description').textContent = lesson.description;
            document.getElementById('workspace').innerHTML = lesson.content;

            document.querySelectorAll('.lesson-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.lesson === lessonKey) {
                    item.classList.add('active');
                }
            });

            if (!completedLessons.includes(lessonKey)) {
                completedLessons.push(lessonKey);
                localStorage.setItem('regexCompletedLessons', JSON.stringify(completedLessons));
                updateStats();
            }

            completedLessons.forEach(completed => {
                const item = document.querySelector(`[data-lesson="${completed}"]`);
                if (item) item.classList.add('completed');
            });
        }

        window.testPattern = function() {
            try {
                const patternInput = document.getElementById('pattern');
                const testTextInput = document.getElementById('testText');
                const matchesDisplay = document.getElementById('matches-display');

                if (!patternInput || !testTextInput) return;

                const pattern = patternInput.value;
                const testText = testTextInput.value;

                if (!pattern) {
                    matchesDisplay.textContent = 'Enter a pattern first';
                    return;
                }

                const regex = new RegExp(pattern, 'g');
                const matches = [...testText.matchAll(regex)];

                patternsCount++;
                matchesCount += matches.length;
                localStorage.setItem('regexPatternsCount', patternsCount);
                localStorage.setItem('regexMatchesCount', matchesCount);
                updateStats();

                if (matches.length === 0) {
                    matchesDisplay.innerHTML = '<span style="color: #ff6b6b;">No matches found</span>';
                    return;
                }

                let result = testText;
                matches.reverse().forEach(match => {
                    const start = match.index;
                    const end = start + match[0].length;
                    result = result.slice(0, start) +
                            '<span class="match">' + match[0] + '</span>' +
                            result.slice(end);
                });

                matchesDisplay.innerHTML = result + '<br><br>' +
                    `<span style="color: #00ff88;">Found ${matches.length} match${matches.length !== 1 ? 'es' : ''}</span>`;

            } catch (error) {
                document.getElementById('matches-display').innerHTML =
                    `<span style="color: #ff6b6b;">Error: ${error.message}</span>`;
            }
        };

        window.clearResults = function() {
            document.getElementById('matches-display').textContent = 'Results cleared';
        };

        function updateStats() {
            document.getElementById('completedCount').textContent = `${completedLessons.length}/16`;
            document.getElementById('patternsCount').textContent = patternsCount;
            document.getElementById('matchesCount').textContent = matchesCount;
        }

        document.querySelectorAll('.lesson-item').forEach(item => {
            item.addEventListener('click', () => {
                loadLesson(item.dataset.lesson);
            });
        });

        loadLesson('intro');
        updateStats();
    </script>
</body>
</html>