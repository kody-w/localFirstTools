<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Training Game</title>
    <meta name="description" content="Brain training games: number memory, pattern recall, word sequences, spatial memory with progress tracking and statistics">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        #app {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(20, 20, 40, 0.95);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        #header {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px 30px;
            border-bottom: 2px solid #667eea;
        }
        h1 { font-size: 24px; color: #667eea; margin-bottom: 10px; }
        #stats {
            display: flex;
            gap: 20px;
            font-size: 12px;
            color: #aaa;
        }
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .stat-value {
            color: #667eea;
            font-weight: bold;
        }
        #menu {
            padding: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .game-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 8px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }
        .game-card:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-5px);
        }
        .game-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }
        .game-title {
            font-size: 18px;
            color: #667eea;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .game-description {
            font-size: 12px;
            color: #aaa;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .game-best-score {
            font-size: 11px;
            color: #51cf66;
            font-weight: bold;
        }
        #game-screen {
            display: none;
            padding: 30px;
        }
        #game-screen.active { display: block; }
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        .back-btn:hover { background: rgba(255, 255, 255, 0.2); }
        #game-area {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 40px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .sequence-display {
            font-size: 72px;
            color: #667eea;
            font-weight: bold;
            margin: 30px 0;
            letter-spacing: 10px;
        }
        .pattern-grid {
            display: grid;
            gap: 10px;
            margin: 30px 0;
        }
        .pattern-cell {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .pattern-cell:hover { background: rgba(102, 126, 234, 0.3); }
        .pattern-cell.active { background: #667eea; }
        .pattern-cell.highlight {
            background: #ffeb3b;
            animation: pulse 0.5s;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .word-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        .word-item {
            background: rgba(102, 126, 234, 0.2);
            padding: 15px;
            border-radius: 5px;
            color: #e0e0e0;
            font-size: 16px;
        }
        input.answer-input {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            font-size: 24px;
            text-align: center;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #667eea;
            color: #e0e0e0;
            border-radius: 8px;
            margin: 20px 0;
        }
        button.game-btn {
            padding: 15px 40px;
            background: #667eea;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px;
        }
        button.game-btn:hover { background: #7789f0; }
        .message {
            font-size: 24px;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
        }
        .message.success {
            background: rgba(81, 207, 102, 0.2);
            color: #51cf66;
        }
        .message.error {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
        }
        .level-indicator {
            font-size: 18px;
            color: #667eea;
            margin-bottom: 20px;
        }
        .timer {
            font-size: 48px;
            color: #ffeb3b;
            font-weight: bold;
            margin: 20px 0;
        }
        .difficulty-selector {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        .difficulty-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #667eea;
            color: #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
        }
        .difficulty-btn.active {
            background: #667eea;
            color: #fff;
        }
    </style>
</head>
<body>
    <div id="app">
        <div id="header">
            <h1>üß† Memory Training Game</h1>
            <div id="stats">
                <div class="stat-item">
                    <span>Games Played:</span>
                    <span class="stat-value" id="totalGames">0</span>
                </div>
                <div class="stat-item">
                    <span>Total Score:</span>
                    <span class="stat-value" id="totalScore">0</span>
                </div>
                <div class="stat-item">
                    <span>Streak:</span>
                    <span class="stat-value" id="currentStreak">0</span>
                </div>
            </div>
        </div>

        <div id="menu">
            <div class="game-card" onclick="startGame('numbers')">
                <div class="game-icon">üî¢</div>
                <div class="game-title">Number Memory</div>
                <div class="game-description">
                    Memorize increasingly long sequences of numbers. Test your working memory!
                </div>
                <div class="game-best-score">Best: <span id="best-numbers">0</span></div>
            </div>

            <div class="game-card" onclick="startGame('pattern')">
                <div class="game-icon">üé®</div>
                <div class="game-title">Pattern Recall</div>
                <div class="game-description">
                    Watch the pattern light up, then recreate it from memory.
                </div>
                <div class="game-best-score">Best: <span id="best-pattern">0</span></div>
            </div>

            <div class="game-card" onclick="startGame('words')">
                <div class="game-icon">üìö</div>
                <div class="game-title">Word Memory</div>
                <div class="game-description">
                    Remember lists of words and recall them in order.
                </div>
                <div class="game-best-score">Best: <span id="best-words">0</span></div>
            </div>

            <div class="game-card" onclick="startGame('sequence')">
                <div class="game-icon">‚ö°</div>
                <div class="game-title">Sequence Speed</div>
                <div class="game-description">
                    Fast-paced number sequences. How many can you remember under pressure?
                </div>
                <div class="game-best-score">Best: <span id="best-sequence">0</span></div>
            </div>
        </div>

        <div id="game-screen">
            <div class="game-header">
                <button class="back-btn" onclick="backToMenu()">‚Üê Back to Menu</button>
                <div class="level-indicator">Level: <span id="currentLevel">1</span></div>
            </div>
            <div id="game-area"></div>
        </div>
    </div>

    <script>
        let gameState = {
            currentGame: null,
            level: 1,
            score: 0,
            streak: 0,
            difficulty: 'medium'
        };

        let stats = JSON.parse(localStorage.getItem('memoryGameStats')) || {
            totalGames: 0,
            totalScore: 0,
            currentStreak: 0,
            bestScores: { numbers: 0, pattern: 0, words: 0, sequence: 0 }
        };

        const wordLists = {
            easy: ['cat', 'dog', 'sun', 'car', 'book', 'tree', 'hat', 'pen', 'cup', 'key'],
            medium: ['dragon', 'castle', 'forest', 'mountain', 'ocean', 'galaxy', 'thunder', 'crystal', 'wizard', 'knight'],
            hard: ['ephemeral', 'labyrinth', 'serendipity', 'paradox', 'zenith', 'enigma', 'quantum', 'ethereal', 'luminous', 'cascade']
        };

        function updateStats() {
            document.getElementById('totalGames').textContent = stats.totalGames;
            document.getElementById('totalScore').textContent = stats.totalScore;
            document.getElementById('currentStreak').textContent = stats.currentStreak;
            document.getElementById('best-numbers').textContent = stats.bestScores.numbers;
            document.getElementById('best-pattern').textContent = stats.bestScores.pattern;
            document.getElementById('best-words').textContent = stats.bestScores.words;
            document.getElementById('best-sequence').textContent = stats.bestScores.sequence;
        }

        function saveStats() {
            localStorage.setItem('memoryGameStats', JSON.stringify(stats));
            updateStats();
        }

        function startGame(type) {
            gameState.currentGame = type;
            gameState.level = 1;
            gameState.score = 0;
            document.getElementById('menu').style.display = 'none';
            document.getElementById('game-screen').classList.add('active');
            document.getElementById('currentLevel').textContent = gameState.level;

            switch(type) {
                case 'numbers': playNumberMemory(); break;
                case 'pattern': playPatternRecall(); break;
                case 'words': playWordMemory(); break;
                case 'sequence': playSequenceSpeed(); break;
            }
        }

        function backToMenu() {
            document.getElementById('menu').style.display = 'grid';
            document.getElementById('game-screen').classList.remove('active');
            gameState.currentGame = null;
        }

        async function playNumberMemory() {
            const area = document.getElementById('game-area');
            const length = 3 + gameState.level;
            const sequence = Array.from({ length }, () => Math.floor(Math.random() * 10)).join('');

            area.innerHTML = `
                <div class="level-indicator">Memorize this number:</div>
                <div class="sequence-display">${sequence}</div>
                <div style="color: #aaa;">You have ${length} seconds...</div>
            `;

            await sleep(length * 1000);

            area.innerHTML = `
                <div class="level-indicator">Enter the number you saw:</div>
                <input type="text" class="answer-input" id="answer" maxlength="${length}" autofocus>
                <button class="game-btn" onclick="checkNumberAnswer('${sequence}')">Submit</button>
            `;

            document.getElementById('answer').focus();
        }

        function checkNumberAnswer(correct) {
            const answer = document.getElementById('answer').value;
            const area = document.getElementById('game-area');

            if (answer === correct) {
                gameState.level++;
                gameState.score += 10 * gameState.level;
                stats.currentStreak++;

                area.innerHTML = `
                    <div class="message success">‚úì Correct!</div>
                    <div style="color: #51cf66; font-size: 32px; margin: 20px;">+${10 * gameState.level} points</div>
                    <button class="game-btn" onclick="playNumberMemory()">Next Level</button>
                `;
                document.getElementById('currentLevel').textContent = gameState.level;
            } else {
                endGame(`The correct answer was: ${correct}`);
            }
        }

        async function playPatternRecall() {
            const area = document.getElementById('game-area');
            const gridSize = Math.min(2 + Math.floor(gameState.level / 2), 5);
            const patternLength = 3 + gameState.level;

            area.innerHTML = `
                <div class="level-indicator">Watch the pattern:</div>
                <div class="pattern-grid" id="patternGrid" style="grid-template-columns: repeat(${gridSize}, 80px);"></div>
            `;

            const grid = document.getElementById('patternGrid');
            const cells = [];
            const pattern = [];

            for (let i = 0; i < gridSize * gridSize; i++) {
                const cell = document.createElement('div');
                cell.className = 'pattern-cell';
                cell.dataset.index = i;
                grid.appendChild(cell);
                cells.push(cell);
            }

            // Generate pattern
            while (pattern.length < patternLength) {
                const index = Math.floor(Math.random() * cells.length);
                if (!pattern.includes(index)) pattern.push(index);
            }

            // Show pattern
            for (const index of pattern) {
                cells[index].classList.add('highlight');
                await sleep(800);
                cells[index].classList.remove('highlight');
                await sleep(200);
            }

            // Let player recreate
            area.innerHTML = `
                <div class="level-indicator">Click the cells in order:</div>
                <div class="pattern-grid" id="patternGrid" style="grid-template-columns: repeat(${gridSize}, 80px);"></div>
                <button class="game-btn" onclick="checkPattern([${pattern}])">Submit</button>
            `;

            const newGrid = document.getElementById('patternGrid');
            window.playerPattern = [];

            for (let i = 0; i < gridSize * gridSize; i++) {
                const cell = document.createElement('div');
                cell.className = 'pattern-cell';
                cell.dataset.index = i;
                cell.onclick = function() {
                    if (!this.classList.contains('active')) {
                        this.classList.add('active');
                        window.playerPattern.push(parseInt(this.dataset.index));
                    }
                };
                newGrid.appendChild(cell);
            }
        }

        function checkPattern(correct) {
            const area = document.getElementById('game-area');
            const match = window.playerPattern.length === correct.length &&
                         window.playerPattern.every((val, i) => val === correct[i]);

            if (match) {
                gameState.level++;
                gameState.score += 15 * gameState.level;
                stats.currentStreak++;

                area.innerHTML = `
                    <div class="message success">‚úì Perfect!</div>
                    <div style="color: #51cf66; font-size: 32px; margin: 20px;">+${15 * gameState.level} points</div>
                    <button class="game-btn" onclick="playPatternRecall()">Next Level</button>
                `;
                document.getElementById('currentLevel').textContent = gameState.level;
            } else {
                endGame('Pattern incorrect');
            }
        }

        async function playWordMemory() {
            const area = document.getElementById('game-area');
            const wordCount = 3 + gameState.level;
            const difficulty = gameState.level <= 3 ? 'easy' : gameState.level <= 6 ? 'medium' : 'hard';
            const availableWords = [...wordLists[difficulty]];
            const words = [];

            for (let i = 0; i < wordCount; i++) {
                const index = Math.floor(Math.random() * availableWords.length);
                words.push(availableWords[index]);
                availableWords.splice(index, 1);
            }

            area.innerHTML = `
                <div class="level-indicator">Memorize these words:</div>
                <div class="word-list">
                    ${words.map(word => `<div class="word-item">${word}</div>`).join('')}
                </div>
                <div style="color: #aaa;">You have ${wordCount * 2} seconds...</div>
            `;

            await sleep(wordCount * 2000);

            area.innerHTML = `
                <div class="level-indicator">Enter the words you remember (separated by spaces):</div>
                <input type="text" class="answer-input" id="answer" autofocus style="font-size: 16px;">
                <button class="game-btn" onclick="checkWords([${words.map(w => `'${w}'`)}])">Submit</button>
            `;

            document.getElementById('answer').focus();
        }

        function checkWords(correct) {
            const answer = document.getElementById('answer').value.toLowerCase().trim().split(/\s+/);
            const area = document.getElementById('game-area');
            const correctCount = answer.filter(word => correct.includes(word)).length;
            const accuracy = correctCount / correct.length;

            if (accuracy >= 0.8) {
                gameState.level++;
                gameState.score += 20 * gameState.level;
                stats.currentStreak++;

                area.innerHTML = `
                    <div class="message success">‚úì Great memory! (${correctCount}/${correct.length})</div>
                    <div style="color: #51cf66; font-size: 32px; margin: 20px;">+${20 * gameState.level} points</div>
                    <button class="game-btn" onclick="playWordMemory()">Next Level</button>
                `;
                document.getElementById('currentLevel').textContent = gameState.level;
            } else {
                endGame(`You remembered ${correctCount}/${correct.length} words`);
            }
        }

        async function playSequenceSpeed() {
            const area = document.getElementById('game-area');
            const length = 2 + gameState.level;
            const sequence = Array.from({ length }, () => Math.floor(Math.random() * 10)).join('');

            area.innerHTML = `
                <div class="level-indicator">Quick! Memorize:</div>
                <div class="sequence-display">${sequence}</div>
            `;

            await sleep(1000 + length * 300);

            area.innerHTML = `
                <div class="level-indicator">Enter it now!</div>
                <input type="text" class="answer-input" id="answer" maxlength="${length}" autofocus>
                <button class="game-btn" onclick="checkNumberAnswer('${sequence}')">Submit</button>
            `;

            document.getElementById('answer').focus();
        }

        function endGame(message) {
            const area = document.getElementById('game-area');
            stats.totalGames++;
            stats.totalScore += gameState.score;
            stats.currentStreak = 0;

            if (gameState.score > stats.bestScores[gameState.currentGame]) {
                stats.bestScores[gameState.currentGame] = gameState.score;
            }

            saveStats();

            area.innerHTML = `
                <div class="message error">Game Over</div>
                <div style="color: #aaa; margin: 20px;">${message}</div>
                <div style="color: #667eea; font-size: 32px; margin: 20px;">Final Score: ${gameState.score}</div>
                <div style="color: #aaa; margin: 20px;">Level Reached: ${gameState.level}</div>
                <button class="game-btn" onclick="startGame('${gameState.currentGame}')">Play Again</button>
                <button class="game-btn" onclick="backToMenu()">Back to Menu</button>
            `;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        updateStats();
    </script>
</body>
</html>