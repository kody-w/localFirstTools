<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="WowMon Team Builder - Plan your perfect team with type coverage analysis">
    <title>WowMon Team Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: monospace;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 3px solid #8bac0f;
            margin-bottom: 30px;
        }

        h1 {
            color: #8bac0f;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #9bbc0f;
            font-size: 14px;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .section {
            background: #2d2d2d;
            border: 2px solid #444;
            border-radius: 10px;
            padding: 20px;
        }

        .section h2 {
            color: #9bbc0f;
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #444;
        }

        .section h3 {
            color: #9bbc0f;
            font-size: 14px;
            margin: 15px 0 10px 0;
        }

        /* Team Slots */
        .team-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .team-slot {
            background: #1a1a1a;
            border: 3px solid #444;
            border-radius: 8px;
            padding: 15px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            position: relative;
            cursor: pointer;
        }

        .team-slot.empty {
            border-style: dashed;
            opacity: 0.6;
        }

        .team-slot.empty:hover {
            opacity: 1;
            border-color: #8bac0f;
            transform: scale(1.02);
        }

        .team-slot.filled {
            border-color: #8bac0f;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        }

        .team-slot.filled:hover {
            border-color: #9bbc0f;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 172, 15, 0.3);
        }

        .team-slot-number {
            position: absolute;
            top: 5px;
            left: 8px;
            font-size: 12px;
            color: #666;
            font-weight: bold;
        }

        .team-slot-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #e74c3c;
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            line-height: 24px;
            text-align: center;
            padding: 0;
            transition: all 0.2s;
        }

        .team-slot-remove:hover {
            background: #c0392b;
            transform: scale(1.1);
        }

        .creature-name {
            font-weight: bold;
            font-size: 14px;
            color: #e0e0e0;
            margin-bottom: 8px;
            text-align: center;
        }

        .creature-types {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 8px;
        }

        .type-badge {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .creature-stats {
            font-size: 10px;
            color: #aaa;
            text-align: center;
        }

        .creature-level {
            margin-top: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .level-input {
            width: 50px;
            background: #1a1a1a;
            border: 1px solid #444;
            color: #e0e0e0;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 10px;
        }

        /* Creature Selector */
        .creature-selector {
            margin-bottom: 15px;
        }

        .creature-search {
            width: 100%;
            background: #1a1a1a;
            border: 2px solid #444;
            color: #e0e0e0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .creature-search:focus {
            outline: none;
            border-color: #8bac0f;
        }

        .creature-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
            padding: 5px;
        }

        .creature-item {
            background: #1a1a1a;
            border: 2px solid #444;
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 11px;
        }

        .creature-item:hover {
            border-color: #8bac0f;
            background: #2d2d2d;
            transform: scale(1.02);
        }

        .creature-item-name {
            font-weight: bold;
            margin-bottom: 3px;
        }

        /* Team Stats */
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .stat-box {
            background: #1a1a1a;
            padding: 12px;
            border-radius: 5px;
            border: 2px solid #333;
        }

        .stat-label {
            font-size: 11px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 20px;
            color: #8bac0f;
            font-weight: bold;
        }

        /* Type Coverage */
        .coverage-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .coverage-item {
            background: #1a1a1a;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            border: 2px solid #333;
            transition: all 0.2s;
        }

        .coverage-item:hover {
            transform: scale(1.05);
        }

        .coverage-item.super-effective {
            border-color: #27ae60;
            background: linear-gradient(135deg, #1e4d2b 0%, #27ae60 100%);
        }

        .coverage-item.effective {
            border-color: #2ecc71;
            background: #1e4d2b;
        }

        .coverage-item.not-effective {
            border-color: #e74c3c;
            background: #4d1e1e;
        }

        .coverage-item.immune {
            border-color: #7f8c8d;
            background: #2c3e50;
            opacity: 0.6;
        }

        .coverage-type {
            font-weight: bold;
            font-size: 11px;
            margin-bottom: 3px;
            text-transform: uppercase;
        }

        .coverage-multiplier {
            font-size: 14px;
            font-weight: bold;
        }

        /* Defensive Analysis */
        .defense-group {
            margin-bottom: 15px;
        }

        .defense-title {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .defense-title.weakness {
            color: #e74c3c;
        }

        .defense-title.resistance {
            color: #27ae60;
        }

        .defense-title.immunity {
            color: #95a5a6;
        }

        .defense-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .defense-badge {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            color: white;
        }

        .weakness-4x {
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 10px rgba(192, 57, 43, 0.5);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        /* Action Buttons */
        .action-bar {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            background: #4a5a3a;
            border: none;
            color: #e0e0e0;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-family: monospace;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.2s;
            flex: 1;
            min-width: 120px;
        }

        .btn:hover {
            background: #5a6a4a;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: #8bac0f;
            color: #1a1a1a;
        }

        .btn-primary:hover {
            background: #9bbc0f;
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        /* Speed Tiers */
        .speed-tier-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .speed-tier {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #1a1a1a;
            padding: 8px;
            border-radius: 5px;
            border-left: 3px solid #8bac0f;
        }

        .speed-tier-rank {
            font-size: 18px;
            font-weight: bold;
            color: #8bac0f;
            min-width: 30px;
        }

        .speed-tier-name {
            flex: 1;
            font-size: 12px;
        }

        .speed-tier-value {
            font-size: 12px;
            color: #aaa;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #2d2d2d;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            border: 3px solid #8bac0f;
        }

        .modal-content h3 {
            color: #9bbc0f;
            margin-bottom: 15px;
        }

        .modal-textarea {
            width: 100%;
            min-height: 200px;
            background: #1a1a1a;
            border: 2px solid #444;
            color: #e0e0e0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 11px;
            resize: vertical;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* Saved Teams */
        .saved-teams-grid {
            display: grid;
            gap: 10px;
        }

        .saved-team-card {
            background: #1a1a1a;
            border: 2px solid #444;
            border-radius: 5px;
            padding: 12px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .saved-team-card:hover {
            border-color: #8bac0f;
            transform: translateX(5px);
        }

        .saved-team-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .saved-team-name {
            font-weight: bold;
            color: #9bbc0f;
            font-size: 13px;
        }

        .saved-team-date {
            font-size: 9px;
            color: #666;
        }

        .saved-team-members {
            font-size: 10px;
            color: #aaa;
            margin-bottom: 8px;
        }

        .saved-team-actions {
            display: flex;
            gap: 5px;
        }

        .saved-team-btn {
            background: #333;
            border: none;
            color: #e0e0e0;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 10px;
            font-family: monospace;
            transition: all 0.2s;
        }

        .saved-team-btn:hover {
            background: #444;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #4a5a3a;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #5a6a4a;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .team-slots {
                grid-template-columns: repeat(2, 1fr);
            }

            .coverage-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .creature-list {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .team-slots {
                grid-template-columns: 1fr;
            }

            .coverage-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stat-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>WowMon Team Builder</h1>
            <p class="subtitle">Plan your perfect team with advanced type coverage analysis</p>
        </header>

        <div class="main-grid">
            <!-- Left Column: Team Building -->
            <div>
                <div class="section">
                    <h2>Your Team (<span id="teamSize">0</span>/6)</h2>
                    <div id="teamSlots" class="team-slots"></div>

                    <div class="action-bar">
                        <button id="clearTeam" class="btn btn-danger">Clear Team</button>
                        <button id="randomTeam" class="btn">Random Team</button>
                        <button id="saveTeam" class="btn btn-primary">Save Team</button>
                        <button id="exportTeam" class="btn">Export JSON</button>
                        <button id="importTeam" class="btn">Import JSON</button>
                    </div>
                </div>

                <div class="section">
                    <h2>Offensive Type Coverage</h2>
                    <div id="offensiveCoverage" class="coverage-grid"></div>
                </div>

                <div class="section">
                    <h2>Defensive Analysis</h2>
                    <div id="defensiveAnalysis"></div>
                </div>
            </div>

            <!-- Right Column: Creature Selection & Stats -->
            <div>
                <div class="section">
                    <h2>Add Creature</h2>
                    <div class="creature-selector">
                        <input type="text" id="creatureSearch" class="creature-search" placeholder="Search creatures...">
                        <div id="creatureList" class="creature-list"></div>
                    </div>
                </div>

                <div class="section">
                    <h2>Team Statistics</h2>
                    <div id="teamStats" class="stat-grid"></div>
                </div>

                <div class="section">
                    <h2>Speed Tiers</h2>
                    <div id="speedTiers" class="speed-tier-list"></div>
                </div>

                <div class="section">
                    <h2>Saved Teams</h2>
                    <div id="savedTeamsList" class="saved-teams-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <h3>Import Team</h3>
            <textarea id="importData" class="modal-textarea" placeholder="Paste team JSON here..."></textarea>
            <div class="modal-actions">
                <button id="confirmImport" class="btn btn-primary">Import</button>
                <button id="cancelImport" class="btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <h3>Export Team</h3>
            <textarea id="exportData" class="modal-textarea" readonly></textarea>
            <div class="modal-actions">
                <button id="copyExport" class="btn btn-primary">Copy to Clipboard</button>
                <button id="closeExport" class="btn">Close</button>
            </div>
        </div>
    </div>

    <script>
        // ===================================================
        // WOWMON DATA
        // ===================================================

        const CREATURES = {
            "murloc": { "id": "murloc", "name": "MURLOC", "type": ["water", "beast"], "baseHp": 45, "baseAttack": 49, "baseDefense": 49, "baseSpeed": 45 },
            "murloc_warrior": { "id": "murloc_warrior", "name": "MURLOC WARRIOR", "type": ["water", "beast"], "baseHp": 60, "baseAttack": 62, "baseDefense": 63, "baseSpeed": 60 },
            "murloc_king": { "id": "murloc_king", "name": "MURLOC KING", "type": ["water", "beast", "magic"], "baseHp": 80, "baseAttack": 82, "baseDefense": 83, "baseSpeed": 80 },
            "wisp": { "id": "wisp", "name": "WISP", "type": ["nature", "spirit"], "baseHp": 40, "baseAttack": 30, "baseDefense": 30, "baseSpeed": 70 },
            "ancient_wisp": { "id": "ancient_wisp", "name": "ANCIENT WISP", "type": ["nature", "spirit"], "baseHp": 65, "baseAttack": 65, "baseDefense": 65, "baseSpeed": 90 },
            "imp": { "id": "imp", "name": "IMP", "type": ["fire", "demon"], "baseHp": 40, "baseAttack": 55, "baseDefense": 35, "baseSpeed": 55 },
            "felguard": { "id": "felguard", "name": "FELGUARD", "type": ["fire", "demon"], "baseHp": 70, "baseAttack": 85, "baseDefense": 65, "baseSpeed": 65 },
            "gnoll": { "id": "gnoll", "name": "GNOLL", "type": ["beast"], "baseHp": 45, "baseAttack": 60, "baseDefense": 45, "baseSpeed": 50 },
            "wolf": { "id": "wolf", "name": "WOLF", "type": ["beast"], "baseHp": 50, "baseAttack": 65, "baseDefense": 50, "baseSpeed": 65 },
            "dire_wolf": { "id": "dire_wolf", "name": "DIRE WOLF", "type": ["beast", "shadow"], "baseHp": 75, "baseAttack": 90, "baseDefense": 70, "baseSpeed": 85 },
            "naga": { "id": "naga", "name": "NAGA", "type": ["water", "magic"], "baseHp": 65, "baseAttack": 75, "baseDefense": 65, "baseSpeed": 75 },
            "elemental": { "id": "elemental", "name": "ELEMENTAL", "type": ["magic"], "baseHp": 60, "baseAttack": 65, "baseDefense": 60, "baseSpeed": 60 },
            "kobold": { "id": "kobold", "name": "KOBOLD", "type": ["earth", "beast"], "baseHp": 35, "baseAttack": 45, "baseDefense": 40, "baseSpeed": 40 },
            "treant": { "id": "treant", "name": "TREANT", "type": ["nature", "earth"], "baseHp": 80, "baseAttack": 80, "baseDefense": 90, "baseSpeed": 30 },
            "skeleton": { "id": "skeleton", "name": "SKELETON", "type": ["shadow", "normal"], "baseHp": 40, "baseAttack": 50, "baseDefense": 40, "baseSpeed": 45 },
            "zombie": { "id": "zombie", "name": "ZOMBIE", "type": ["shadow", "normal"], "baseHp": 60, "baseAttack": 60, "baseDefense": 50, "baseSpeed": 30 },
            "ghoul": { "id": "ghoul", "name": "GHOUL", "type": ["shadow", "beast"], "baseHp": 70, "baseAttack": 85, "baseDefense": 60, "baseSpeed": 70 },
            "whelp": { "id": "whelp", "name": "WHELP", "type": ["fire", "beast"], "baseHp": 45, "baseAttack": 55, "baseDefense": 40, "baseSpeed": 60 },
            "drake": { "id": "drake", "name": "DRAKE", "type": ["fire", "beast"], "baseHp": 65, "baseAttack": 75, "baseDefense": 60, "baseSpeed": 80 },
            "dragon": { "id": "dragon", "name": "DRAGON", "type": ["fire", "magic"], "baseHp": 90, "baseAttack": 95, "baseDefense": 85, "baseSpeed": 90 },
            "phoenix": { "id": "phoenix", "name": "PHOENIX", "type": ["fire", "spirit"], "baseHp": 75, "baseAttack": 80, "baseDefense": 70, "baseSpeed": 95 },
            "frost_elemental": { "id": "frost_elemental", "name": "FROST ELEMENTAL", "type": ["ice", "magic"], "baseHp": 65, "baseAttack": 70, "baseDefense": 75, "baseSpeed": 65 },
            "thunder_lizard": { "id": "thunder_lizard", "name": "THUNDER LIZARD", "type": ["electric", "beast"], "baseHp": 70, "baseAttack": 85, "baseDefense": 65, "baseSpeed": 80 },
            "rock_golem": { "id": "rock_golem", "name": "ROCK GOLEM", "type": ["earth", "normal"], "baseHp": 80, "baseAttack": 75, "baseDefense": 95, "baseSpeed": 40 },
            "nightmare": { "id": "nightmare", "name": "NIGHTMARE", "type": ["shadow", "demon"], "baseHp": 70, "baseAttack": 90, "baseDefense": 65, "baseSpeed": 85 }
        };

        const TYPE_CHART = {
            'water': { 'fire': 2.0, 'earth': 2.0, 'water': 0.5, 'nature': 0.5 },
            'fire': { 'nature': 2.0, 'ice': 2.0, 'water': 0.5, 'fire': 0.5, 'earth': 0.5 },
            'nature': { 'water': 2.0, 'earth': 2.0, 'fire': 0.5, 'beast': 0.5 },
            'earth': { 'fire': 2.0, 'electric': 2.0, 'nature': 0.5, 'water': 0.5 },
            'ice': { 'nature': 2.0, 'beast': 2.0, 'fire': 0.5, 'water': 0.5 },
            'electric': { 'water': 2.0, 'beast': 2.0, 'earth': 0.0, 'electric': 0.5 },
            'beast': { 'normal': 1.5, 'beast': 0.5, 'shadow': 0.5 },
            'shadow': { 'spirit': 2.0, 'magic': 2.0, 'shadow': 0.5, 'normal': 0.5 },
            'magic': { 'shadow': 2.0, 'demon': 2.0, 'magic': 0.5 },
            'demon': { 'spirit': 2.0, 'nature': 1.5, 'demon': 0.5, 'magic': 0.5 },
            'spirit': { 'demon': 2.0, 'shadow': 1.5, 'spirit': 0.5 },
            'normal': { 'earth': 0.5 }
        };

        const ALL_TYPES = ['water', 'fire', 'nature', 'earth', 'ice', 'electric', 'beast', 'shadow', 'magic', 'demon', 'spirit', 'normal'];

        const TYPE_COLORS = {
            'water': '#4A90E2',
            'fire': '#E74C3C',
            'nature': '#27AE60',
            'earth': '#8B7355',
            'ice': '#5DADE2',
            'electric': '#F4D03F',
            'beast': '#A0826D',
            'shadow': '#5F4B8B',
            'magic': '#9B59B6',
            'demon': '#7D3C98',
            'spirit': '#85C1E2',
            'normal': '#A8A8A8'
        };

        // ===================================================
        // TEAM BUILDER CLASS
        // ===================================================

        class TeamBuilder {
            constructor() {
                this.currentTeam = [];
                this.maxTeamSize = 6;
                this.savedTeams = this.loadSavedTeams();
                this.selectedSlot = null;

                this.init();
            }

            init() {
                this.loadCurrentTeam();
                this.setupEventListeners();
                this.renderCreatureList();
                this.renderAll();
            }

            setupEventListeners() {
                document.getElementById('clearTeam').addEventListener('click', () => this.clearTeam());
                document.getElementById('randomTeam').addEventListener('click', () => this.randomTeam());
                document.getElementById('saveTeam').addEventListener('click', () => this.saveTeam());
                document.getElementById('exportTeam').addEventListener('click', () => this.exportTeam());
                document.getElementById('importTeam').addEventListener('click', () => this.showImportModal());

                document.getElementById('confirmImport').addEventListener('click', () => this.confirmImport());
                document.getElementById('cancelImport').addEventListener('click', () => this.hideImportModal());
                document.getElementById('copyExport').addEventListener('click', () => this.copyExport());
                document.getElementById('closeExport').addEventListener('click', () => this.hideExportModal());

                document.getElementById('creatureSearch').addEventListener('input', (e) => {
                    this.filterCreatures(e.target.value);
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === 's') {
                        e.preventDefault();
                        this.saveTeam();
                    }
                });
            }

            addToTeam(creatureId, level = 5) {
                if (this.selectedSlot !== null) {
                    this.currentTeam[this.selectedSlot] = this.createCreature(creatureId, level);
                    this.selectedSlot = null;
                } else if (this.currentTeam.length < this.maxTeamSize) {
                    this.currentTeam.push(this.createCreature(creatureId, level));
                } else {
                    alert('Team is full! Remove a creature first or click on a slot to replace.');
                    return;
                }

                this.saveCurrentTeam();
                this.renderAll();
            }

            createCreature(creatureId, level = 5) {
                const data = CREATURES[creatureId];
                return {
                    id: creatureId,
                    name: data.name,
                    type: [...data.type],
                    level: level,
                    baseHp: data.baseHp,
                    baseAttack: data.baseAttack,
                    baseDefense: data.baseDefense,
                    baseSpeed: data.baseSpeed
                };
            }

            removeFromTeam(index) {
                this.currentTeam.splice(index, 1);
                this.saveCurrentTeam();
                this.renderAll();
            }

            clearTeam() {
                if (this.currentTeam.length > 0 && confirm('Clear your entire team?')) {
                    this.currentTeam = [];
                    this.saveCurrentTeam();
                    this.renderAll();
                }
            }

            randomTeam() {
                const ids = Object.keys(CREATURES);
                this.currentTeam = [];
                for (let i = 0; i < 6; i++) {
                    const randomId = ids[Math.floor(Math.random() * ids.length)];
                    const randomLevel = 5 + Math.floor(Math.random() * 45);
                    this.currentTeam.push(this.createCreature(randomId, randomLevel));
                }
                this.saveCurrentTeam();
                this.renderAll();
            }

            getTypeEffectiveness(attackType, defenderTypes) {
                let mult = 1.0;
                defenderTypes.forEach(defType => {
                    if (TYPE_CHART[attackType] && TYPE_CHART[attackType][defType] !== undefined) {
                        mult *= TYPE_CHART[attackType][defType];
                    }
                });
                return mult;
            }

            calculateTypeCoverage() {
                const coverage = {};
                ALL_TYPES.forEach(type => {
                    coverage[type] = { max: 0, count: 0 };
                });

                this.currentTeam.forEach(creature => {
                    creature.type.forEach(attackType => {
                        ALL_TYPES.forEach(defType => {
                            const mult = this.getTypeEffectiveness(attackType, [defType]);
                            if (mult > coverage[defType].max) {
                                coverage[defType].max = mult;
                            }
                            if (mult > 1.0) coverage[defType].count++;
                        });
                    });
                });

                return coverage;
            }

            analyzeDefenses() {
                const weaknesses = {};
                const resistances = {};
                const immunities = {};

                this.currentTeam.forEach(creature => {
                    ALL_TYPES.forEach(attackType => {
                        const mult = this.getTypeEffectiveness(attackType, creature.type);
                        if (mult >= 2.0) {
                            weaknesses[attackType] = (weaknesses[attackType] || 0) + mult;
                        } else if (mult === 0) {
                            immunities[attackType] = (immunities[attackType] || 0) + 1;
                        } else if (mult < 1.0) {
                            resistances[attackType] = (resistances[attackType] || 0) + (1 - mult);
                        }
                    });
                });

                return { weaknesses, resistances, immunities };
            }

            renderAll() {
                this.renderTeamSlots();
                this.renderTeamStats();
                this.renderTypeCoverage();
                this.renderDefensiveAnalysis();
                this.renderSpeedTiers();
                this.renderSavedTeams();
            }

            renderTeamSlots() {
                const container = document.getElementById('teamSlots');
                container.innerHTML = '';

                for (let i = 0; i < this.maxTeamSize; i++) {
                    const slot = document.createElement('div');
                    slot.className = 'team-slot';

                    const slotNum = document.createElement('div');
                    slotNum.className = 'team-slot-number';
                    slotNum.textContent = `#${i + 1}`;
                    slot.appendChild(slotNum);

                    if (i < this.currentTeam.length && this.currentTeam[i]) {
                        const creature = this.currentTeam[i];
                        slot.classList.add('filled');

                        const removeBtn = document.createElement('button');
                        removeBtn.className = 'team-slot-remove';
                        removeBtn.textContent = '×';
                        removeBtn.onclick = (e) => {
                            e.stopPropagation();
                            this.removeFromTeam(i);
                        };
                        slot.appendChild(removeBtn);

                        const name = document.createElement('div');
                        name.className = 'creature-name';
                        name.textContent = creature.name;
                        slot.appendChild(name);

                        const types = document.createElement('div');
                        types.className = 'creature-types';
                        creature.type.forEach(type => {
                            const badge = document.createElement('span');
                            badge.className = 'type-badge';
                            badge.textContent = type;
                            badge.style.backgroundColor = TYPE_COLORS[type];
                            types.appendChild(badge);
                        });
                        slot.appendChild(types);

                        const stats = document.createElement('div');
                        stats.className = 'creature-stats';
                        const bst = creature.baseHp + creature.baseAttack + creature.baseDefense + creature.baseSpeed;
                        stats.textContent = `BST: ${bst} | SPD: ${creature.baseSpeed}`;
                        slot.appendChild(stats);

                        const levelDiv = document.createElement('div');
                        levelDiv.className = 'creature-level';
                        levelDiv.innerHTML = `
                            <label style="font-size: 10px;">Level:</label>
                            <input type="number" class="level-input" min="1" max="100" value="${creature.level}">
                        `;
                        const levelInput = levelDiv.querySelector('input');
                        levelInput.addEventListener('change', (e) => {
                            e.stopPropagation();
                            creature.level = parseInt(e.target.value) || 5;
                            this.saveCurrentTeam();
                        });
                        levelInput.addEventListener('click', (e) => e.stopPropagation());
                        slot.appendChild(levelDiv);

                        slot.onclick = () => {
                            this.selectedSlot = i;
                            document.querySelectorAll('.team-slot').forEach(s => s.style.outline = 'none');
                            slot.style.outline = '3px solid #8bac0f';
                        };
                    } else {
                        slot.classList.add('empty');
                        slot.innerHTML += '<div style="font-size: 32px; color: #666;">+</div>';
                        slot.onclick = () => {
                            this.selectedSlot = i;
                            document.querySelectorAll('.team-slot').forEach(s => s.style.outline = 'none');
                            slot.style.outline = '3px solid #8bac0f';
                        };
                    }

                    container.appendChild(slot);
                }

                document.getElementById('teamSize').textContent = this.currentTeam.length;
            }

            renderTeamStats() {
                const container = document.getElementById('teamStats');

                if (this.currentTeam.length === 0) {
                    container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: #666; padding: 20px;">Add creatures to see team stats</div>';
                    return;
                }

                let totalBST = 0, totalHP = 0, totalAtk = 0, totalDef = 0, totalSpd = 0, totalLvl = 0;
                const typeCount = {};

                this.currentTeam.forEach(c => {
                    const bst = c.baseHp + c.baseAttack + c.baseDefense + c.baseSpeed;
                    totalBST += bst;
                    totalHP += c.baseHp;
                    totalAtk += c.baseAttack;
                    totalDef += c.baseDefense;
                    totalSpd += c.baseSpeed;
                    totalLvl += c.level;
                    c.type.forEach(t => typeCount[t] = (typeCount[t] || 0) + 1);
                });

                const count = this.currentTeam.length;
                container.innerHTML = `
                    <div class="stat-box">
                        <div class="stat-label">Avg Level</div>
                        <div class="stat-value">${Math.round(totalLvl / count)}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Avg BST</div>
                        <div class="stat-value">${Math.round(totalBST / count)}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Avg HP</div>
                        <div class="stat-value">${Math.round(totalHP / count)}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Avg Attack</div>
                        <div class="stat-value">${Math.round(totalAtk / count)}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Avg Defense</div>
                        <div class="stat-value">${Math.round(totalDef / count)}</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Avg Speed</div>
                        <div class="stat-value">${Math.round(totalSpd / count)}</div>
                    </div>
                    <div class="stat-box" style="grid-column: 1/-1;">
                        <div class="stat-label">Type Diversity</div>
                        <div class="stat-value">${Object.keys(typeCount).length} / ${ALL_TYPES.length}</div>
                    </div>
                `;
            }

            renderTypeCoverage() {
                const container = document.getElementById('offensiveCoverage');

                if (this.currentTeam.length === 0) {
                    container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: #666; padding: 20px;">Add creatures to see coverage</div>';
                    return;
                }

                const coverage = this.calculateTypeCoverage();
                container.innerHTML = '';

                ALL_TYPES.forEach(type => {
                    const item = document.createElement('div');
                    item.className = 'coverage-item';

                    const mult = coverage[type].max;
                    if (mult >= 2.0) item.classList.add('super-effective');
                    else if (mult > 1.0) item.classList.add('effective');
                    else if (mult === 0) item.classList.add('immune');
                    else if (mult < 1.0) item.classList.add('not-effective');

                    item.innerHTML = `
                        <div class="coverage-type" style="color: ${TYPE_COLORS[type]}">${type}</div>
                        <div class="coverage-multiplier">${mult === 0 ? 'IMMUNE' : '×' + mult.toFixed(1)}</div>
                    `;

                    container.appendChild(item);
                });
            }

            renderDefensiveAnalysis() {
                const container = document.getElementById('defensiveAnalysis');

                if (this.currentTeam.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">Add creatures to see weaknesses</div>';
                    return;
                }

                const { weaknesses, resistances, immunities } = this.analyzeDefenses();
                let html = '';

                if (Object.keys(weaknesses).length > 0) {
                    html += '<div class="defense-group"><div class="defense-title weakness">Weaknesses:</div><div class="defense-badges">';
                    Object.entries(weaknesses).sort((a, b) => b[1] - a[1]).forEach(([type, val]) => {
                        const is4x = val >= 4;
                        html += `<span class="defense-badge ${is4x ? 'weakness-4x' : ''}" style="background: ${TYPE_COLORS[type]}">${type} ${is4x ? '(4×!)' : '(2×)'}</span>`;
                    });
                    html += '</div></div>';
                }

                if (Object.keys(resistances).length > 0) {
                    html += '<div class="defense-group"><div class="defense-title resistance">Resistances:</div><div class="defense-badges">';
                    Object.keys(resistances).forEach(type => {
                        html += `<span class="defense-badge" style="background: ${TYPE_COLORS[type]}">${type}</span>`;
                    });
                    html += '</div></div>';
                }

                if (Object.keys(immunities).length > 0) {
                    html += '<div class="defense-group"><div class="defense-title immunity">Immunities:</div><div class="defense-badges">';
                    Object.entries(immunities).forEach(([type, count]) => {
                        html += `<span class="defense-badge" style="background: ${TYPE_COLORS[type]}">${type} (×${count})</span>`;
                    });
                    html += '</div></div>';
                }

                container.innerHTML = html || '<div style="text-align: center; color: #27ae60;">Perfectly balanced typing!</div>';
            }

            renderSpeedTiers() {
                const container = document.getElementById('speedTiers');

                if (this.currentTeam.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No speed data</div>';
                    return;
                }

                const sorted = [...this.currentTeam].sort((a, b) => b.baseSpeed - a.baseSpeed);
                container.innerHTML = '';

                sorted.forEach((creature, i) => {
                    const tier = document.createElement('div');
                    tier.className = 'speed-tier';
                    tier.innerHTML = `
                        <div class="speed-tier-rank">#${i + 1}</div>
                        <div class="speed-tier-name">${creature.name}</div>
                        <div class="speed-tier-value">${creature.baseSpeed}</div>
                    `;
                    container.appendChild(tier);
                });
            }

            renderSavedTeams() {
                const container = document.getElementById('savedTeamsList');

                if (this.savedTeams.length === 0) {
                    container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">No saved teams</div>';
                    return;
                }

                container.innerHTML = '';
                this.savedTeams.forEach((team, index) => {
                    const card = document.createElement('div');
                    card.className = 'saved-team-card';

                    const date = new Date(team.date);
                    card.innerHTML = `
                        <div class="saved-team-header">
                            <div class="saved-team-name">${team.name}</div>
                            <div class="saved-team-date">${date.toLocaleDateString()}</div>
                        </div>
                        <div class="saved-team-members">${team.team.map(c => c.name).join(', ')}</div>
                        <div class="saved-team-actions">
                            <button class="saved-team-btn load-btn">Load</button>
                            <button class="saved-team-btn delete-btn">Delete</button>
                        </div>
                    `;

                    card.querySelector('.load-btn').onclick = () => this.loadTeam(index);
                    card.querySelector('.delete-btn').onclick = (e) => {
                        e.stopPropagation();
                        this.deleteTeam(index);
                    };

                    container.appendChild(card);
                });
            }

            renderCreatureList() {
                this.filterCreatures('');
            }

            filterCreatures(query) {
                const container = document.getElementById('creatureList');
                container.innerHTML = '';

                const filtered = Object.values(CREATURES).filter(c =>
                    c.name.toLowerCase().includes(query.toLowerCase())
                );

                filtered.forEach(creature => {
                    const item = document.createElement('div');
                    item.className = 'creature-item';
                    item.innerHTML = `
                        <div class="creature-item-name">${creature.name}</div>
                        <div class="creature-types">
                            ${creature.type.map(t => `<span class="type-badge" style="background: ${TYPE_COLORS[t]}">${t}</span>`).join('')}
                        </div>
                    `;
                    item.onclick = () => this.addToTeam(creature.id);
                    container.appendChild(item);
                });
            }

            saveTeam() {
                if (this.currentTeam.length === 0) {
                    alert('Cannot save an empty team!');
                    return;
                }

                const name = prompt('Enter team name:', 'My Team');
                if (!name) return;

                this.savedTeams.push({
                    name,
                    team: JSON.parse(JSON.stringify(this.currentTeam)),
                    date: new Date().toISOString()
                });

                this.saveSavedTeams();
                this.renderSavedTeams();
                alert('Team saved!');
            }

            loadTeam(index) {
                this.currentTeam = JSON.parse(JSON.stringify(this.savedTeams[index].team));
                this.saveCurrentTeam();
                this.renderAll();
            }

            deleteTeam(index) {
                if (confirm('Delete this team?')) {
                    this.savedTeams.splice(index, 1);
                    this.saveSavedTeams();
                    this.renderSavedTeams();
                }
            }

            exportTeam() {
                if (this.currentTeam.length === 0) {
                    alert('No team to export!');
                    return;
                }

                const data = {
                    version: '1.0',
                    team: this.currentTeam,
                    exported: new Date().toISOString()
                };

                document.getElementById('exportData').value = JSON.stringify(data, null, 2);
                this.showExportModal();
            }

            showImportModal() {
                document.getElementById('importModal').classList.add('active');
                document.getElementById('importData').value = '';
            }

            hideImportModal() {
                document.getElementById('importModal').classList.remove('active');
            }

            showExportModal() {
                document.getElementById('exportModal').classList.add('active');
            }

            hideExportModal() {
                document.getElementById('exportModal').classList.remove('active');
            }

            confirmImport() {
                try {
                    const data = JSON.parse(document.getElementById('importData').value);
                    if (data.team && Array.isArray(data.team)) {
                        this.currentTeam = data.team;
                        this.saveCurrentTeam();
                        this.renderAll();
                        this.hideImportModal();
                        alert('Team imported successfully!');
                    } else {
                        alert('Invalid team format!');
                    }
                } catch (e) {
                    alert('Failed to parse JSON: ' + e.message);
                }
            }

            copyExport() {
                const textarea = document.getElementById('exportData');
                textarea.select();
                navigator.clipboard.writeText(textarea.value).then(() => {
                    alert('Copied to clipboard!');
                }).catch(() => {
                    alert('Failed to copy. Please copy manually.');
                });
            }

            saveCurrentTeam() {
                localStorage.setItem('wowmon_current_team', JSON.stringify(this.currentTeam));
            }

            loadCurrentTeam() {
                try {
                    const saved = localStorage.getItem('wowmon_current_team');
                    if (saved) {
                        this.currentTeam = JSON.parse(saved);
                    }
                } catch (e) {
                    console.error('Failed to load team:', e);
                }
            }

            saveSavedTeams() {
                localStorage.setItem('wowmon_saved_teams', JSON.stringify(this.savedTeams));
            }

            loadSavedTeams() {
                try {
                    const saved = localStorage.getItem('wowmon_saved_teams');
                    return saved ? JSON.parse(saved) : [];
                } catch (e) {
                    console.error('Failed to load saved teams:', e);
                    return [];
                }
            }
        }

        // Initialize
        const teamBuilder = new TeamBuilder();
    </script>
</body>
</html>