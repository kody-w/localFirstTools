<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Acceleration Workshop Guide</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #0066cc, #004499);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .stage-navigation {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stage-btn {
            padding: 10px 20px;
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .stage-btn:hover {
            background: #0052a3;
            transform: translateY(-1px);
        }
        
        .stage-btn.active {
            background: #28a745;
        }
        
        .stage-btn.completed {
            background: #6c757d;
        }
        
        .content-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-section, .natural-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .form-section h2, .natural-section h2 {
            color: #0066cc;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #555;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #0066cc;
        }
        
        .pain-point-item,
        .story-item,
        .score-item,
        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        
        .add-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }
        
        .add-btn:hover {
            background: #218838;
        }
        
        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 14px;
            float: right;
        }
        
        .natural-language-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
            white-space: pre-wrap;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.8;
        }
        
        .control-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .export-json {
            background: #17a2b8;
            color: white;
        }
        
        .import-json {
            background: #ffc107;
            color: #333;
        }
        
        .copy-natural {
            background: #6c757d;
            color: white;
        }
        
        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .hidden {
            display: none;
        }
        
        .stage-content {
            display: none;
        }
        
        .stage-content.active {
            display: block;
        }
        
        .json-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .json-modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 30px;
            cursor: pointer;
            color: #999;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        .json-textarea {
            width: 100%;
            height: 400px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
        
        .metric-item {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            display: none;
        }
        
        @media (max-width: 768px) {
            .content-area {
                grid-template-columns: 1fr;
            }
            
            .stage-navigation {
                justify-content: center;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AI Acceleration Workshop Guide</h1>
            <p>Interactive workshop facilitation tool with structured forms and natural language generation</p>
        </div>
        
        <div class="stage-navigation">
            <button class="stage-btn active" onclick="showStage('init')">Initialize</button>
            <button class="stage-btn" onclick="showStage('stage1')">Stage 1: Pain Discovery</button>
            <button class="stage-btn" onclick="showStage('stage2')">Stage 2: Story Generation</button>
            <button class="stage-btn" onclick="showStage('stage3')">Stage 3: Story Refinement</button>
            <button class="stage-btn" onclick="showStage('stage4')">Stage 4: Prioritization</button>
            <button class="stage-btn" onclick="showStage('stage5')">Stage 5: Current State</button>
            <button class="stage-btn" onclick="showStage('stage6')">Stage 6: Future State</button>
            <button class="stage-btn" onclick="showStage('stage7')">Stage 7: MVP Features</button>
            <button class="stage-btn" onclick="showStage('stage8')">Stage 8: Success Metrics</button>
            <button class="stage-btn" onclick="showStage('deliverables')">Generate Deliverables</button>
        </div>
        
        <!-- Initialize Workshop -->
        <div id="init" class="stage-content active">
            <div class="content-area">
                <div class="form-section">
                    <h2>Workshop Initialization</h2>
                    <div class="form-group">
                        <label for="participants">Number of Participants:</label>
                        <input type="number" id="participants" value="6" min="1" max="50">
                    </div>
                    <div class="form-group">
                        <label for="workshop_id">Workshop ID (auto-generated):</label>
                        <input type="text" id="workshop_id" readonly>
                    </div>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="init-natural">Start a new AI acceleration workshop with 6 participants</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn export-json" onclick="exportJSON('init')">Export JSON</button>
                <button class="control-btn import-json" onclick="showImportModal('init')">Import JSON</button>
                <button class="control-btn copy-natural" onclick="copyNatural('init-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Stage 1: Pain Discovery -->
        <div id="stage1" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>Pain Point Discovery</h2>
                    <div id="pain-points-container">
                        <!-- Pain points will be added here dynamically -->
                    </div>
                    <button class="add-btn" onclick="addPainPoint()">Add Pain Point</button>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="stage1-natural">Here are the pain points from our participants:

Sarah from Customer Service: "We spend 8 hours a week manually sorting customer emails into different categories. It's really tedious work."

Mike from Sales: "After every client meeting, I spend 5-6 hours per week typing up all my notes and updating the CRM. I often forget important details."

Jennifer from Finance: "Creating our weekly reports takes me a full day - I have to pull data from 4 different systems and format everything manually."

Tom from Customer Service: "Same as Sarah, plus we waste time searching for the right response templates. Probably 10 hours weekly on email management total."

Lisa from HR: "Processing employee requests is all manual - benefits questions, time-off requests. Takes about 6 hours weekly just to route them to the right person."

David from Sales: "Finding the right product information during customer calls is painful. I'm searching through multiple databases which sometimes costs me deals. Maybe 4 hours a week."</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn export-json" onclick="exportJSON('stage1')">Export JSON</button>
                <button class="control-btn import-json" onclick="showImportModal('stage1')">Import JSON</button>
                <button class="control-btn copy-natural" onclick="copyNatural('stage1-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Stage 2: Story Generation -->
        <div id="stage2" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>Story Generation</h2>
                    <p>This stage automatically generates stories based on the pain points from Stage 1.</p>
                    <p>Click "Generate Stories" in the assistant to proceed.</p>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="stage2-natural">Generate user stories based on these pain points</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn copy-natural" onclick="copyNatural('stage2-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Stage 3: Story Refinement -->
        <div id="stage3" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>Story Refinement</h2>
                    <div id="stories-container">
                        <!-- Stories will be added here dynamically -->
                    </div>
                    <button class="add-btn" onclick="addStory()">Add Story</button>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="stage3-natural">Our groups refined the stories:

Group 1 came up with: "As a customer service agent, I want an AI assistant that reads incoming emails, categorizes them into our 8 service types, assigns priority based on keywords and sentiment, and routes them to the right queue, so that I can reduce first response time from 4 hours to 1 hour and handle 50% more inquiries daily."

They want these acceptance criteria:
- Categorizes emails with 90% accuracy
- Assigns high/medium/low priority automatically
- Routes to correct team queue
- Integrates with our Outlook system
- Allows manual override when needed

Group 2 refined to: "As a sales representative, I want a voice-enabled CRM assistant that captures meeting notes through voice commands, automatically identifies action items, updates opportunity stages, and schedules follow-ups, so that I can save 6 hours weekly and never miss a follow-up task."

Their criteria:
- Voice capture with 95% accuracy
- Auto-creates CRM records
- Identifies and tracks action items
- Syncs with calendar for follow-ups
- Works on mobile devices

Group 3: "As a business analyst, I want an AI-powered reporting tool that automatically pulls data from Salesforce, SAP, and Excel files, applies our standard calculations, and generates formatted reports, so that I can deliver insights 80% faster and focus on strategic analysis."

Criteria:
- Connects to all 3 data sources
- Applies standard formulas automatically
- Generates reports in our template
- Exports to PDF and PowerPoint
- Runs on schedule or on-demand</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn export-json" onclick="exportJSON('stage3')">Export JSON</button>
                <button class="control-btn import-json" onclick="showImportModal('stage3')">Import JSON</button>
                <button class="control-btn copy-natural" onclick="copyNatural('stage3-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Stage 4: Prioritization -->
        <div id="stage4" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>Story Prioritization</h2>
                    <div id="scores-container">
                        <!-- Scores will be added here dynamically -->
                    </div>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="stage4-natural">Let's score each story.

For the email categorization story:
- Business impact: 5 out of 5 (huge time savings across large team)
- Feasibility: 4 out of 5 (technology exists, just needs integration)
- User volume: 5 out of 5 (affects all 50 customer service agents)
- Quick win: 4 out of 5 (can show results in 2-3 weeks)

For the voice CRM story:
- Business impact: 4
- Feasibility: 3 (voice tech is trickier)
- User volume: 4 (30 sales reps)
- Quick win: 3

For the reporting tool:
- Business impact: 4
- Feasibility: 3 (multiple system integration)
- User volume: 3 (10 analysts)
- Quick win: 3</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn export-json" onclick="exportJSON('stage4')">Export JSON</button>
                <button class="control-btn import-json" onclick="showImportModal('stage4')">Import JSON</button>
                <button class="control-btn copy-natural" onclick="copyNatural('stage4-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Stage 5: Current State -->
        <div id="stage5" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>Current State Analysis</h2>
                    <div class="form-group">
                        <label for="trigger">Process Trigger:</label>
                        <textarea id="trigger" rows="2">Sales rep completes a client meeting</textarea>
                    </div>
                    <div class="form-group">
                        <label>Systems Involved:</label>
                        <div id="systems-container">
                            <input type="text" class="system-input" value="Salesforce CRM">
                            <input type="text" class="system-input" value="Outlook Calendar">
                            <input type="text" class="system-input" value="OneNote">
                            <input type="text" class="system-input" value="Mobile devices">
                        </div>
                        <button class="add-btn" onclick="addSystem()">Add System</button>
                    </div>
                    <div class="form-group">
                        <label>Manual Steps:</label>
                        <div id="steps-container">
                            <!-- Steps will be added here -->
                        </div>
                        <button class="add-btn" onclick="addStep()">Add Step</button>
                    </div>
                    <div class="form-group">
                        <label>Pain Points:</label>
                        <div id="pain-points-current-container">
                            <!-- Pain points will be added here -->
                        </div>
                        <button class="add-btn" onclick="addCurrentPainPoint()">Add Pain Point</button>
                    </div>
                    <div class="form-group">
                        <label for="time_per_instance">Time per Instance:</label>
                        <input type="text" id="time_per_instance" value="20-30 minutes per meeting">
                    </div>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="stage5-natural">For our voice CRM priority story, here's how the process works today:

It starts when a sales rep completes a client meeting.

The systems involved are Salesforce CRM, Outlook Calendar, OneNote, and mobile devices.

The manual steps are:
1. Take handwritten notes during meeting
2. Type notes into OneNote or Word
3. Open Salesforce and find the account
4. Copy/paste notes into opportunity
5. Update opportunity stage manually
6. Create follow-up tasks
7. Schedule next meeting in calendar

Main pain points:
- Notes incomplete - forget details after meeting
- 20% of meetings have no CRM updates
- Follow-up tasks often missed
- Takes 20-30 minutes per meeting

Each meeting update takes about 20-30 minutes to process.</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn export-json" onclick="exportJSON('stage5')">Export JSON</button>
                <button class="control-btn import-json" onclick="showImportModal('stage5')">Import JSON</button>
                <button class="control-btn copy-natural" onclick="copyNatural('stage5-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Stage 6: Future State -->
        <div id="stage6" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>Future State Design</h2>
                    <p>This stage automatically designs the future state based on the current state analysis.</p>
                    <p>The AI agent will create the transformation plan.</p>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="stage6-natural">Design the AI-enabled future state for the voice CRM process</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn copy-natural" onclick="copyNatural('stage6-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Stage 7: MVP Features -->
        <div id="stage7" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>MVP Feature Prioritization</h2>
                    <div class="form-group">
                        <label>Must Have (Weeks 1-4):</label>
                        <div id="must-have-container">
                            <!-- Features will be added here -->
                        </div>
                        <button class="add-btn" onclick="addFeature('must')">Add Must Have</button>
                    </div>
                    <div class="form-group">
                        <label>Should Have (Weeks 5-6):</label>
                        <div id="should-have-container">
                            <!-- Features will be added here -->
                        </div>
                        <button class="add-btn" onclick="addFeature('should')">Add Should Have</button>
                    </div>
                    <div class="form-group">
                        <label>Could Have (Weeks 7-8):</label>
                        <div id="could-have-container">
                            <!-- Features will be added here -->
                        </div>
                        <button class="add-btn" onclick="addFeature('could')">Add Could Have</button>
                    </div>
                    <div class="form-group">
                        <label>Won't Have (Future):</label>
                        <div id="wont-have-container">
                            <!-- Features will be added here -->
                        </div>
                        <button class="add-btn" onclick="addFeature('wont')">Add Won't Have</button>
                    </div>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="stage7-natural">Here's our feature prioritization for the 8-week MVP:

Must have features:
- Voice capture engine with speech-to-text
- CRM field mapping for voice input
- Meeting notes transcription
- Basic Salesforce integration
- Action item extraction from voice
- Manual edit capability before saving

Should have features:
- Sentiment analysis for customer mood
- Auto-suggested next steps
- Offline voice capture with sync
- Meeting summary generation

Could have features:
- Multi-language support
- Integration with calendar for follow-ups
- Mobile app for field reps
- Advanced analytics dashboard

Won't have in MVP:
- Real-time conversation coaching
- Automatic opportunity scoring
- Video call transcription
- Custom voice commands</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn export-json" onclick="exportJSON('stage7')">Export JSON</button>
                <button class="control-btn import-json" onclick="showImportModal('stage7')">Import JSON</button>
                <button class="control-btn copy-natural" onclick="copyNatural('stage7-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Stage 8: Success Metrics -->
        <div id="stage8" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>Success Metrics Definition</h2>
                    <h3>Current Metrics</h3>
                    <div id="current-metrics-container">
                        <!-- Current metrics will be added here -->
                    </div>
                    <button class="add-btn" onclick="addMetric('current')">Add Current Metric</button>
                    
                    <h3 style="margin-top: 30px;">Target Metrics (8 weeks)</h3>
                    <div id="target-metrics-container">
                        <!-- Target metrics will be added here -->
                    </div>
                    <button class="add-btn" onclick="addMetric('target')">Add Target Metric</button>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="stage8-natural">Our current metrics are:
- Average CRM update time per meeting: 20 minutes
- Meeting notes capture accuracy: 60% (reps forget details)
- CRM data completeness: 70% (fields often left blank)
- Follow-up task completion rate: 65%
- Sales rep satisfaction with CRM: 2.8 out of 5
- Opportunities with complete activity history: 55%
- Time from meeting to CRM update: 2-3 days average

Our target metrics after 8 weeks:
- Average CRM update time per meeting: 3 minutes
- Meeting notes capture accuracy: 95% (voice captures everything)
- CRM data completeness: 90%
- Follow-up task completion rate: 95%
- Sales rep satisfaction with CRM: 4.5 out of 5
- Opportunities with complete activity history: 90%
- Time from meeting to CRM update: Real-time (immediate)</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn export-json" onclick="exportJSON('stage8')">Export JSON</button>
                <button class="control-btn import-json" onclick="showImportModal('stage8')">Import JSON</button>
                <button class="control-btn copy-natural" onclick="copyNatural('stage8-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Generate Deliverables -->
        <div id="deliverables" class="stage-content">
            <div class="content-area">
                <div class="form-section">
                    <h2>Generate Final Deliverables</h2>
                    <p>This will generate all workshop documentation including:</p>
                    <ul>
                        <li>Executive Summary</li>
                        <li>User Story Specifications</li>
                        <li>Technical Architecture</li>
                        <li>8-Week Implementation Roadmap</li>
                        <li>Success Metrics Framework</li>
                    </ul>
                </div>
                
                <div class="natural-section">
                    <h2>Natural Language Command</h2>
                    <div class="natural-language-box" id="deliverables-natural">Generate all workshop deliverables for partner handoff</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="control-btn copy-natural" onclick="copyNatural('deliverables-natural')">Copy Natural Language</button>
            </div>
        </div>
        
        <!-- Success Message -->
        <div class="success-message" id="success-message">
            Action completed successfully!
        </div>
    </div>
    
    <!-- JSON Import/Export Modal -->
    <div class="json-modal" id="json-modal">
        <div class="json-modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2 id="modal-title">JSON Data</h2>
            <textarea class="json-textarea" id="json-textarea"></textarea>
            <div class="control-buttons">
                <button class="control-btn export-json" onclick="copyJSON()">Copy JSON</button>
                <button class="control-btn import-json" id="import-btn" onclick="importJSONData()">Import Data</button>
            </div>
        </div>
    </div>
    
    <script>
        // Initialize workshop ID
        document.getElementById('workshop_id').value = 'WS_' + new Date().toISOString().replace(/[^\d]/g, '').slice(0, 14);
        
        // Stage management
        function showStage(stageId) {
            // Hide all stages
            document.querySelectorAll('.stage-content').forEach(stage => {
                stage.classList.remove('active');
            });
            
            // Show selected stage
            document.getElementById(stageId).classList.add('active');
            
            // Update navigation buttons
            document.querySelectorAll('.stage-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Initialize stage data if needed
            if (stageId === 'stage1' && document.getElementById('pain-points-container').children.length === 0) {
                initializePainPoints();
            } else if (stageId === 'stage3' && document.getElementById('stories-container').children.length === 0) {
                initializeStories();
            } else if (stageId === 'stage4' && document.getElementById('scores-container').children.length === 0) {
                initializeScores();
            } else if (stageId === 'stage5') {
                initializeCurrentState();
            } else if (stageId === 'stage7') {
                initializeMVPFeatures();
            } else if (stageId === 'stage8' && document.getElementById('current-metrics-container').children.length === 0) {
                initializeMetrics();
            }
        }
        
        // Initialize pain points
        function initializePainPoints() {
            const painPoints = [
                { role: 'Customer Service', description: 'We spend about 8 hours a week manually sorting customer emails into different categories. It\'s really tedious work.', time: '8 hours/week' },
                { role: 'Sales', description: 'After every client meeting, I spend 5-6 hours per week typing up all my notes and updating the CRM. I often forget important details.', time: '5-6 hours/week' },
                { role: 'Finance', description: 'Creating our weekly reports takes me a full day - I have to pull data from 4 different systems and format everything manually.', time: '8 hours/week' },
                { role: 'Customer Service', description: 'Same as Sarah, plus we waste time searching for the right response templates. Probably 10 hours weekly on email management total.', time: '10 hours/week' },
                { role: 'HR', description: 'Processing employee requests is all manual - benefits questions, time-off requests. Takes about 6 hours weekly just to route them to the right person.', time: '6 hours/week' },
                { role: 'Sales', description: 'Finding the right product information during customer calls is painful. I\'m searching through multiple databases which sometimes costs me deals.', time: '4 hours/week' }
            ];
            
            painPoints.forEach(pp => addPainPoint(pp));
        }
        
        // Add pain point
        function addPainPoint(data = {}) {
            const container = document.getElementById('pain-points-container');
            const item = document.createElement('div');
            item.className = 'pain-point-item';
            item.innerHTML = `
                <button class="remove-btn" onclick="this.parentElement.remove()">Remove</button>
                <div class="form-group">
                    <label>Role/Department:</label>
                    <input type="text" class="pain-role" value="${data.role || ''}" placeholder="e.g., Customer Service">
                </div>
                <div class="form-group">
                    <label>Pain Description:</label>
                    <textarea class="pain-description" rows="3" placeholder="Describe the repetitive task or pain point">${data.description || ''}</textarea>
                </div>
                <div class="form-group">
                    <label>Time Impact:</label>
                    <input type="text" class="pain-time" value="${data.time || ''}" placeholder="e.g., 8 hours/week">
                </div>
            `;
            container.appendChild(item);
        }
        
        // Initialize stories
        function initializeStories() {
            const stories = [
                {
                    story: 'As a customer service agent, I want an AI assistant that reads incoming emails, categorizes them into our 8 service types, assigns priority based on keywords and sentiment, and routes them to the right queue, so that I can reduce first response time from 4 hours to 1 hour and handle 50% more inquiries daily.',
                    criteria: [
                        'Categorizes emails with 90% accuracy',
                        'Assigns high/medium/low priority automatically',
                        'Routes to correct team queue',
                        'Integrates with our Outlook system',
                        'Allows manual override when needed'
                    ]
                },
                {
                    story: 'As a sales representative, I want a voice-enabled CRM assistant that captures meeting notes through voice commands, automatically identifies action items, updates opportunity stages, and schedules follow-ups, so that I can save 6 hours weekly and never miss a follow-up task.',
                    criteria: [
                        'Voice capture with 95% accuracy',
                        'Auto-creates CRM records',
                        'Identifies and tracks action items',
                        'Syncs with calendar for follow-ups',
                        'Works on mobile devices'
                    ]
                },
                {
                    story: 'As a business analyst, I want an AI-powered reporting tool that automatically pulls data from Salesforce, SAP, and Excel files, applies our standard calculations, and generates formatted reports, so that I can deliver insights 80% faster and focus on strategic analysis.',
                    criteria: [
                        'Connects to all 3 data sources',
                        'Applies standard formulas automatically',
                        'Generates reports in our template',
                        'Exports to PDF and PowerPoint',
                        'Runs on schedule or on-demand'
                    ]
                }
            ];
            
            stories.forEach(s => addStory(s));
        }
        
        // Add story
        function addStory(data = {}) {
            const container = document.getElementById('stories-container');
            const item = document.createElement('div');
            item.className = 'story-item';
            const criteriaHtml = (data.criteria || ['']).map(c => 
                `<input type="text" class="criteria-input" value="${c}" placeholder="Acceptance criterion">`
            ).join('');
            
            item.innerHTML = `
                <button class="remove-btn" onclick="this.parentElement.remove()">Remove</button>
                <div class="form-group">
                    <label>User Story:</label>
                    <textarea class="story-text" rows="4" placeholder="As a... I want... So that...">${data.story || ''}</textarea>
                </div>
                <div class="form-group">
                    <label>Acceptance Criteria:</label>
                    <div class="criteria-container">
                        ${criteriaHtml}
                    </div>
                    <button class="add-btn" onclick="addCriterion(this)">Add Criterion</button>
                </div>
            `;
            container.appendChild(item);
        }
        
        // Add criterion
        function addCriterion(button) {
            const container = button.previousElementSibling;
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'criteria-input';
            input.placeholder = 'Acceptance criterion';
            container.appendChild(input);
        }
        
        // Initialize scores
        function initializeScores() {
            const scores = [
                { storyIndex: 0, businessImpact: 5, feasibility: 4, userVolume: 5, quickWin: 4 },
                { storyIndex: 1, businessImpact: 4, feasibility: 3, userVolume: 4, quickWin: 3 },
                { storyIndex: 2, businessImpact: 4, feasibility: 3, userVolume: 3, quickWin: 3 }
            ];
            
            const storyNames = ['Email Categorization', 'Voice CRM', 'Reporting Tool'];
            
            scores.forEach((s, idx) => addScore(s, storyNames[idx]));
        }
        
        // Add score
        function addScore(data = {}, storyName = '') {
            const container = document.getElementById('scores-container');
            const item = document.createElement('div');
            item.className = 'score-item';
            item.innerHTML = `
                <h3>Story ${(data.storyIndex || 0) + 1}: ${storyName}</h3>
                <div class="form-group">
                    <label>Business Impact (1-5):</label>
                    <input type="number" class="business-impact" min="1" max="5" value="${data.businessImpact || 3}">
                </div>
                <div class="form-group">
                    <label>Feasibility (1-5):</label>
                    <input type="number" class="feasibility" min="1" max="5" value="${data.feasibility || 3}">
                </div>
                <div class="form-group">
                    <label>User Volume (1-5):</label>
                    <input type="number" class="user-volume" min="1" max="5" value="${data.userVolume || 3}">
                </div>
                <div class="form-group">
                    <label>Quick Win (1-5):</label>
                    <input type="number" class="quick-win" min="1" max="5" value="${data.quickWin || 3}">
                </div>
            `;
            container.appendChild(item);
        }
        
        // Initialize current state
        function initializeCurrentState() {
            // Add default steps
            const steps = [
                'Take handwritten notes during meeting',
                'Type notes into OneNote or Word',
                'Open Salesforce and find the account',
                'Copy/paste notes into opportunity',
                'Update opportunity stage manually',
                'Create follow-up tasks',
                'Schedule next meeting in calendar'
            ];
            
            const stepsContainer = document.getElementById('steps-container');
            stepsContainer.innerHTML = '';
            steps.forEach(step => {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'step-input';
                input.value = step;
                input.style.marginBottom = '10px';
                stepsContainer.appendChild(input);
            });
            
            // Add default pain points
            const painPoints = [
                'Notes incomplete - forget details after meeting',
                '20% of meetings have no CRM updates',
                'Follow-up tasks often missed',
                'Takes 20-30 minutes per meeting'
            ];
            
            const painContainer = document.getElementById('pain-points-current-container');
            painContainer.innerHTML = '';
            painPoints.forEach(pain => {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'pain-current-input';
                input.value = pain;
                input.style.marginBottom = '10px';
                painContainer.appendChild(input);
            });
        }
        
        // Add system
        function addSystem() {
            const container = document.getElementById('systems-container');
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'system-input';
            input.placeholder = 'System name';
            input.style.marginBottom = '10px';
            container.appendChild(input);
        }
        
        // Add step
        function addStep() {
            const container = document.getElementById('steps-container');
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'step-input';
            input.placeholder = 'Manual step';
            input.style.marginBottom = '10px';
            container.appendChild(input);
        }
        
        // Add current pain point
        function addCurrentPainPoint() {
            const container = document.getElementById('pain-points-current-container');
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'pain-current-input';
            input.placeholder = 'Pain point';
            input.style.marginBottom = '10px';
            container.appendChild(input);
        }
        
        // Initialize MVP features
        function initializeMVPFeatures() {
            const features = {
                must: [
                    'Voice capture engine with speech-to-text',
                    'CRM field mapping for voice input',
                    'Meeting notes transcription',
                    'Basic Salesforce integration',
                    'Action item extraction from voice',
                    'Manual edit capability before saving'
                ],
                should: [
                    'Sentiment analysis for customer mood',
                    'Auto-suggested next steps',
                    'Offline voice capture with sync',
                    'Meeting summary generation'
                ],
                could: [
                    'Multi-language support',
                    'Integration with calendar for follow-ups',
                    'Mobile app for field reps',
                    'Advanced analytics dashboard'
                ],
                wont: [
                    'Real-time conversation coaching',
                    'Automatic opportunity scoring',
                    'Video call transcription',
                    'Custom voice commands'
                ]
            };
            
            Object.entries(features).forEach(([type, items]) => {
                const container = document.getElementById(`${type}-have-container`);
                container.innerHTML = '';
                items.forEach(item => {
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.className = 'feature-input';
                    input.value = item;
                    input.style.marginBottom = '10px';
                    container.appendChild(input);
                });
            });
        }
        
        // Add feature
        function addFeature(type) {
            const container = document.getElementById(`${type}-have-container`);
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'feature-input';
            input.placeholder = 'Feature description';
            input.style.marginBottom = '10px';
            container.appendChild(input);
        }
        
        // Initialize metrics
        function initializeMetrics() {
            const currentMetrics = [
                { name: 'avg_crm_update_time', value: '20 minutes' },
                { name: 'meeting_notes_accuracy', value: '60%' },
                { name: 'crm_data_completeness', value: '70%' },
                { name: 'follow_up_completion_rate', value: '65%' },
                { name: 'sales_rep_satisfaction', value: '2.8/5' },
                { name: 'opportunities_with_history', value: '55%' },
                { name: 'time_to_update', value: '2-3 days' }
            ];
            
            const targetMetrics = [
                { name: 'avg_crm_update_time', value: '3 minutes' },
                { name: 'meeting_notes_accuracy', value: '95%' },
                { name: 'crm_data_completeness', value: '90%' },
                { name: 'follow_up_completion_rate', value: '95%' },
                { name: 'sales_rep_satisfaction', value: '4.5/5' },
                { name: 'opportunities_with_history', value: '90%' },
                { name: 'time_to_update', value: 'Real-time' }
            ];
            
            currentMetrics.forEach(m => addMetric('current', m));
            targetMetrics.forEach(m => addMetric('target', m));
        }
        
        // Add metric
        function addMetric(type, data = {}) {
            const container = document.getElementById(`${type}-metrics-container`);
            const item = document.createElement('div');
            item.className = 'metric-item';
            item.innerHTML = `
                <input type="text" class="metric-name" placeholder="Metric name" value="${data.name || ''}">
                <input type="text" class="metric-value" placeholder="Value" value="${data.value || ''}">
            `;
            container.appendChild(item);
        }
        
        // Export JSON
        function exportJSON(stage) {
            let data = {};
            
            if (stage === 'init') {
                data = {
                    stage: 'init',
                    participants: parseInt(document.getElementById('participants').value)
                };
            } else if (stage === 'stage1') {
                const painPoints = [];
                document.querySelectorAll('.pain-point-item').forEach(item => {
                    painPoints.push({
                        role: item.querySelector('.pain-role').value,
                        pain_description: item.querySelector('.pain-description').value,
                        time_impact: item.querySelector('.pain-time').value
                    });
                });
                data = {
                    stage: '1',
                    workshop_id: document.getElementById('workshop_id').value,
                    pain_points: painPoints
                };
            } else if (stage === 'stage3') {
                const stories = [];
                document.querySelectorAll('.story-item').forEach(item => {
                    const criteria = [];
                    item.querySelectorAll('.criteria-input').forEach(input => {
                        if (input.value) criteria.push(input.value);
                    });
                    stories.push({
                        story: item.querySelector('.story-text').value,
                        acceptance_criteria: criteria
                    });
                });
                data = {
                    stage: '3',
                    workshop_id: document.getElementById('workshop_id').value,
                    refined_stories: stories
                };
            } else if (stage === 'stage4') {
                const scores = [];
                document.querySelectorAll('.score-item').forEach((item, index) => {
                    scores.push({
                        story_index: index,
                        business_impact: parseInt(item.querySelector('.business-impact').value),
                        feasibility: parseInt(item.querySelector('.feasibility').value),
                        user_volume: parseInt(item.querySelector('.user-volume').value),
                        quick_win: parseInt(item.querySelector('.quick-win').value)
                    });
                });
                data = {
                    stage: '4',
                    workshop_id: document.getElementById('workshop_id').value,
                    priority_scores: scores
                };
            } else if (stage === 'stage5') {
                const systems = [];
                document.querySelectorAll('.system-input').forEach(input => {
                    if (input.value) systems.push(input.value);
                });
                const steps = [];
                document.querySelectorAll('.step-input').forEach(input => {
                    if (input.value) steps.push(input.value);
                });
                const painPoints = [];
                document.querySelectorAll('.pain-current-input').forEach(input => {
                    if (input.value) painPoints.push(input.value);
                });
                data = {
                    stage: '5',
                    workshop_id: document.getElementById('workshop_id').value,
                    current_state: {
                        trigger: document.getElementById('trigger').value,
                        systems: systems,
                        manual_steps: steps,
                        pain_points: painPoints,
                        time_per_instance: document.getElementById('time_per_instance').value
                    }
                };
            } else if (stage === 'stage7') {
                const mvpFeatures = {
                    must_have: [],
                    should_have: [],
                    could_have: [],
                    wont_have: []
                };
                
                ['must', 'should', 'could', 'wont'].forEach(type => {
                    document.querySelectorAll(`#${type}-have-container .feature-input`).forEach(input => {
                        if (input.value) mvpFeatures[`${type}_have`].push(input.value);
                    });
                });
                
                data = {
                    stage: '7',
                    workshop_id: document.getElementById('workshop_id').value,
                    mvp_features: mvpFeatures
                };
            } else if (stage === 'stage8') {
                const currentMetrics = {};
                const targetMetrics = {};
                
                document.querySelectorAll('#current-metrics-container .metric-item').forEach(item => {
                    const name = item.querySelector('.metric-name').value;
                    const value = item.querySelector('.metric-value').value;
                    if (name) currentMetrics[name] = value;
                });
                
                document.querySelectorAll('#target-metrics-container .metric-item').forEach(item => {
                    const name = item.querySelector('.metric-name').value;
                    const value = item.querySelector('.metric-value').value;
                    if (name) targetMetrics[name] = value;
                });
                
                data = {
                    stage: '8',
                    workshop_id: document.getElementById('workshop_id').value,
                    success_metrics: {
                        current_metrics: currentMetrics,
                        target_metrics: targetMetrics
                    }
                };
            }
            
            const jsonStr = JSON.stringify(data, null, 2);
            document.getElementById('json-textarea').value = jsonStr;
            document.getElementById('modal-title').textContent = 'Export JSON';
            document.getElementById('import-btn').style.display = 'none';
            document.getElementById('json-modal').style.display = 'flex';
        }
        
        // Show import modal
        function showImportModal(stage) {
            document.getElementById('json-textarea').value = '';
            document.getElementById('modal-title').textContent = 'Import JSON';
            document.getElementById('import-btn').style.display = 'block';
            document.getElementById('import-btn').dataset.stage = stage;
            document.getElementById('json-modal').style.display = 'flex';
        }
        
        // Import JSON data
        function importJSONData() {
            const stage = document.getElementById('import-btn').dataset.stage;
            const jsonStr = document.getElementById('json-textarea').value;
            
            try {
                const data = JSON.parse(jsonStr);
                
                if (stage === 'init') {
                    document.getElementById('participants').value = data.participants;
                } else if (stage === 'stage1') {
                    const container = document.getElementById('pain-points-container');
                    container.innerHTML = '';
                    data.pain_points.forEach(pp => addPainPoint({
                        role: pp.role,
                        description: pp.pain_description,
                        time: pp.time_impact
                    }));
                } else if (stage === 'stage3') {
                    const container = document.getElementById('stories-container');
                    container.innerHTML = '';
                    data.refined_stories.forEach(s => addStory(s));
                } else if (stage === 'stage4') {
                    const container = document.getElementById('scores-container');
                    container.innerHTML = '';
                    data.priority_scores.forEach(s => addScore(s));
                } else if (stage === 'stage5') {
                    document.getElementById('trigger').value = data.current_state.trigger;
                    
                    const systemsContainer = document.getElementById('systems-container');
                    systemsContainer.innerHTML = '';
                    data.current_state.systems.forEach(s => {
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.className = 'system-input';
                        input.value = s;
                        systemsContainer.appendChild(input);
                    });
                    
                    const stepsContainer = document.getElementById('steps-container');
                    stepsContainer.innerHTML = '';
                    data.current_state.manual_steps.forEach(s => {
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.className = 'step-input';
                        input.value = s;
                        input.style.marginBottom = '10px';
                        stepsContainer.appendChild(input);
                    });
                    
                    const painContainer = document.getElementById('pain-points-current-container');
                    painContainer.innerHTML = '';
                    data.current_state.pain_points.forEach(p => {
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.className = 'pain-current-input';
                        input.value = p;
                        input.style.marginBottom = '10px';
                        painContainer.appendChild(input);
                    });
                    
                    document.getElementById('time_per_instance').value = data.current_state.time_per_instance;
                } else if (stage === 'stage7') {
                    ['must', 'should', 'could', 'wont'].forEach(type => {
                        const container = document.getElementById(`${type}-have-container`);
                        container.innerHTML = '';
                        data.mvp_features[`${type}_have`].forEach(f => {
                            const input = document.createElement('input');
                            input.type = 'text';
                            input.className = 'feature-input';
                            input.value = f;
                            input.style.marginBottom = '10px';
                            container.appendChild(input);
                        });
                    });
                } else if (stage === 'stage8') {
                    const currentContainer = document.getElementById('current-metrics-container');
                    currentContainer.innerHTML = '';
                    Object.entries(data.success_metrics.current_metrics).forEach(([name, value]) => {
                        addMetric('current', { name, value });
                    });
                    
                    const targetContainer = document.getElementById('target-metrics-container');
                    targetContainer.innerHTML = '';
                    Object.entries(data.success_metrics.target_metrics).forEach(([name, value]) => {
                        addMetric('target', { name, value });
                    });
                }
                
                closeModal();
                showSuccess();
            } catch (e) {
                alert('Invalid JSON format: ' + e.message);
            }
        }
        
        // Copy natural language
        function copyNatural(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                showSuccess();
            });
        }
        
        // Copy JSON
        function copyJSON() {
            const text = document.getElementById('json-textarea').value;
            navigator.clipboard.writeText(text).then(() => {
                showSuccess();
            });
        }
        
        // Close modal
        function closeModal() {
            document.getElementById('json-modal').style.display = 'none';
        }
        
        // Show success message
        function showSuccess() {
            const msg = document.getElementById('success-message');
            msg.style.display = 'block';
            setTimeout(() => {
                msg.style.display = 'none';
            }, 2000);
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('json-modal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>