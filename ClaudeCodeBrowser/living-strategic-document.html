<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Living Strategic Document</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--gray-50);
            color: var(--gray-800);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .company-name-input {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 0.75rem 1rem;
            font-size: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
            width: 100%;
            max-width: 400px;
        }

        .company-name-input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .nav-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            background: white;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .nav-tab {
            padding: 0.75rem 1.5rem;
            border: none;
            background: var(--gray-100);
            color: var(--gray-700);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .nav-tab:hover {
            background: var(--gray-200);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
        }

        .section {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .section.active {
            display: block;
        }

        .section h2 {
            color: var(--gray-900);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--gray-200);
        }

        .card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .card h3 {
            color: var(--gray-800);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .input-group {
            margin-bottom: 1rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--gray-700);
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .input-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .metric-display {
            background: linear-gradient(135deg, var(--gray-800) 0%, var(--gray-900) 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .metric-display .value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .metric-display .label {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .metric-display.success { background: linear-gradient(135deg, var(--success) 0%, #059669 100%); }
        .metric-display.warning { background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%); }
        .metric-display.danger { background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%); }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .slider-container {
            margin-bottom: 1.5rem;
        }

        .slider-container label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .slider-container input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--gray-200);
            outline: none;
            -webkit-appearance: none;
        }

        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        /* Decision Tree Styles */
        .decision-tree {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 1.5rem;
        }

        .decision-node {
            background: white;
            border: 2px solid var(--gray-300);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .decision-node.current {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        .decision-node.completed {
            border-color: var(--success);
            background: #ecfdf5;
        }

        .decision-node h4 {
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .decision-options {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .decision-btn {
            flex: 1;
            min-width: 120px;
            padding: 0.75rem 1rem;
            border: 2px solid var(--gray-300);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .decision-btn:hover {
            border-color: var(--primary);
            background: var(--gray-50);
        }

        .decision-btn.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .decision-result {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .decision-result h4 {
            margin-bottom: 0.5rem;
        }

        /* Scenario Comparison */
        .scenario-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        @media (max-width: 900px) {
            .scenario-container {
                grid-template-columns: 1fr;
            }
        }

        .scenario-card {
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            overflow: hidden;
        }

        .scenario-card.pessimistic { border-color: var(--danger); }
        .scenario-card.realistic { border-color: var(--primary); }
        .scenario-card.optimistic { border-color: var(--success); }

        .scenario-header {
            padding: 1rem;
            font-weight: 600;
            text-align: center;
        }

        .scenario-card.pessimistic .scenario-header { background: #fef2f2; color: var(--danger); }
        .scenario-card.realistic .scenario-header { background: #eff6ff; color: var(--primary); }
        .scenario-card.optimistic .scenario-header { background: #ecfdf5; color: var(--success); }

        .scenario-body {
            padding: 1.5rem;
        }

        .scenario-metric {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--gray-100);
        }

        .scenario-metric:last-child {
            border-bottom: none;
        }

        /* Chart Styles */
        .chart-container {
            height: 300px;
            background: var(--gray-50);
            border-radius: 8px;
            padding: 1rem;
            position: relative;
            overflow: hidden;
        }

        .bar-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 250px;
            padding-top: 20px;
        }

        .bar {
            width: 60px;
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
            position: relative;
        }

        .bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: var(--gray-600);
        }

        .bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--gray-800);
        }

        /* Progress Tracker */
        .progress-tracker {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }

        .progress-tracker::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 10%;
            right: 10%;
            height: 4px;
            background: var(--gray-200);
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .progress-step .circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--gray-600);
            margin-bottom: 0.5rem;
        }

        .progress-step.completed .circle {
            background: var(--success);
            color: white;
        }

        .progress-step.current .circle {
            background: var(--primary);
            color: white;
        }

        .progress-step span {
            font-size: 0.8rem;
            color: var(--gray-600);
        }

        /* Action Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-outline {
            background: white;
            border: 2px solid var(--gray-300);
            color: var(--gray-700);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .action-bar {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        /* Milestone Timeline */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--gray-200);
        }

        .timeline-item {
            position: relative;
            padding-bottom: 1.5rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--gray-300);
            border: 2px solid white;
        }

        .timeline-item.completed::before {
            background: var(--success);
        }

        .timeline-item.current::before {
            background: var(--primary);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2);
        }

        .timeline-content {
            background: var(--gray-50);
            padding: 1rem;
            border-radius: 6px;
        }

        .timeline-date {
            font-size: 0.8rem;
            color: var(--gray-600);
            margin-bottom: 0.25rem;
        }

        /* Print Styles */
        @media print {
            .nav-tabs, .action-bar, .btn {
                display: none;
            }
            .section {
                display: block !important;
                page-break-inside: avoid;
            }
            header {
                background: var(--gray-800) !important;
                -webkit-print-color-adjust: exact;
            }
        }

        /* Editable content */
        [contenteditable] {
            border: 1px dashed transparent;
            padding: 0.25rem;
            border-radius: 4px;
            transition: all 0.2s;
        }

        [contenteditable]:hover {
            border-color: var(--gray-300);
            background: var(--gray-50);
        }

        [contenteditable]:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-indicator.saved {
            background: #ecfdf5;
            color: var(--success);
        }

        .status-indicator .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
        }

        /* Sensitivity Analysis Table */
        .sensitivity-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .sensitivity-table th,
        .sensitivity-table td {
            padding: 0.75rem;
            text-align: center;
            border: 1px solid var(--gray-200);
        }

        .sensitivity-table th {
            background: var(--gray-100);
            font-weight: 600;
        }

        .sensitivity-table td.highlight {
            background: #eff6ff;
            font-weight: 600;
        }

        .sensitivity-table td.positive {
            background: #ecfdf5;
            color: var(--success);
        }

        .sensitivity-table td.negative {
            background: #fef2f2;
            color: var(--danger);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>üìä Living Strategic Document</h1>
            <p>An interactive, computing document for strategic planning and decision-making</p>
            <input type="text" class="company-name-input" id="companyName" placeholder="Enter your company/project name" oninput="saveData()">
            <div style="margin-top: 1rem;">
                <span class="status-indicator saved" id="saveStatus">
                    <span class="dot"></span>
                    <span>Auto-saved locally</span>
                </span>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('overview')">üìã Overview</button>
            <button class="nav-tab" onclick="showSection('financials')">üí∞ Financial Calculator</button>
            <button class="nav-tab" onclick="showSection('scenarios')">üéØ Scenario Modeling</button>
            <button class="nav-tab" onclick="showSection('decisions')">üå≥ Decision Trees</button>
            <button class="nav-tab" onclick="showSection('roadmap')">üó∫Ô∏è Roadmap</button>
            <button class="nav-tab" onclick="showSection('risks')">‚ö†Ô∏è Risk Analysis</button>
        </nav>

        <!-- SECTION 1: Overview -->
        <section id="overview" class="section active">
            <h2>Strategic Overview</h2>

            <div class="progress-tracker">
                <div class="progress-step completed">
                    <div class="circle">1</div>
                    <span>Define</span>
                </div>
                <div class="progress-step current">
                    <div class="circle">2</div>
                    <span>Plan</span>
                </div>
                <div class="progress-step">
                    <div class="circle">3</div>
                    <span>Execute</span>
                </div>
                <div class="progress-step">
                    <div class="circle">4</div>
                    <span>Scale</span>
                </div>
            </div>

            <div class="card">
                <h3>üéØ Mission Statement</h3>
                <div class="input-group">
                    <textarea id="mission" rows="3" placeholder="What problem are you solving and for whom?" oninput="saveData()"></textarea>
                </div>
            </div>

            <div class="card">
                <h3>üìä Key Metrics Dashboard</h3>
                <div class="metrics-grid" id="overviewMetrics">
                    <div class="metric-display" id="runwayDisplay">
                        <div class="value">--</div>
                        <div class="label">Months Runway</div>
                    </div>
                    <div class="metric-display" id="mrrDisplay">
                        <div class="value">$0</div>
                        <div class="label">Monthly Revenue</div>
                    </div>
                    <div class="metric-display" id="growthDisplay">
                        <div class="value">0%</div>
                        <div class="label">Growth Rate</div>
                    </div>
                    <div class="metric-display" id="breakEvenDisplay">
                        <div class="value">--</div>
                        <div class="label">Months to Break-even</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üé™ Value Proposition Canvas</h3>
                <div class="input-row">
                    <div class="input-group">
                        <label>Customer Segments</label>
                        <textarea id="segments" rows="2" placeholder="Who are your target customers?" oninput="saveData()"></textarea>
                    </div>
                    <div class="input-group">
                        <label>Value Propositions</label>
                        <textarea id="valueProps" rows="2" placeholder="What value do you deliver?" oninput="saveData()"></textarea>
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-group">
                        <label>Channels</label>
                        <textarea id="channels" rows="2" placeholder="How do you reach customers?" oninput="saveData()"></textarea>
                    </div>
                    <div class="input-group">
                        <label>Revenue Streams</label>
                        <textarea id="revenue" rows="2" placeholder="How do you make money?" oninput="saveData()"></textarea>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: Financial Calculator -->
        <section id="financials" class="section">
            <h2>üí∞ Financial Calculator</h2>

            <div class="card">
                <h3>üíµ Runway Calculator</h3>
                <div class="input-row">
                    <div class="input-group">
                        <label>Current Cash ($)</label>
                        <input type="number" id="currentCash" value="100000" oninput="calculateFinancials()">
                    </div>
                    <div class="input-group">
                        <label>Monthly Burn Rate ($)</label>
                        <input type="number" id="burnRate" value="15000" oninput="calculateFinancials()">
                    </div>
                    <div class="input-group">
                        <label>Monthly Revenue ($)</label>
                        <input type="number" id="monthlyRevenue" value="5000" oninput="calculateFinancials()">
                    </div>
                </div>
                <div class="metrics-grid" style="margin-top: 1rem;">
                    <div class="metric-display" id="netBurnDisplay">
                        <div class="value">$10,000</div>
                        <div class="label">Net Monthly Burn</div>
                    </div>
                    <div class="metric-display" id="runwayMonthsDisplay">
                        <div class="value">10</div>
                        <div class="label">Months of Runway</div>
                    </div>
                    <div class="metric-display" id="runwayDateDisplay">
                        <div class="value">--</div>
                        <div class="label">Runway End Date</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üìà Growth Projections</h3>
                <div class="input-row">
                    <div class="input-group">
                        <label>Starting MRR ($)</label>
                        <input type="number" id="startingMRR" value="5000" oninput="calculateGrowth()">
                    </div>
                    <div class="input-group">
                        <label>Monthly Growth Rate (%)</label>
                        <input type="number" id="growthRate" value="10" oninput="calculateGrowth()">
                    </div>
                    <div class="input-group">
                        <label>Target MRR ($)</label>
                        <input type="number" id="targetMRR" value="100000" oninput="calculateGrowth()">
                    </div>
                </div>
                <div class="chart-container">
                    <div class="bar-chart" id="growthChart"></div>
                </div>
                <div class="metrics-grid" style="margin-top: 1rem;">
                    <div class="metric-display" id="monthsToTargetDisplay">
                        <div class="value">--</div>
                        <div class="label">Months to Target</div>
                    </div>
                    <div class="metric-display" id="year1MRRDisplay">
                        <div class="value">--</div>
                        <div class="label">12-Month MRR</div>
                    </div>
                    <div class="metric-display" id="year1ARRDisplay">
                        <div class="value">--</div>
                        <div class="label">12-Month ARR</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>‚öñÔ∏è Break-Even Analysis</h3>
                <div class="input-row">
                    <div class="input-group">
                        <label>Fixed Costs (Monthly $)</label>
                        <input type="number" id="fixedCosts" value="10000" oninput="calculateBreakEven()">
                    </div>
                    <div class="input-group">
                        <label>Avg Revenue per Customer ($)</label>
                        <input type="number" id="avgRevenue" value="100" oninput="calculateBreakEven()">
                    </div>
                    <div class="input-group">
                        <label>Variable Cost per Customer ($)</label>
                        <input type="number" id="variableCost" value="20" oninput="calculateBreakEven()">
                    </div>
                </div>
                <div class="metrics-grid" style="margin-top: 1rem;">
                    <div class="metric-display success" id="breakEvenCustomersDisplay">
                        <div class="value">125</div>
                        <div class="label">Customers to Break Even</div>
                    </div>
                    <div class="metric-display" id="contributionMarginDisplay">
                        <div class="value">$80</div>
                        <div class="label">Contribution Margin</div>
                    </div>
                    <div class="metric-display" id="marginPercentDisplay">
                        <div class="value">80%</div>
                        <div class="label">Margin Percentage</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üßÆ ROI Calculator</h3>
                <div class="input-row">
                    <div class="input-group">
                        <label>Investment Amount ($)</label>
                        <input type="number" id="investment" value="50000" oninput="calculateROI()">
                    </div>
                    <div class="input-group">
                        <label>Expected Annual Return ($)</label>
                        <input type="number" id="expectedReturn" value="75000" oninput="calculateROI()">
                    </div>
                    <div class="input-group">
                        <label>Time Horizon (Years)</label>
                        <input type="number" id="timeHorizon" value="1" oninput="calculateROI()">
                    </div>
                </div>
                <div class="metrics-grid" style="margin-top: 1rem;">
                    <div class="metric-display success" id="roiDisplay">
                        <div class="value">50%</div>
                        <div class="label">ROI</div>
                    </div>
                    <div class="metric-display" id="netProfitDisplay">
                        <div class="value">$25,000</div>
                        <div class="label">Net Profit</div>
                    </div>
                    <div class="metric-display" id="paybackDisplay">
                        <div class="value">8 mo</div>
                        <div class="label">Payback Period</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: Scenario Modeling -->
        <section id="scenarios" class="section">
            <h2>üéØ Scenario Modeling Engine</h2>

            <div class="card">
                <h3>üéöÔ∏è Adjust Variables</h3>
                <div class="slider-container">
                    <label>
                        <span>Customer Acquisition Rate</span>
                        <span id="acquisitionValue">50 customers/month</span>
                    </label>
                    <input type="range" id="acquisitionRate" min="10" max="200" value="50" oninput="updateScenarios()">
                </div>
                <div class="slider-container">
                    <label>
                        <span>Churn Rate</span>
                        <span id="churnValue">5%</span>
                    </label>
                    <input type="range" id="churnRate" min="1" max="20" value="5" oninput="updateScenarios()">
                </div>
                <div class="slider-container">
                    <label>
                        <span>Average Revenue Per User (ARPU)</span>
                        <span id="arpuValue">$100</span>
                    </label>
                    <input type="range" id="arpu" min="10" max="500" value="100" oninput="updateScenarios()">
                </div>
                <div class="slider-container">
                    <label>
                        <span>Customer Acquisition Cost (CAC)</span>
                        <span id="cacValue">$50</span>
                    </label>
                    <input type="range" id="cac" min="10" max="300" value="50" oninput="updateScenarios()">
                </div>
            </div>

            <div class="scenario-container">
                <div class="scenario-card pessimistic">
                    <div class="scenario-header">üò∞ Pessimistic (-30%)</div>
                    <div class="scenario-body" id="pessimisticScenario">
                        <div class="scenario-metric">
                            <span>12-Month Revenue</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Customer LTV</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>LTV:CAC Ratio</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Net Customers (12mo)</span>
                            <span class="value">--</span>
                        </div>
                    </div>
                </div>
                <div class="scenario-card realistic">
                    <div class="scenario-header">üéØ Realistic (Base)</div>
                    <div class="scenario-body" id="realisticScenario">
                        <div class="scenario-metric">
                            <span>12-Month Revenue</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Customer LTV</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>LTV:CAC Ratio</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Net Customers (12mo)</span>
                            <span class="value">--</span>
                        </div>
                    </div>
                </div>
                <div class="scenario-card optimistic">
                    <div class="scenario-header">üöÄ Optimistic (+30%)</div>
                    <div class="scenario-body" id="optimisticScenario">
                        <div class="scenario-metric">
                            <span>12-Month Revenue</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Customer LTV</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>LTV:CAC Ratio</span>
                            <span class="value">--</span>
                        </div>
                        <div class="scenario-metric">
                            <span>Net Customers (12mo)</span>
                            <span class="value">--</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card" style="margin-top: 1.5rem;">
                <h3>üìä Sensitivity Analysis</h3>
                <p style="color: var(--gray-600); margin-bottom: 1rem;">
                    How does changing one variable affect your 12-month revenue?
                </p>
                <table class="sensitivity-table" id="sensitivityTable">
                    <thead>
                        <tr>
                            <th>Variable</th>
                            <th>-20%</th>
                            <th>-10%</th>
                            <th>Base</th>
                            <th>+10%</th>
                            <th>+20%</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Populated by JS -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- SECTION 4: Decision Trees -->
        <section id="decisions" class="section">
            <h2>üå≥ Interactive Decision Trees</h2>

            <div class="card">
                <h3>üíº Funding Strategy Decision Tree</h3>
                <div class="decision-tree" id="fundingTree">
                    <div class="decision-node current" id="fundingQ1">
                        <h4>What's your current runway?</h4>
                        <div class="decision-options">
                            <button class="decision-btn" onclick="selectFunding(1, 'short')">Less than 6 months</button>
                            <button class="decision-btn" onclick="selectFunding(1, 'medium')">6-12 months</button>
                            <button class="decision-btn" onclick="selectFunding(1, 'long')">12+ months</button>
                        </div>
                    </div>
                    <div class="decision-node" id="fundingQ2" style="display: none;">
                        <h4>What's your current traction?</h4>
                        <div class="decision-options">
                            <button class="decision-btn" onclick="selectFunding(2, 'pre-revenue')">Pre-revenue</button>
                            <button class="decision-btn" onclick="selectFunding(2, 'early')">Early revenue (&lt;$10k MRR)</button>
                            <button class="decision-btn" onclick="selectFunding(2, 'growth')">Growth ($10k+ MRR)</button>
                        </div>
                    </div>
                    <div class="decision-node" id="fundingQ3" style="display: none;">
                        <h4>What's your primary goal?</h4>
                        <div class="decision-options">
                            <button class="decision-btn" onclick="selectFunding(3, 'survival')">Extend runway</button>
                            <button class="decision-btn" onclick="selectFunding(3, 'growth')">Accelerate growth</button>
                            <button class="decision-btn" onclick="selectFunding(3, 'strategic')">Strategic partnership</button>
                        </div>
                    </div>
                    <div class="decision-result" id="fundingResult" style="display: none;">
                        <h4>üìã Recommended Strategy</h4>
                        <p id="fundingRecommendation"></p>
                        <div style="margin-top: 1rem;">
                            <button class="btn btn-outline" style="color: white; border-color: white;" onclick="resetFundingTree()">Start Over</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üöÄ Go-to-Market Strategy</h3>
                <div class="decision-tree" id="gtmTree">
                    <div class="decision-node current" id="gtmQ1">
                        <h4>Who is your target customer?</h4>
                        <div class="decision-options">
                            <button class="decision-btn" onclick="selectGTM(1, 'consumer')">Consumer (B2C)</button>
                            <button class="decision-btn" onclick="selectGTM(1, 'smb')">Small Business (SMB)</button>
                            <button class="decision-btn" onclick="selectGTM(1, 'enterprise')">Enterprise (B2B)</button>
                        </div>
                    </div>
                    <div class="decision-node" id="gtmQ2" style="display: none;">
                        <h4>What's your average deal size?</h4>
                        <div class="decision-options">
                            <button class="decision-btn" onclick="selectGTM(2, 'low')">Under $100/mo</button>
                            <button class="decision-btn" onclick="selectGTM(2, 'medium')">$100-$1,000/mo</button>
                            <button class="decision-btn" onclick="selectGTM(2, 'high')">$1,000+/mo</button>
                        </div>
                    </div>
                    <div class="decision-node" id="gtmQ3" style="display: none;">
                        <h4>What's your current team size?</h4>
                        <div class="decision-options">
                            <button class="decision-btn" onclick="selectGTM(3, 'solo')">Solo founder</button>
                            <button class="decision-btn" onclick="selectGTM(3, 'small')">2-5 people</button>
                            <button class="decision-btn" onclick="selectGTM(3, 'medium')">6+ people</button>
                        </div>
                    </div>
                    <div class="decision-result" id="gtmResult" style="display: none;">
                        <h4>üìã Recommended GTM Strategy</h4>
                        <p id="gtmRecommendation"></p>
                        <div style="margin-top: 1rem;">
                            <button class="btn btn-outline" style="color: white; border-color: white;" onclick="resetGTMTree()">Start Over</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üîß Build Your Own Decision Tree</h3>
                <div class="input-group">
                    <label>Decision Question</label>
                    <input type="text" id="customQuestion" placeholder="What decision are you trying to make?">
                </div>
                <div class="input-row">
                    <div class="input-group">
                        <label>Option A</label>
                        <input type="text" id="optionA" placeholder="First option">
                    </div>
                    <div class="input-group">
                        <label>Option B</label>
                        <input type="text" id="optionB" placeholder="Second option">
                    </div>
                </div>
                <div id="customTreeOutput" style="margin-top: 1rem;"></div>
                <button class="btn btn-primary" onclick="buildCustomTree()" style="margin-top: 1rem;">Generate Decision Framework</button>
            </div>
        </section>

        <!-- SECTION 5: Roadmap -->
        <section id="roadmap" class="section">
            <h2>üó∫Ô∏è Strategic Roadmap</h2>

            <div class="card">
                <h3>üìÖ Milestone Timeline</h3>
                <div style="margin-bottom: 1rem;">
                    <button class="btn btn-primary" onclick="addMilestone()">+ Add Milestone</button>
                </div>
                <div class="timeline" id="milestoneTimeline">
                    <div class="timeline-item completed">
                        <div class="timeline-content">
                            <div class="timeline-date" contenteditable="true">Q1 2024</div>
                            <strong contenteditable="true">MVP Launch</strong>
                            <p contenteditable="true">Initial product release with core features</p>
                        </div>
                    </div>
                    <div class="timeline-item current">
                        <div class="timeline-content">
                            <div class="timeline-date" contenteditable="true">Q2 2024</div>
                            <strong contenteditable="true">Product-Market Fit</strong>
                            <p contenteditable="true">Achieve 100 paying customers with strong retention</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <div class="timeline-date" contenteditable="true">Q3 2024</div>
                            <strong contenteditable="true">Scale Operations</strong>
                            <p contenteditable="true">Hire key team members and establish processes</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>üéØ OKRs (Objectives & Key Results)</h3>
                <div id="okrContainer">
                    <div class="okr-item" style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <div class="input-group">
                            <label>Objective</label>
                            <input type="text" placeholder="What do you want to achieve?" oninput="saveData()">
                        </div>
                        <div class="input-group">
                            <label>Key Result 1</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="text" placeholder="Measurable outcome" style="flex: 2;" oninput="saveData()">
                                <input type="number" placeholder="Target" style="width: 100px;" oninput="saveData()">
                                <input type="number" placeholder="Current" style="width: 100px;" oninput="saveData()">
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Key Result 2</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="text" placeholder="Measurable outcome" style="flex: 2;" oninput="saveData()">
                                <input type="number" placeholder="Target" style="width: 100px;" oninput="saveData()">
                                <input type="number" placeholder="Current" style="width: 100px;" oninput="saveData()">
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Key Result 3</label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="text" placeholder="Measurable outcome" style="flex: 2;" oninput="saveData()">
                                <input type="number" placeholder="Target" style="width: 100px;" oninput="saveData()">
                                <input type="number" placeholder="Current" style="width: 100px;" oninput="saveData()">
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-outline" onclick="addOKR()">+ Add Another Objective</button>
            </div>

            <div class="card">
                <h3>üìä Resource Allocation</h3>
                <div class="input-row">
                    <div class="input-group">
                        <label>Engineering (%)</label>
                        <input type="number" id="engAlloc" value="40" min="0" max="100" oninput="updateAllocation()">
                    </div>
                    <div class="input-group">
                        <label>Sales & Marketing (%)</label>
                        <input type="number" id="salesAlloc" value="30" min="0" max="100" oninput="updateAllocation()">
                    </div>
                    <div class="input-group">
                        <label>Operations (%)</label>
                        <input type="number" id="opsAlloc" value="20" min="0" max="100" oninput="updateAllocation()">
                    </div>
                    <div class="input-group">
                        <label>Other (%)</label>
                        <input type="number" id="otherAlloc" value="10" min="0" max="100" oninput="updateAllocation()">
                    </div>
                </div>
                <div id="allocationWarning" style="color: var(--danger); margin-top: 0.5rem; display: none;">
                    ‚ö†Ô∏è Allocation doesn't equal 100%
                </div>
                <div class="chart-container" style="height: 100px; margin-top: 1rem;">
                    <div style="display: flex; height: 40px; border-radius: 8px; overflow: hidden;" id="allocationBar">
                        <div style="background: var(--primary); width: 40%;" title="Engineering"></div>
                        <div style="background: var(--success); width: 30%;" title="Sales & Marketing"></div>
                        <div style="background: var(--warning); width: 20%;" title="Operations"></div>
                        <div style="background: var(--gray-400); width: 10%;" title="Other"></div>
                    </div>
                    <div style="display: flex; justify-content: space-around; margin-top: 0.5rem; font-size: 0.85rem;">
                        <span style="color: var(--primary);">‚óè Engineering</span>
                        <span style="color: var(--success);">‚óè Sales/Marketing</span>
                        <span style="color: var(--warning);">‚óè Operations</span>
                        <span style="color: var(--gray-400);">‚óè Other</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 6: Risk Analysis -->
        <section id="risks" class="section">
            <h2>‚ö†Ô∏è Risk Analysis & Mitigation</h2>

            <div class="card">
                <h3>üé≤ Risk Matrix</h3>
                <div id="riskMatrix" style="display: grid; grid-template-columns: auto repeat(5, 1fr); gap: 2px; background: var(--gray-200); padding: 2px; border-radius: 8px;">
                    <div style="background: white; padding: 0.5rem; font-weight: 600;">Impact ‚Üì / Likelihood ‚Üí</div>
                    <div style="background: white; padding: 0.5rem; text-align: center; font-size: 0.8rem;">Very Low</div>
                    <div style="background: white; padding: 0.5rem; text-align: center; font-size: 0.8rem;">Low</div>
                    <div style="background: white; padding: 0.5rem; text-align: center; font-size: 0.8rem;">Medium</div>
                    <div style="background: white; padding: 0.5rem; text-align: center; font-size: 0.8rem;">High</div>
                    <div style="background: white; padding: 0.5rem; text-align: center; font-size: 0.8rem;">Very High</div>

                    <div style="background: white; padding: 0.5rem; font-weight: 600;">Critical</div>
                    <div class="risk-cell" style="background: #fef3c7; padding: 0.5rem;" data-impact="5" data-likelihood="1"></div>
                    <div class="risk-cell" style="background: #fed7aa; padding: 0.5rem;" data-impact="5" data-likelihood="2"></div>
                    <div class="risk-cell" style="background: #fecaca; padding: 0.5rem;" data-impact="5" data-likelihood="3"></div>
                    <div class="risk-cell" style="background: #fca5a5; padding: 0.5rem;" data-impact="5" data-likelihood="4"></div>
                    <div class="risk-cell" style="background: #f87171; padding: 0.5rem;" data-impact="5" data-likelihood="5"></div>

                    <div style="background: white; padding: 0.5rem; font-weight: 600;">High</div>
                    <div class="risk-cell" style="background: #d9f99d; padding: 0.5rem;" data-impact="4" data-likelihood="1"></div>
                    <div class="risk-cell" style="background: #fef3c7; padding: 0.5rem;" data-impact="4" data-likelihood="2"></div>
                    <div class="risk-cell" style="background: #fed7aa; padding: 0.5rem;" data-impact="4" data-likelihood="3"></div>
                    <div class="risk-cell" style="background: #fecaca; padding: 0.5rem;" data-impact="4" data-likelihood="4"></div>
                    <div class="risk-cell" style="background: #fca5a5; padding: 0.5rem;" data-impact="4" data-likelihood="5"></div>

                    <div style="background: white; padding: 0.5rem; font-weight: 600;">Medium</div>
                    <div class="risk-cell" style="background: #bbf7d0; padding: 0.5rem;" data-impact="3" data-likelihood="1"></div>
                    <div class="risk-cell" style="background: #d9f99d; padding: 0.5rem;" data-impact="3" data-likelihood="2"></div>
                    <div class="risk-cell" style="background: #fef3c7; padding: 0.5rem;" data-impact="3" data-likelihood="3"></div>
                    <div class="risk-cell" style="background: #fed7aa; padding: 0.5rem;" data-impact="3" data-likelihood="4"></div>
                    <div class="risk-cell" style="background: #fecaca; padding: 0.5rem;" data-impact="3" data-likelihood="5"></div>

                    <div style="background: white; padding: 0.5rem; font-weight: 600;">Low</div>
                    <div class="risk-cell" style="background: #bbf7d0; padding: 0.5rem;" data-impact="2" data-likelihood="1"></div>
                    <div class="risk-cell" style="background: #bbf7d0; padding: 0.5rem;" data-impact="2" data-likelihood="2"></div>
                    <div class="risk-cell" style="background: #d9f99d; padding: 0.5rem;" data-impact="2" data-likelihood="3"></div>
                    <div class="risk-cell" style="background: #fef3c7; padding: 0.5rem;" data-impact="2" data-likelihood="4"></div>
                    <div class="risk-cell" style="background: #fed7aa; padding: 0.5rem;" data-impact="2" data-likelihood="5"></div>

                    <div style="background: white; padding: 0.5rem; font-weight: 600;">Minimal</div>
                    <div class="risk-cell" style="background: #bbf7d0; padding: 0.5rem;" data-impact="1" data-likelihood="1"></div>
                    <div class="risk-cell" style="background: #bbf7d0; padding: 0.5rem;" data-impact="1" data-likelihood="2"></div>
                    <div class="risk-cell" style="background: #bbf7d0; padding: 0.5rem;" data-impact="1" data-likelihood="3"></div>
                    <div class="risk-cell" style="background: #d9f99d; padding: 0.5rem;" data-impact="1" data-likelihood="4"></div>
                    <div class="risk-cell" style="background: #fef3c7; padding: 0.5rem;" data-impact="1" data-likelihood="5"></div>
                </div>
                <p style="margin-top: 1rem; color: var(--gray-600); font-size: 0.9rem;">
                    Click on a cell to add a risk. Risks will appear as markers on the matrix.
                </p>
            </div>

            <div class="card">
                <h3>üìã Risk Register</h3>
                <div id="riskRegister">
                    <div class="risk-entry" style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid var(--danger);">
                        <div class="input-row">
                            <div class="input-group">
                                <label>Risk Description</label>
                                <input type="text" value="Key employee departure" oninput="saveData()">
                            </div>
                            <div class="input-group">
                                <label>Impact (1-5)</label>
                                <select oninput="saveData()">
                                    <option>1 - Minimal</option>
                                    <option>2 - Low</option>
                                    <option>3 - Medium</option>
                                    <option selected>4 - High</option>
                                    <option>5 - Critical</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Likelihood (1-5)</label>
                                <select oninput="saveData()">
                                    <option>1 - Very Low</option>
                                    <option selected>2 - Low</option>
                                    <option>3 - Medium</option>
                                    <option>4 - High</option>
                                    <option>5 - Very High</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Mitigation Strategy</label>
                            <textarea rows="2" oninput="saveData()">Document key processes, cross-train team members, competitive compensation</textarea>
                        </div>
                    </div>
                </div>
                <button class="btn btn-outline" onclick="addRisk()">+ Add Risk</button>
            </div>

            <div class="card">
                <h3>üõ°Ô∏è Contingency Planning</h3>
                <div class="input-group">
                    <label>If revenue drops 50%, we will:</label>
                    <textarea id="contingency1" rows="2" placeholder="Describe your contingency plan..." oninput="saveData()"></textarea>
                </div>
                <div class="input-group">
                    <label>If a major competitor enters the market, we will:</label>
                    <textarea id="contingency2" rows="2" placeholder="Describe your contingency plan..." oninput="saveData()"></textarea>
                </div>
                <div class="input-group">
                    <label>If we lose our primary customer segment, we will:</label>
                    <textarea id="contingency3" rows="2" placeholder="Describe your contingency plan..." oninput="saveData()"></textarea>
                </div>
            </div>
        </section>

        <!-- Action Bar -->
        <div class="action-bar">
            <button class="btn btn-primary" onclick="exportDocument()">üìÑ Export as HTML</button>
            <button class="btn btn-outline" onclick="window.print()">üñ®Ô∏è Print Document</button>
            <button class="btn btn-outline" onclick="exportJSON()">üíæ Export Data (JSON)</button>
            <button class="btn btn-outline" onclick="importJSON()">üì• Import Data</button>
            <button class="btn btn-outline" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>
        </div>
    </div>

    <input type="file" id="importFile" style="display: none;" accept=".json" onchange="handleImport(event)">

    <script>
        // ============================================
        // DATA PERSISTENCE
        // ============================================

        function saveData() {
            const data = {
                companyName: document.getElementById('companyName').value,
                mission: document.getElementById('mission').value,
                segments: document.getElementById('segments').value,
                valueProps: document.getElementById('valueProps').value,
                channels: document.getElementById('channels').value,
                revenue: document.getElementById('revenue').value,
                financials: {
                    currentCash: document.getElementById('currentCash').value,
                    burnRate: document.getElementById('burnRate').value,
                    monthlyRevenue: document.getElementById('monthlyRevenue').value,
                    startingMRR: document.getElementById('startingMRR').value,
                    growthRate: document.getElementById('growthRate').value,
                    targetMRR: document.getElementById('targetMRR').value,
                    fixedCosts: document.getElementById('fixedCosts').value,
                    avgRevenue: document.getElementById('avgRevenue').value,
                    variableCost: document.getElementById('variableCost').value,
                    investment: document.getElementById('investment').value,
                    expectedReturn: document.getElementById('expectedReturn').value,
                    timeHorizon: document.getElementById('timeHorizon').value
                },
                scenarios: {
                    acquisitionRate: document.getElementById('acquisitionRate').value,
                    churnRate: document.getElementById('churnRate').value,
                    arpu: document.getElementById('arpu').value,
                    cac: document.getElementById('cac').value
                },
                allocation: {
                    engineering: document.getElementById('engAlloc').value,
                    sales: document.getElementById('salesAlloc').value,
                    operations: document.getElementById('opsAlloc').value,
                    other: document.getElementById('otherAlloc').value
                },
                contingencies: {
                    revenue: document.getElementById('contingency1').value,
                    competitor: document.getElementById('contingency2').value,
                    customer: document.getElementById('contingency3').value
                },
                savedAt: new Date().toISOString()
            };

            localStorage.setItem('livingDocument', JSON.stringify(data));

            const status = document.getElementById('saveStatus');
            status.innerHTML = '<span class="dot"></span><span>Saved just now</span>';
        }

        function loadData() {
            const saved = localStorage.getItem('livingDocument');
            if (!saved) return;

            try {
                const data = JSON.parse(saved);

                if (data.companyName) document.getElementById('companyName').value = data.companyName;
                if (data.mission) document.getElementById('mission').value = data.mission;
                if (data.segments) document.getElementById('segments').value = data.segments;
                if (data.valueProps) document.getElementById('valueProps').value = data.valueProps;
                if (data.channels) document.getElementById('channels').value = data.channels;
                if (data.revenue) document.getElementById('revenue').value = data.revenue;

                if (data.financials) {
                    Object.keys(data.financials).forEach(key => {
                        const el = document.getElementById(key);
                        if (el) el.value = data.financials[key];
                    });
                }

                if (data.scenarios) {
                    Object.keys(data.scenarios).forEach(key => {
                        const el = document.getElementById(key);
                        if (el) el.value = data.scenarios[key];
                    });
                }

                if (data.allocation) {
                    document.getElementById('engAlloc').value = data.allocation.engineering;
                    document.getElementById('salesAlloc').value = data.allocation.sales;
                    document.getElementById('opsAlloc').value = data.allocation.operations;
                    document.getElementById('otherAlloc').value = data.allocation.other;
                }

                if (data.contingencies) {
                    document.getElementById('contingency1').value = data.contingencies.revenue || '';
                    document.getElementById('contingency2').value = data.contingencies.competitor || '';
                    document.getElementById('contingency3').value = data.contingencies.customer || '';
                }

                // Recalculate all
                calculateFinancials();
                calculateGrowth();
                calculateBreakEven();
                calculateROI();
                updateScenarios();
                updateAllocation();

            } catch (e) {
                console.error('Error loading saved data:', e);
            }
        }

        // ============================================
        // NAVIGATION
        // ============================================

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));

            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        // ============================================
        // FINANCIAL CALCULATORS
        // ============================================

        function calculateFinancials() {
            const cash = parseFloat(document.getElementById('currentCash').value) || 0;
            const burn = parseFloat(document.getElementById('burnRate').value) || 0;
            const revenue = parseFloat(document.getElementById('monthlyRevenue').value) || 0;

            const netBurn = burn - revenue;
            const runway = netBurn > 0 ? cash / netBurn : Infinity;

            const runwayDate = new Date();
            runwayDate.setMonth(runwayDate.getMonth() + Math.floor(runway));

            document.getElementById('netBurnDisplay').querySelector('.value').textContent =
                '$' + netBurn.toLocaleString();

            const runwayDisplay = document.getElementById('runwayMonthsDisplay');
            runwayDisplay.querySelector('.value').textContent =
                runway === Infinity ? '‚àû' : Math.floor(runway);
            runwayDisplay.className = 'metric-display ' +
                (runway < 6 ? 'danger' : runway < 12 ? 'warning' : 'success');

            document.getElementById('runwayDateDisplay').querySelector('.value').textContent =
                runway === Infinity ? 'Profitable!' : runwayDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });

            // Update overview metrics
            document.getElementById('runwayDisplay').querySelector('.value').textContent =
                runway === Infinity ? '‚àû' : Math.floor(runway);
            document.getElementById('mrrDisplay').querySelector('.value').textContent =
                '$' + revenue.toLocaleString();

            saveData();
        }

        function calculateGrowth() {
            const startMRR = parseFloat(document.getElementById('startingMRR').value) || 0;
            const growth = parseFloat(document.getElementById('growthRate').value) || 0;
            const targetMRR = parseFloat(document.getElementById('targetMRR').value) || 0;

            const growthMultiplier = 1 + (growth / 100);

            // Calculate months to target
            let months = 0;
            let currentMRR = startMRR;
            while (currentMRR < targetMRR && months < 120) {
                currentMRR *= growthMultiplier;
                months++;
            }

            // Calculate 12-month projection
            const year1MRR = startMRR * Math.pow(growthMultiplier, 12);
            const year1ARR = year1MRR * 12;

            document.getElementById('monthsToTargetDisplay').querySelector('.value').textContent =
                months >= 120 ? '120+' : months;
            document.getElementById('year1MRRDisplay').querySelector('.value').textContent =
                '$' + Math.round(year1MRR).toLocaleString();
            document.getElementById('year1ARRDisplay').querySelector('.value').textContent =
                '$' + Math.round(year1ARR).toLocaleString();

            // Update chart
            renderGrowthChart(startMRR, growthMultiplier);

            // Update overview
            document.getElementById('growthDisplay').querySelector('.value').textContent = growth + '%';

            saveData();
        }

        function renderGrowthChart(startMRR, multiplier) {
            const chart = document.getElementById('growthChart');
            chart.innerHTML = '';

            const values = [];
            let mrr = startMRR;
            for (let i = 0; i <= 12; i += 2) {
                values.push({ month: i, value: mrr });
                mrr *= multiplier * multiplier;
            }

            const maxValue = Math.max(...values.map(v => v.value));

            values.forEach(v => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = (v.value / maxValue * 200) + 'px';
                bar.innerHTML = `
                    <span class="bar-value">$${Math.round(v.value / 1000)}k</span>
                    <span class="bar-label">M${v.month}</span>
                `;
                chart.appendChild(bar);
            });
        }

        function calculateBreakEven() {
            const fixed = parseFloat(document.getElementById('fixedCosts').value) || 0;
            const avgRev = parseFloat(document.getElementById('avgRevenue').value) || 0;
            const varCost = parseFloat(document.getElementById('variableCost').value) || 0;

            const contribution = avgRev - varCost;
            const breakEvenCustomers = contribution > 0 ? Math.ceil(fixed / contribution) : Infinity;
            const marginPercent = avgRev > 0 ? (contribution / avgRev * 100) : 0;

            document.getElementById('breakEvenCustomersDisplay').querySelector('.value').textContent =
                breakEvenCustomers === Infinity ? '‚àû' : breakEvenCustomers;
            document.getElementById('contributionMarginDisplay').querySelector('.value').textContent =
                '$' + contribution.toLocaleString();
            document.getElementById('marginPercentDisplay').querySelector('.value').textContent =
                marginPercent.toFixed(0) + '%';

            // Update overview
            const monthlyRevenue = parseFloat(document.getElementById('monthlyRevenue').value) || 0;
            const monthsToBreakEven = monthlyRevenue > 0 ?
                Math.ceil((breakEvenCustomers * avgRev) / monthlyRevenue) : Infinity;
            document.getElementById('breakEvenDisplay').querySelector('.value').textContent =
                monthsToBreakEven === Infinity ? '--' : monthsToBreakEven;

            saveData();
        }

        function calculateROI() {
            const investment = parseFloat(document.getElementById('investment').value) || 0;
            const expectedReturn = parseFloat(document.getElementById('expectedReturn').value) || 0;
            const years = parseFloat(document.getElementById('timeHorizon').value) || 1;

            const netProfit = expectedReturn - investment;
            const roi = investment > 0 ? (netProfit / investment * 100) : 0;
            const annualReturn = expectedReturn / years;
            const paybackMonths = annualReturn > 0 ? Math.ceil(investment / (annualReturn / 12)) : Infinity;

            const roiDisplay = document.getElementById('roiDisplay');
            roiDisplay.querySelector('.value').textContent = roi.toFixed(0) + '%';
            roiDisplay.className = 'metric-display ' + (roi > 50 ? 'success' : roi > 0 ? 'warning' : 'danger');

            document.getElementById('netProfitDisplay').querySelector('.value').textContent =
                '$' + netProfit.toLocaleString();
            document.getElementById('paybackDisplay').querySelector('.value').textContent =
                paybackMonths === Infinity ? '‚àû' : paybackMonths + ' mo';

            saveData();
        }

        // ============================================
        // SCENARIO MODELING
        // ============================================

        function updateScenarios() {
            const acquisition = parseInt(document.getElementById('acquisitionRate').value);
            const churn = parseInt(document.getElementById('churnRate').value);
            const arpu = parseInt(document.getElementById('arpu').value);
            const cac = parseInt(document.getElementById('cac').value);

            // Update display values
            document.getElementById('acquisitionValue').textContent = acquisition + ' customers/month';
            document.getElementById('churnValue').textContent = churn + '%';
            document.getElementById('arpuValue').textContent = '$' + arpu;
            document.getElementById('cacValue').textContent = '$' + cac;

            // Calculate for each scenario
            const scenarios = [
                { id: 'pessimistic', factor: 0.7 },
                { id: 'realistic', factor: 1.0 },
                { id: 'optimistic', factor: 1.3 }
            ];

            scenarios.forEach(scenario => {
                const adjAcquisition = Math.round(acquisition * scenario.factor);
                const adjChurn = scenario.id === 'optimistic' ? churn * 0.7 :
                                 scenario.id === 'pessimistic' ? churn * 1.3 : churn;

                // Calculate LTV
                const monthlyChurnRate = adjChurn / 100;
                const avgLifespan = monthlyChurnRate > 0 ? 1 / monthlyChurnRate : 100;
                const ltv = arpu * avgLifespan;
                const ltvCacRatio = cac > 0 ? ltv / cac : 0;

                // Calculate 12-month customers
                let customers = 0;
                for (let m = 0; m < 12; m++) {
                    customers = customers * (1 - monthlyChurnRate) + adjAcquisition;
                }

                // Calculate 12-month revenue (sum of MRR each month)
                let totalRevenue = 0;
                let monthlyCustomers = 0;
                for (let m = 0; m < 12; m++) {
                    monthlyCustomers = monthlyCustomers * (1 - monthlyChurnRate) + adjAcquisition;
                    totalRevenue += monthlyCustomers * arpu;
                }

                // Update display
                const container = document.getElementById(scenario.id + 'Scenario');
                const values = container.querySelectorAll('.value');
                values[0].textContent = '$' + Math.round(totalRevenue).toLocaleString();
                values[1].textContent = '$' + Math.round(ltv).toLocaleString();
                values[2].textContent = ltvCacRatio.toFixed(1) + 'x';
                values[3].textContent = Math.round(customers).toLocaleString();
            });

            // Update sensitivity table
            updateSensitivityTable(acquisition, churn, arpu, cac);

            saveData();
        }

        function updateSensitivityTable(acquisition, churn, arpu, cac) {
            const table = document.getElementById('sensitivityTable').querySelector('tbody');
            table.innerHTML = '';

            const baseRevenue = calculateYearRevenue(acquisition, churn, arpu);
            const variations = [-0.2, -0.1, 0, 0.1, 0.2];

            const variables = [
                { name: 'Acquisition Rate', base: acquisition, calc: (v) => calculateYearRevenue(v, churn, arpu) },
                { name: 'Churn Rate', base: churn, calc: (v) => calculateYearRevenue(acquisition, v, arpu), inverse: true },
                { name: 'ARPU', base: arpu, calc: (v) => calculateYearRevenue(acquisition, churn, v) }
            ];

            variables.forEach(variable => {
                const row = document.createElement('tr');
                row.innerHTML = `<td style="text-align: left; font-weight: 500;">${variable.name}</td>`;

                variations.forEach((v, i) => {
                    let newValue;
                    if (variable.inverse) {
                        newValue = variable.base * (1 - v);
                    } else {
                        newValue = variable.base * (1 + v);
                    }

                    const revenue = variable.calc(newValue);
                    const diff = ((revenue - baseRevenue) / baseRevenue * 100).toFixed(0);

                    const cell = document.createElement('td');
                    cell.textContent = '$' + Math.round(revenue / 1000) + 'k';

                    if (i === 2) {
                        cell.className = 'highlight';
                    } else if (revenue > baseRevenue) {
                        cell.className = 'positive';
                        cell.textContent += ` (+${diff}%)`;
                    } else if (revenue < baseRevenue) {
                        cell.className = 'negative';
                        cell.textContent += ` (${diff}%)`;
                    }

                    row.appendChild(cell);
                });

                table.appendChild(row);
            });
        }

        function calculateYearRevenue(acquisition, churn, arpu) {
            const monthlyChurn = churn / 100;
            let totalRevenue = 0;
            let customers = 0;

            for (let m = 0; m < 12; m++) {
                customers = customers * (1 - monthlyChurn) + acquisition;
                totalRevenue += customers * arpu;
            }

            return totalRevenue;
        }

        // ============================================
        // DECISION TREES
        // ============================================

        const fundingAnswers = {};
        const gtmAnswers = {};

        function selectFunding(question, answer) {
            fundingAnswers[question] = answer;

            // Mark current as completed
            document.getElementById('fundingQ' + question).classList.remove('current');
            document.getElementById('fundingQ' + question).classList.add('completed');

            // Highlight selected button
            const buttons = document.getElementById('fundingQ' + question).querySelectorAll('.decision-btn');
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');

            if (question < 3) {
                // Show next question
                const next = document.getElementById('fundingQ' + (question + 1));
                next.style.display = 'block';
                next.classList.add('current');
            } else {
                // Show recommendation
                showFundingRecommendation();
            }
        }

        function showFundingRecommendation() {
            const { 1: runway, 2: traction, 3: goal } = fundingAnswers;

            let recommendation = '';

            if (runway === 'short' && traction === 'pre-revenue') {
                recommendation = `<strong>Recommended: Friends & Family or Angel Investment</strong><br><br>
                    With limited runway and pre-revenue status, focus on raising a small bridge round ($50-150k) from
                    angels or friends/family. Use this to hit key milestones that will make you attractive for seed funding.
                    <br><br><strong>Next Steps:</strong>
                    <ul>
                        <li>Define 2-3 key milestones achievable in 3-6 months</li>
                        <li>Create a simple pitch deck</li>
                        <li>Reach out to 10-15 potential angels</li>
                    </ul>`;
            } else if (runway === 'short' && traction !== 'pre-revenue') {
                recommendation = `<strong>Recommended: Revenue-Based Financing or Seed Round</strong><br><br>
                    With revenue traction but limited runway, consider revenue-based financing for quick capital,
                    or accelerate your seed round fundraise.
                    <br><br><strong>Next Steps:</strong>
                    <ul>
                        <li>Apply to Pipe, Clearco, or similar RBF providers</li>
                        <li>Prepare materials for seed investors</li>
                        <li>Consider accelerator programs for runway + network</li>
                    </ul>`;
            } else if (traction === 'growth' && goal === 'growth') {
                recommendation = `<strong>Recommended: Series A or Growth Equity</strong><br><br>
                    With strong MRR and growth goals, you're positioned for institutional funding. Focus on
                    demonstrating unit economics, retention, and a clear path to scale.
                    <br><br><strong>Next Steps:</strong>
                    <ul>
                        <li>Build relationships with 20-30 relevant VCs</li>
                        <li>Prepare detailed metrics deck and data room</li>
                        <li>Target 18-24 months runway with raise</li>
                    </ul>`;
            } else if (goal === 'strategic') {
                recommendation = `<strong>Recommended: Strategic Partnership or Corporate VC</strong><br><br>
                    For strategic goals, consider corporate venture arms or strategic partnerships that provide
                    both capital and market access.
                    <br><br><strong>Next Steps:</strong>
                    <ul>
                        <li>Identify 5-10 potential strategic partners</li>
                        <li>Develop partnership proposal with clear value prop</li>
                        <li>Consider warm intros through advisors or investors</li>
                    </ul>`;
            } else {
                recommendation = `<strong>Recommended: Bootstrap or Extend Runway</strong><br><br>
                    Given your current position, consider extending runway through operational efficiency
                    before raising. This will improve your negotiating position.
                    <br><br><strong>Next Steps:</strong>
                    <ul>
                        <li>Review and reduce burn rate where possible</li>
                        <li>Focus on revenue growth and retention</li>
                        <li>Build relationships with investors for future raise</li>
                    </ul>`;
            }

            document.getElementById('fundingRecommendation').innerHTML = recommendation;
            document.getElementById('fundingResult').style.display = 'block';
        }

        function resetFundingTree() {
            Object.keys(fundingAnswers).forEach(k => delete fundingAnswers[k]);

            document.querySelectorAll('#fundingTree .decision-node').forEach((node, i) => {
                node.classList.remove('completed', 'current');
                if (i === 0) {
                    node.classList.add('current');
                    node.style.display = 'block';
                } else {
                    node.style.display = 'none';
                }
            });

            document.querySelectorAll('#fundingTree .decision-btn').forEach(btn => {
                btn.classList.remove('selected');
            });

            document.getElementById('fundingResult').style.display = 'none';
        }

        function selectGTM(question, answer) {
            gtmAnswers[question] = answer;

            document.getElementById('gtmQ' + question).classList.remove('current');
            document.getElementById('gtmQ' + question).classList.add('completed');

            const buttons = document.getElementById('gtmQ' + question).querySelectorAll('.decision-btn');
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');

            if (question < 3) {
                const next = document.getElementById('gtmQ' + (question + 1));
                next.style.display = 'block';
                next.classList.add('current');
            } else {
                showGTMRecommendation();
            }
        }

        function showGTMRecommendation() {
            const { 1: customer, 2: dealSize, 3: team } = gtmAnswers;

            let recommendation = '';

            if (customer === 'consumer' && dealSize === 'low') {
                recommendation = `<strong>Recommended: Product-Led Growth (PLG)</strong><br><br>
                    For B2C with low price points, focus on viral growth and self-service conversion.
                    <br><br><strong>Key Tactics:</strong>
                    <ul>
                        <li>Free tier or freemium model</li>
                        <li>In-product referral mechanics</li>
                        <li>Content marketing and SEO</li>
                        <li>Social media and community building</li>
                        <li>App store optimization if applicable</li>
                    </ul>
                    <strong>Metrics to Track:</strong> CAC, activation rate, viral coefficient, retention`;
            } else if (customer === 'enterprise' || dealSize === 'high') {
                recommendation = `<strong>Recommended: Sales-Led Motion</strong><br><br>
                    For enterprise or high-ACV deals, invest in a sales team and relationship building.
                    <br><br><strong>Key Tactics:</strong>
                    <ul>
                        <li>Hire SDRs and AEs as budget allows</li>
                        <li>Build a robust sales playbook</li>
                        <li>Invest in case studies and ROI calculators</li>
                        <li>Attend industry events and conferences</li>
                        <li>Develop partner channel</li>
                    </ul>
                    <strong>Metrics to Track:</strong> Pipeline value, win rate, sales cycle length, CAC payback`;
            } else if (customer === 'smb' && team === 'solo') {
                recommendation = `<strong>Recommended: Founder-Led Sales + Content</strong><br><br>
                    As a solo founder targeting SMB, combine direct outreach with content marketing.
                    <br><br><strong>Key Tactics:</strong>
                    <ul>
                        <li>Personal outreach on LinkedIn</li>
                        <li>Build in public on Twitter/X</li>
                        <li>Create educational content (blog, video, podcast)</li>
                        <li>Leverage directories and marketplaces</li>
                        <li>Partner with complementary tools</li>
                    </ul>
                    <strong>Metrics to Track:</strong> Outreach response rate, content traffic, demo conversion`;
            } else {
                recommendation = `<strong>Recommended: Hybrid PLG + Sales Assist</strong><br><br>
                    For SMB with medium deal sizes, combine self-service with light-touch sales.
                    <br><br><strong>Key Tactics:</strong>
                    <ul>
                        <li>Self-service signup with trial</li>
                        <li>In-app upgrade prompts</li>
                        <li>Sales assist for larger accounts</li>
                        <li>Automated email nurture sequences</li>
                        <li>Webinars and demos for education</li>
                    </ul>
                    <strong>Metrics to Track:</strong> Trial-to-paid conversion, expansion revenue, NPS`;
            }

            document.getElementById('gtmRecommendation').innerHTML = recommendation;
            document.getElementById('gtmResult').style.display = 'block';
        }

        function resetGTMTree() {
            Object.keys(gtmAnswers).forEach(k => delete gtmAnswers[k]);

            document.querySelectorAll('#gtmTree .decision-node').forEach((node, i) => {
                node.classList.remove('completed', 'current');
                if (i === 0) {
                    node.classList.add('current');
                    node.style.display = 'block';
                } else {
                    node.style.display = 'none';
                }
            });

            document.querySelectorAll('#gtmTree .decision-btn').forEach(btn => {
                btn.classList.remove('selected');
            });

            document.getElementById('gtmResult').style.display = 'none';
        }

        function buildCustomTree() {
            const question = document.getElementById('customQuestion').value;
            const optionA = document.getElementById('optionA').value;
            const optionB = document.getElementById('optionB').value;

            if (!question || !optionA || !optionB) {
                alert('Please fill in all fields');
                return;
            }

            const output = document.getElementById('customTreeOutput');
            output.innerHTML = `
                <div class="decision-tree">
                    <div class="decision-node current">
                        <h4>${question}</h4>
                        <div class="decision-options">
                            <button class="decision-btn" onclick="this.classList.toggle('selected')">${optionA}</button>
                            <button class="decision-btn" onclick="this.classList.toggle('selected')">${optionB}</button>
                        </div>
                    </div>
                    <div style="margin-top: 1rem; padding: 1rem; background: var(--gray-100); border-radius: 8px;">
                        <strong>Decision Framework:</strong>
                        <p style="margin-top: 0.5rem;">Consider these factors when choosing:</p>
                        <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                            <li><strong>${optionA}:</strong> What are the risks? What resources are needed? What's the timeline?</li>
                            <li><strong>${optionB}:</strong> What are the risks? What resources are needed? What's the timeline?</li>
                        </ul>
                        <p style="margin-top: 0.5rem;">Add sub-questions above to build out your decision tree further.</p>
                    </div>
                </div>
            `;
        }

        // ============================================
        // ROADMAP & ALLOCATION
        // ============================================

        function addMilestone() {
            const timeline = document.getElementById('milestoneTimeline');
            const item = document.createElement('div');
            item.className = 'timeline-item';
            item.innerHTML = `
                <div class="timeline-content">
                    <div class="timeline-date" contenteditable="true">Q? 202?</div>
                    <strong contenteditable="true">New Milestone</strong>
                    <p contenteditable="true">Description of this milestone...</p>
                </div>
            `;
            timeline.appendChild(item);
        }

        function addOKR() {
            const container = document.getElementById('okrContainer');
            const okr = document.createElement('div');
            okr.className = 'okr-item';
            okr.style.cssText = 'background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;';
            okr.innerHTML = `
                <div class="input-group">
                    <label>Objective</label>
                    <input type="text" placeholder="What do you want to achieve?" oninput="saveData()">
                </div>
                <div class="input-group">
                    <label>Key Result 1</label>
                    <div style="display: flex; gap: 0.5rem;">
                        <input type="text" placeholder="Measurable outcome" style="flex: 2;" oninput="saveData()">
                        <input type="number" placeholder="Target" style="width: 100px;" oninput="saveData()">
                        <input type="number" placeholder="Current" style="width: 100px;" oninput="saveData()">
                    </div>
                </div>
                <div class="input-group">
                    <label>Key Result 2</label>
                    <div style="display: flex; gap: 0.5rem;">
                        <input type="text" placeholder="Measurable outcome" style="flex: 2;" oninput="saveData()">
                        <input type="number" placeholder="Target" style="width: 100px;" oninput="saveData()">
                        <input type="number" placeholder="Current" style="width: 100px;" oninput="saveData()">
                    </div>
                </div>
            `;
            container.appendChild(okr);
        }

        function updateAllocation() {
            const eng = parseInt(document.getElementById('engAlloc').value) || 0;
            const sales = parseInt(document.getElementById('salesAlloc').value) || 0;
            const ops = parseInt(document.getElementById('opsAlloc').value) || 0;
            const other = parseInt(document.getElementById('otherAlloc').value) || 0;

            const total = eng + sales + ops + other;
            const warning = document.getElementById('allocationWarning');
            warning.style.display = total !== 100 ? 'block' : 'none';

            const bar = document.getElementById('allocationBar');
            bar.innerHTML = `
                <div style="background: var(--primary); width: ${eng}%; transition: width 0.3s;" title="Engineering ${eng}%"></div>
                <div style="background: var(--success); width: ${sales}%; transition: width 0.3s;" title="Sales & Marketing ${sales}%"></div>
                <div style="background: var(--warning); width: ${ops}%; transition: width 0.3s;" title="Operations ${ops}%"></div>
                <div style="background: var(--gray-400); width: ${other}%; transition: width 0.3s;" title="Other ${other}%"></div>
            `;

            saveData();
        }

        // ============================================
        // RISK MANAGEMENT
        // ============================================

        function addRisk() {
            const register = document.getElementById('riskRegister');
            const entry = document.createElement('div');
            entry.className = 'risk-entry';
            entry.style.cssText = 'background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid var(--warning);';
            entry.innerHTML = `
                <div class="input-row">
                    <div class="input-group">
                        <label>Risk Description</label>
                        <input type="text" placeholder="Describe the risk..." oninput="saveData()">
                    </div>
                    <div class="input-group">
                        <label>Impact (1-5)</label>
                        <select oninput="saveData()">
                            <option>1 - Minimal</option>
                            <option>2 - Low</option>
                            <option selected>3 - Medium</option>
                            <option>4 - High</option>
                            <option>5 - Critical</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Likelihood (1-5)</label>
                        <select oninput="saveData()">
                            <option>1 - Very Low</option>
                            <option>2 - Low</option>
                            <option selected>3 - Medium</option>
                            <option>4 - High</option>
                            <option>5 - Very High</option>
                        </select>
                    </div>
                </div>
                <div class="input-group">
                    <label>Mitigation Strategy</label>
                    <textarea rows="2" placeholder="How will you mitigate this risk?" oninput="saveData()"></textarea>
                </div>
            `;
            register.appendChild(entry);
        }

        // Risk matrix click handling
        document.querySelectorAll('.risk-cell').forEach(cell => {
            cell.addEventListener('click', function() {
                const risk = prompt('Enter risk name:');
                if (risk) {
                    const marker = document.createElement('div');
                    marker.style.cssText = 'background: var(--gray-800); color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; margin: 2px;';
                    marker.textContent = risk;
                    marker.title = 'Click to remove';
                    marker.onclick = (e) => { e.stopPropagation(); marker.remove(); };
                    this.appendChild(marker);
                }
            });
        });

        // ============================================
        // EXPORT & IMPORT
        // ============================================

        function exportDocument() {
            const html = document.documentElement.outerHTML;
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'strategic-plan-' + new Date().toISOString().split('T')[0] + '.html';
            a.click();
            URL.revokeObjectURL(url);
        }

        function exportJSON() {
            const data = localStorage.getItem('livingDocument');
            if (!data) {
                alert('No data to export');
                return;
            }
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'strategic-data-' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function importJSON() {
            document.getElementById('importFile').click();
        }

        function handleImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    localStorage.setItem('livingDocument', JSON.stringify(data));
                    loadData();
                    alert('Data imported successfully!');
                } catch (err) {
                    alert('Error importing data: ' + err.message);
                }
            };
            reader.readAsText(file);
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                localStorage.removeItem('livingDocument');
                location.reload();
            }
        }

        // ============================================
        // INITIALIZATION
        // ============================================

        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            calculateFinancials();
            calculateGrowth();
            calculateBreakEven();
            calculateROI();
            updateScenarios();
            updateAllocation();
        });
    </script>
</body>
</html>
