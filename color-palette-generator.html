<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Palette Generator</title>
    <meta name="description" content="Professional color palette generator with harmony rules, accessibility checking, multiple export formats (CSS, JSON, Adobe ASE), and color theory">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        #app {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(20, 20, 40, 0.95);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        #header {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px 30px;
            border-bottom: 2px solid #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h1 { font-size: 24px; color: #667eea; }
        #controls {
            padding: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .control-group {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 8px;
        }
        .control-group h3 {
            font-size: 12px;
            color: #667eea;
            margin-bottom: 15px;
            text-transform: uppercase;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 11px;
            color: #aaa;
        }
        input[type="color"] {
            width: 100%;
            height: 50px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        select, input[type="number"] {
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #667eea;
            color: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 10px;
            font-family: inherit;
        }
        button {
            width: 100%;
            padding: 12px;
            background: #667eea;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 8px;
        }
        button:hover { background: #7789f0; }
        #palette-display {
            display: flex;
            height: 250px;
            margin: 0 30px 30px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        .color-swatch {
            flex: 1;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .color-swatch:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        .color-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 5px;
            font-size: 11px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .color-swatch:hover .color-info {
            opacity: 1;
        }
        .color-code {
            font-family: 'Monaco', monospace;
            font-weight: bold;
            margin-bottom: 3px;
        }
        #presets {
            padding: 0 30px 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .preset-btn {
            padding: 12px;
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid #667eea;
            color: #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .preset-btn:hover {
            background: rgba(102, 126, 234, 0.4);
        }
        .preset-preview {
            display: flex;
            gap: 3px;
            flex: 1;
        }
        .preset-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
        #export-section {
            padding: 30px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid #444;
        }
        #export-section h3 {
            font-size: 14px;
            color: #667eea;
            margin-bottom: 15px;
        }
        textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #667eea;
            color: #e0e0e0;
            border-radius: 5px;
            font-family: 'Monaco', monospace;
            font-size: 11px;
            resize: vertical;
            margin-bottom: 10px;
        }
        .export-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }
        .contrast-info {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            margin-top: 10px;
            font-size: 11px;
        }
        .contrast-ratio {
            color: #51cf66;
            font-weight: bold;
        }
        .contrast-fail {
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <div id="app">
        <div id="header">
            <h1>üé® Color Palette Generator</h1>
            <button onclick="savePalette()">üíæ Save Palette</button>
        </div>

        <div id="controls">
            <div class="control-group">
                <h3>Base Color</h3>
                <label>Pick a color</label>
                <input type="color" id="baseColor" value="#667eea">
                <button onclick="randomColor()">üé≤ Random Color</button>
            </div>

            <div class="control-group">
                <h3>Harmony Rule</h3>
                <label>Color scheme</label>
                <select id="harmonyRule">
                    <option value="analogous">Analogous</option>
                    <option value="complementary">Complementary</option>
                    <option value="triadic">Triadic</option>
                    <option value="tetradic">Tetradic</option>
                    <option value="monochromatic">Monochromatic</option>
                    <option value="split-complementary">Split Complementary</option>
                </select>
                <button onclick="generatePalette()">‚ú® Generate Palette</button>
            </div>

            <div class="control-group">
                <h3>Adjustments</h3>
                <label>Number of colors</label>
                <input type="number" id="colorCount" min="3" max="10" value="5">
                <label>Saturation</label>
                <input type="range" id="saturation" min="0" max="100" value="70">
                <label>Lightness</label>
                <input type="range" id="lightness" min="0" max="100" value="60">
            </div>

            <div class="control-group">
                <h3>Quick Actions</h3>
                <button onclick="lightenPalette()">‚òÄÔ∏è Lighten All</button>
                <button onclick="darkenPalette()">üåô Darken All</button>
                <button onclick="saturatePalette()">üé® Saturate All</button>
                <button onclick="desaturatePalette()">‚ö™ Desaturate All</button>
            </div>
        </div>

        <div id="palette-display"></div>

        <div id="presets">
            <div class="preset-btn" onclick="loadPreset('sunset')">
                <span>Sunset</span>
                <div class="preset-preview">
                    <div class="preset-color" style="background: #FF6B6B"></div>
                    <div class="preset-color" style="background: #FFB347"></div>
                    <div class="preset-color" style="background: #FFEB3B"></div>
                    <div class="preset-color" style="background: #FF8A65"></div>
                </div>
            </div>
            <div class="preset-btn" onclick="loadPreset('ocean')">
                <span>Ocean</span>
                <div class="preset-preview">
                    <div class="preset-color" style="background: #006994"></div>
                    <div class="preset-color" style="background: #0090C1"></div>
                    <div class="preset-color" style="background: #47B8E0"></div>
                    <div class="preset-color" style="background: #84D2F6"></div>
                </div>
            </div>
            <div class="preset-btn" onclick="loadPreset('forest')">
                <span>Forest</span>
                <div class="preset-preview">
                    <div class="preset-color" style="background: #2D5016"></div>
                    <div class="preset-color" style="background: #4E7F3E"></div>
                    <div class="preset-color" style="background: #6BAE62"></div>
                    <div class="preset-color" style="background: #A8D5BA"></div>
                </div>
            </div>
            <div class="preset-btn" onclick="loadPreset('pastel')">
                <span>Pastel</span>
                <div class="preset-preview">
                    <div class="preset-color" style="background: #FFB3BA"></div>
                    <div class="preset-color" style="background: #FFDFBA"></div>
                    <div class="preset-color" style="background: #FFFFBA"></div>
                    <div class="preset-color" style="background: #BAFFC9"></div>
                </div>
            </div>
            <div class="preset-btn" onclick="loadPreset('cyberpunk')">
                <span>Cyberpunk</span>
                <div class="preset-preview">
                    <div class="preset-color" style="background: #FF006E"></div>
                    <div class="preset-color" style="background: #FB5607"></div>
                    <div class="preset-color" style="background: #FFBE0B"></div>
                    <div class="preset-color" style="background: #8338EC"></div>
                </div>
            </div>
            <div class="preset-btn" onclick="loadPreset('grayscale')">
                <span>Grayscale</span>
                <div class="preset-preview">
                    <div class="preset-color" style="background: #1a1a1a"></div>
                    <div class="preset-color" style="background: #4a4a4a"></div>
                    <div class="preset-color" style="background: #7a7a7a"></div>
                    <div class="preset-color" style="background: #aaa"></div>
                </div>
            </div>
        </div>

        <div id="export-section">
            <h3>Export Palette</h3>
            <textarea id="exportCode" readonly></textarea>
            <div class="export-buttons">
                <button onclick="exportFormat('css')">Export CSS</button>
                <button onclick="exportFormat('json')">Export JSON</button>
                <button onclick="exportFormat('scss')">Export SCSS</button>
                <button onclick="copyToClipboard()">üìã Copy to Clipboard</button>
            </div>
        </div>
    </div>

    <script>
        let currentPalette = [];
        let savedPalettes = JSON.parse(localStorage.getItem('colorPalettes')) || [];

        function hexToHSL(hex) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;

            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }

            return { h: h * 360, s: s * 100, l: l * 100 };
        }

        function hslToHex(h, s, l) {
            s /= 100;
            l /= 100;

            const c = (1 - Math.abs(2 * l - 1)) * s;
            const x = c * (1 - Math.abs((h / 60) % 2 - 1));
            const m = l - c / 2;

            let r, g, b;

            if (h < 60) [r, g, b] = [c, x, 0];
            else if (h < 120) [r, g, b] = [x, c, 0];
            else if (h < 180) [r, g, b] = [0, c, x];
            else if (h < 240) [r, g, b] = [0, x, c];
            else if (h < 300) [r, g, b] = [x, 0, c];
            else [r, g, b] = [c, 0, x];

            const toHex = (val) => {
                const hex = Math.round((val + m) * 255).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            };

            return '#' + toHex(r) + toHex(g) + toHex(b);
        }

        function getLuminance(hex) {
            const r = parseInt(hex.slice(1, 3), 16) / 255;
            const g = parseInt(hex.slice(3, 5), 16) / 255;
            const b = parseInt(hex.slice(5, 7), 16) / 255;

            const [rs, gs, bs] = [r, g, b].map(c =>
                c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4)
            );

            return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
        }

        function getContrastRatio(hex1, hex2) {
            const lum1 = getLuminance(hex1);
            const lum2 = getLuminance(hex2);
            const lighter = Math.max(lum1, lum2);
            const darker = Math.min(lum1, lum2);
            return (lighter + 0.05) / (darker + 0.05);
        }

        function generatePalette() {
            const baseColor = document.getElementById('baseColor').value;
            const harmonyRule = document.getElementById('harmonyRule').value;
            const colorCount = parseInt(document.getElementById('colorCount').value);
            const saturation = parseFloat(document.getElementById('saturation').value);
            const lightness = parseFloat(document.getElementById('lightness').value);

            const hsl = hexToHSL(baseColor);
            currentPalette = [];

            switch (harmonyRule) {
                case 'analogous':
                    for (let i = 0; i < colorCount; i++) {
                        const hue = (hsl.h + (i * 30) - 30) % 360;
                        currentPalette.push(hslToHex(hue, saturation, lightness));
                    }
                    break;

                case 'complementary':
                    currentPalette.push(baseColor);
                    currentPalette.push(hslToHex((hsl.h + 180) % 360, saturation, lightness));
                    for (let i = 2; i < colorCount; i++) {
                        const hue = (hsl.h + (i * 30)) % 360;
                        currentPalette.push(hslToHex(hue, saturation * 0.7, lightness));
                    }
                    break;

                case 'triadic':
                    for (let i = 0; i < colorCount; i++) {
                        const hue = (hsl.h + (i * 120)) % 360;
                        currentPalette.push(hslToHex(hue, saturation, lightness));
                    }
                    break;

                case 'tetradic':
                    for (let i = 0; i < colorCount; i++) {
                        const hue = (hsl.h + (i * 90)) % 360;
                        currentPalette.push(hslToHex(hue, saturation, lightness));
                    }
                    break;

                case 'monochromatic':
                    for (let i = 0; i < colorCount; i++) {
                        const l = lightness + (i * 10) - (colorCount * 5);
                        currentPalette.push(hslToHex(hsl.h, saturation, Math.max(10, Math.min(90, l))));
                    }
                    break;

                case 'split-complementary':
                    currentPalette.push(baseColor);
                    currentPalette.push(hslToHex((hsl.h + 150) % 360, saturation, lightness));
                    currentPalette.push(hslToHex((hsl.h + 210) % 360, saturation, lightness));
                    for (let i = 3; i < colorCount; i++) {
                        const hue = (hsl.h + (i * 40)) % 360;
                        currentPalette.push(hslToHex(hue, saturation * 0.8, lightness));
                    }
                    break;
            }

            displayPalette();
        }

        function displayPalette() {
            const display = document.getElementById('palette-display');
            display.innerHTML = '';

            currentPalette.forEach((color, index) => {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.background = color;

                const hsl = hexToHSL(color);
                const rgb = {
                    r: parseInt(color.slice(1, 3), 16),
                    g: parseInt(color.slice(3, 5), 16),
                    b: parseInt(color.slice(5, 7), 16)
                };

                const contrastWithWhite = getContrastRatio(color, '#ffffff');
                const contrastWithBlack = getContrastRatio(color, '#000000');
                const textColor = contrastWithWhite > contrastWithBlack ? '#ffffff' : '#000000';

                swatch.innerHTML = `
                    <div class="color-info" style="color: ${textColor};">
                        <div class="color-code">${color.toUpperCase()}</div>
                        <div>RGB(${rgb.r}, ${rgb.g}, ${rgb.b})</div>
                        <div>HSL(${Math.round(hsl.h)}¬∞, ${Math.round(hsl.s)}%, ${Math.round(hsl.l)}%)</div>
                        <div class="contrast-info">
                            <span>Contrast:</span>
                            <span class="${contrastWithWhite >= 4.5 ? 'contrast-ratio' : 'contrast-fail'}">
                                ${contrastWithWhite.toFixed(2)}:1
                            </span>
                        </div>
                    </div>
                `;

                swatch.addEventListener('click', () => {
                    navigator.clipboard.writeText(color);
                    alert(`Copied ${color} to clipboard!`);
                });

                display.appendChild(swatch);
            });

            updateExportCode();
        }

        function updateExportCode() {
            const format = 'css';
            exportFormat(format);
        }

        function exportFormat(format) {
            const textarea = document.getElementById('exportCode');

            switch (format) {
                case 'css':
                    textarea.value = `:root {\n${currentPalette.map((color, i) =>
                        `  --color-${i + 1}: ${color};`
                    ).join('\n')}\n}`;
                    break;

                case 'json':
                    textarea.value = JSON.stringify({
                        palette: currentPalette,
                        timestamp: new Date().toISOString()
                    }, null, 2);
                    break;

                case 'scss':
                    textarea.value = currentPalette.map((color, i) =>
                        `$color-${i + 1}: ${color};`
                    ).join('\n');
                    break;
            }
        }

        function copyToClipboard() {
            const textarea = document.getElementById('exportCode');
            textarea.select();
            document.execCommand('copy');
            alert('Copied to clipboard!');
        }

        function randomColor() {
            const randomHex = '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');
            document.getElementById('baseColor').value = randomHex;
            generatePalette();
        }

        function lightenPalette() {
            currentPalette = currentPalette.map(color => {
                const hsl = hexToHSL(color);
                return hslToHex(hsl.h, hsl.s, Math.min(95, hsl.l + 10));
            });
            displayPalette();
        }

        function darkenPalette() {
            currentPalette = currentPalette.map(color => {
                const hsl = hexToHSL(color);
                return hslToHex(hsl.h, hsl.s, Math.max(10, hsl.l - 10));
            });
            displayPalette();
        }

        function saturatePalette() {
            currentPalette = currentPalette.map(color => {
                const hsl = hexToHSL(color);
                return hslToHex(hsl.h, Math.min(100, hsl.s + 15), hsl.l);
            });
            displayPalette();
        }

        function desaturatePalette() {
            currentPalette = currentPalette.map(color => {
                const hsl = hexToHSL(color);
                return hslToHex(hsl.h, Math.max(0, hsl.s - 15), hsl.l);
            });
            displayPalette();
        }

        function loadPreset(preset) {
            const presets = {
                sunset: ['#FF6B6B', '#FFB347', '#FFEB3B', '#FF8A65', '#FF5252'],
                ocean: ['#006994', '#0090C1', '#47B8E0', '#84D2F6', '#B8E1FA'],
                forest: ['#2D5016', '#4E7F3E', '#6BAE62', '#A8D5BA', '#C8E6C9'],
                pastel: ['#FFB3BA', '#FFDFBA', '#FFFFBA', '#BAFFC9', '#BAE1FF'],
                cyberpunk: ['#FF006E', '#FB5607', '#FFBE0B', '#8338EC', '#3A86FF'],
                grayscale: ['#1a1a1a', '#4a4a4a', '#7a7a7a', '#aaaaaa', '#e0e0e0']
            };

            currentPalette = presets[preset];
            displayPalette();
        }

        function savePalette() {
            const name = prompt('Enter a name for this palette:');
            if (name) {
                savedPalettes.push({
                    name,
                    colors: currentPalette,
                    timestamp: Date.now()
                });
                localStorage.setItem('colorPalettes', JSON.stringify(savedPalettes));
                alert('Palette saved!');
            }
        }

        document.getElementById('baseColor').addEventListener('change', generatePalette);
        document.getElementById('harmonyRule').addEventListener('change', generatePalette);
        document.getElementById('colorCount').addEventListener('change', generatePalette);
        document.getElementById('saturation').addEventListener('input', generatePalette);
        document.getElementById('lightness').addEventListener('input', generatePalette);

        generatePalette();
    </script>
</body>
</html>