<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WoWmon Detail View System - Agent 4 Deliverable</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: monospace;
            background: #2d2d2d;
            color: #333;
            padding: 20px;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            background: #8b956d;
            padding: 20px;
            border-radius: 15px;
        }

        h1, h2, h3 {
            color: #0f380f;
            margin-bottom: 15px;
        }

        .demo-controls {
            margin-bottom: 20px;
            padding: 15px;
            background: #9bbc0f;
            border-radius: 8px;
        }

        .demo-controls button {
            background: #4a5a3a;
            color: #8b956d;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-family: monospace;
            font-weight: bold;
        }

        .demo-controls button:hover {
            background: #306230;
        }

        /* ==================================== */
        /* POKEMON DETAIL MODAL - MAIN STYLES  */
        /* ==================================== */

        .pokemon-detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
        }

        .pokemon-detail-modal.active {
            display: flex;
        }

        .detail-panel {
            background: #9bbc0f;
            border: 8px solid #0f380f;
            border-radius: 15px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        /* Header */
        .detail-header {
            background: #0f380f;
            color: #9bbc0f;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .detail-header h2 {
            color: #9bbc0f;
            margin: 0;
            font-size: 24px;
        }

        .detail-header .pokemon-number {
            font-size: 14px;
            opacity: 0.7;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .icon-btn {
            background: #306230;
            border: 2px solid #9bbc0f;
            color: #9bbc0f;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .icon-btn:hover {
            background: #556b2f;
            transform: scale(1.1);
        }

        .icon-btn.favorite.active {
            background: #ff6b6b;
            border-color: #ff6b6b;
        }

        .icon-btn.close {
            background: #8b0000;
            border-color: #ff6b6b;
        }

        /* Navigation Arrows */
        .nav-arrows {
            display: flex;
            gap: 5px;
        }

        .nav-arrow {
            background: #306230;
            border: 2px solid #9bbc0f;
            color: #9bbc0f;
            width: 35px;
            height: 35px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-arrow:hover {
            background: #556b2f;
        }

        /* Tab Navigation */
        .tab-nav {
            background: #8bac0f;
            display: flex;
            border-bottom: 4px solid #0f380f;
            overflow-x: auto;
        }

        .tab-btn {
            background: transparent;
            border: none;
            color: #0f380f;
            padding: 15px 20px;
            cursor: pointer;
            font-family: monospace;
            font-weight: bold;
            font-size: 14px;
            border-bottom: 4px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab-btn:hover {
            background: rgba(15, 56, 15, 0.1);
        }

        .tab-btn.active {
            background: #9bbc0f;
            border-bottom-color: #0f380f;
        }

        /* Tab Content */
        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #9bbc0f;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        /* Overview Tab */
        .overview-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
        }

        .pokemon-sprite-large {
            background: #8bac0f;
            border: 4px solid #0f380f;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }

        .sprite-placeholder {
            width: 150px;
            height: 150px;
            background: #556b2f;
            border: 4px solid #0f380f;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: #0f380f;
        }

        .pokemon-info {
            background: #8bac0f;
            border: 4px solid #0f380f;
            border-radius: 10px;
            padding: 20px;
        }

        .info-row {
            margin-bottom: 15px;
        }

        .info-label {
            font-weight: bold;
            color: #0f380f;
            margin-bottom: 5px;
        }

        .type-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .type-badge {
            background: #0f380f;
            color: #9bbc0f;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .type-badge.water { background: #4a90e2; }
        .type-badge.fire { background: #e74c3c; }
        .type-badge.nature { background: #27ae60; }
        .type-badge.beast { background: #795548; }
        .type-badge.magic { background: #9b59b6; }
        .type-badge.shadow { background: #34495e; }
        .type-badge.demon { background: #8b0000; }
        .type-badge.spirit { background: #ecf0f1; color: #2c3e50; }
        .type-badge.earth { background: #d35400; }
        .type-badge.ice { background: #3498db; }
        .type-badge.electric { background: #f1c40f; color: #2c3e50; }

        .description {
            background: rgba(15, 56, 15, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #0f380f;
            margin-top: 15px;
            font-style: italic;
            line-height: 1.6;
        }

        /* Stats Tab */
        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .radar-chart-container {
            background: #8bac0f;
            border: 4px solid #0f380f;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #statsRadarCanvas {
            max-width: 100%;
            height: auto;
        }

        .stats-bars {
            background: #8bac0f;
            border: 4px solid #0f380f;
            border-radius: 10px;
            padding: 20px;
        }

        .stat-row {
            margin-bottom: 15px;
        }

        .stat-name {
            font-weight: bold;
            color: #0f380f;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }

        .stat-bar {
            background: #556b2f;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #0f380f;
        }

        .stat-bar-fill {
            height: 100%;
            background: #0f380f;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 5px;
            color: #9bbc0f;
            font-size: 11px;
            font-weight: bold;
        }

        .stat-bar-fill.excellent { background: #27ae60; }
        .stat-bar-fill.good { background: #2ecc71; }
        .stat-bar-fill.average { background: #f39c12; }
        .stat-bar-fill.low { background: #e74c3c; }

        .base-stat-total {
            margin-top: 20px;
            padding: 15px;
            background: #0f380f;
            color: #9bbc0f;
            border-radius: 8px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }

        /* Moves Tab */
        .moves-section {
            margin-bottom: 30px;
        }

        .moves-section h3 {
            margin-bottom: 15px;
            color: #0f380f;
            border-bottom: 3px solid #0f380f;
            padding-bottom: 10px;
        }

        .moves-filter {
            margin-bottom: 20px;
            padding: 15px;
            background: #8bac0f;
            border: 4px solid #0f380f;
            border-radius: 10px;
        }

        .moves-filter input {
            width: 100%;
            padding: 10px;
            border: 2px solid #0f380f;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
        }

        .moves-grid {
            display: grid;
            gap: 10px;
        }

        .move-card {
            background: #8bac0f;
            border: 3px solid #0f380f;
            border-radius: 8px;
            padding: 15px;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
            gap: 10px;
            align-items: center;
        }

        .move-name {
            font-weight: bold;
            color: #0f380f;
        }

        .move-type {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 12px;
            background: #0f380f;
            color: #9bbc0f;
            text-align: center;
        }

        .move-category {
            font-size: 11px;
            text-align: center;
        }

        .move-stat {
            text-align: center;
            font-size: 12px;
        }

        /* Evolution Tab */
        .evolution-chain {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            padding: 20px;
        }

        .evolution-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .evolution-sprite {
            background: #8bac0f;
            border: 4px solid #0f380f;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 150px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .evolution-sprite:hover {
            transform: scale(1.05);
            border-color: #306230;
            background: #9bbc0f;
        }

        .evolution-sprite.current {
            border-color: #ff6b6b;
            border-width: 6px;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }

        .evolution-arrow {
            font-size: 36px;
            color: #0f380f;
        }

        .evolution-condition {
            background: #0f380f;
            color: #9bbc0f;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            text-align: center;
            margin-top: 10px;
        }

        .evolution-name {
            font-weight: bold;
            color: #0f380f;
            font-size: 14px;
            text-align: center;
        }

        .no-evolution {
            padding: 40px;
            text-align: center;
            color: #0f380f;
            font-size: 18px;
        }

        /* Abilities Tab */
        .abilities-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .ability-card {
            background: #8bac0f;
            border: 4px solid #0f380f;
            border-radius: 10px;
            padding: 20px;
        }

        .ability-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .ability-name {
            font-weight: bold;
            color: #0f380f;
            font-size: 18px;
        }

        .ability-tag {
            background: #0f380f;
            color: #9bbc0f;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: bold;
        }

        .ability-description {
            color: #0f380f;
            line-height: 1.6;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .overview-grid,
            .stats-container {
                grid-template-columns: 1fr;
            }

            .tab-nav {
                overflow-x: auto;
            }

            .move-card {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .evolution-chain {
                flex-direction: column;
            }

            .evolution-arrow {
                transform: rotate(90deg);
            }
        }

        /* Code Display */
        .code-section {
            background: #2d2d2d;
            border: 4px solid #0f380f;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .code-section h3 {
            color: #9bbc0f;
            margin-bottom: 15px;
        }

        .code-section pre {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            color: #9bbc0f;
            font-size: 12px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>WoWmon Detail View System</h1>
        <h2>Agent 4 - Detail View Specialist</h2>

        <div class="demo-controls">
            <h3>Demo Controls - Try Different Pokemon</h3>
            <button onclick="showPokemonDetail('murloc')">Show Murloc</button>
            <button onclick="showPokemonDetail('murloc_warrior')">Show Murloc Warrior</button>
            <button onclick="showPokemonDetail('murloc_king')">Show Murloc King</button>
            <button onclick="showPokemonDetail('wolf')">Show Wolf</button>
            <button onclick="showPokemonDetail('imp')">Show Imp</button>
            <button onclick="showPokemonDetail('wisp')">Show Wisp</button>
        </div>

        <div class="code-section">
            <h3>Integration Instructions</h3>
            <pre>
// 1. Copy the CSS styles (lines marked "POKEMON DETAIL MODAL") to your wowMon.html &lt;style&gt; section

// 2. Copy the HTML structure (pokemon-detail-modal) to your wowMon.html body

// 3. Copy all JavaScript functions to your wowMon.html &lt;script&gt; section:
//    - showPokemonDetail(pokemonId)
//    - closePokemonDetail()
//    - switchTab(tabName)
//    - drawStatsRadarChart(stats)
//    - renderEvolutionChain(pokemon)
//    - renderMovesList(pokemon)
//    - navigatePokemon(direction)
//    - toggleFavorite(pokemonId)
//    - addToTeam(pokemonId)
//    - sharePokemon(pokemonId)

// 4. Use the CREATURES data from your existing cartridge
//    The system automatically reads from: game.cartridge.creatures

// 5. To open detail view from anywhere in your game:
showPokemonDetail('murloc');  // Pass any creature ID
            </pre>
        </div>
    </div>

    <!-- ================================== -->
    <!-- POKEMON DETAIL MODAL HTML         -->
    <!-- ================================== -->
    <div class="pokemon-detail-modal" id="pokemonDetailModal">
        <div class="detail-panel">
            <!-- Header -->
            <div class="detail-header">
                <div>
                    <h2 id="detailPokemonName">POKEMON NAME</h2>
                    <span class="pokemon-number" id="detailPokemonNumber">#001</span>
                </div>
                <div style="display: flex; gap: 15px; align-items: center;">
                    <div class="nav-arrows">
                        <button class="nav-arrow" onclick="navigatePokemon(-1)" title="Previous Pokemon">◄</button>
                        <button class="nav-arrow" onclick="navigatePokemon(1)" title="Next Pokemon">►</button>
                    </div>
                    <div class="header-actions">
                        <button class="icon-btn favorite" id="favoriteBtn" onclick="toggleFavorite()" title="Add to Favorites">★</button>
                        <button class="icon-btn" onclick="addToTeam()" title="Add to Team">+</button>
                        <button class="icon-btn" onclick="sharePokemon()" title="Share">↗</button>
                        <button class="icon-btn close" onclick="closePokemonDetail()" title="Close">✕</button>
                    </div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-nav">
                <button class="tab-btn active" onclick="switchTab('overview')">Overview</button>
                <button class="tab-btn" onclick="switchTab('stats')">Stats</button>
                <button class="tab-btn" onclick="switchTab('moves')">Moves</button>
                <button class="tab-btn" onclick="switchTab('evolution')">Evolution</button>
                <button class="tab-btn" onclick="switchTab('abilities')">Abilities</button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Overview Tab -->
                <div class="tab-pane active" id="overview-tab">
                    <div class="overview-grid">
                        <div class="pokemon-sprite-large">
                            <div class="sprite-placeholder" id="detailSprite">?</div>
                        </div>
                        <div class="pokemon-info">
                            <div class="info-row">
                                <div class="info-label">Type</div>
                                <div class="type-badges" id="detailTypes"></div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Height</div>
                                <div id="detailHeight">Unknown</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Weight</div>
                                <div id="detailWeight">Unknown</div>
                            </div>
                            <div class="description" id="detailDescription">
                                No description available.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Tab -->
                <div class="tab-pane" id="stats-tab">
                    <div class="stats-container">
                        <div class="radar-chart-container">
                            <h3>Stat Distribution</h3>
                            <canvas id="statsRadarCanvas" width="300" height="300"></canvas>
                        </div>
                        <div class="stats-bars">
                            <h3>Base Stats</h3>
                            <div id="statsBarsList"></div>
                            <div class="base-stat-total" id="baseStatTotal">
                                Base Stat Total: 0
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Moves Tab -->
                <div class="tab-pane" id="moves-tab">
                    <div class="moves-section">
                        <h3>Learnable Moves</h3>
                        <div class="moves-filter">
                            <input type="text" id="movesSearch" placeholder="Search moves..." onkeyup="filterMoves()">
                        </div>
                        <div class="moves-grid" id="movesList"></div>
                    </div>
                </div>

                <!-- Evolution Tab -->
                <div class="tab-pane" id="evolution-tab">
                    <h3 style="text-align: center; margin-bottom: 30px;">Evolution Chain</h3>
                    <div class="evolution-chain" id="evolutionChain"></div>
                </div>

                <!-- Abilities Tab -->
                <div class="tab-pane" id="abilities-tab">
                    <h3>Abilities</h3>
                    <div class="abilities-list" id="abilitiesList"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ================================
        // POKEMON DETAIL VIEW SYSTEM
        // ================================

        // Mock data for demo (replace with game.cartridge.creatures in actual implementation)
        const MOCK_CREATURES = {
            "murloc": {
                "id": "murloc",
                "name": "MURLOC",
                "type": ["water", "beast"],
                "baseHp": 45,
                "baseAttack": 49,
                "baseDefense": 49,
                "baseSpeed": 45,
                "baseSpAttack": 43,
                "baseSpDefense": 45,
                "evolveLevel": 16,
                "evolveTo": "murloc_warrior",
                "moves": ["tackle", "bubble", "water_gun", "bite"],
                "description": "The amphibious Murloc makes strange gurgling sounds."
            },
            "murloc_warrior": {
                "id": "murloc_warrior",
                "name": "MURLOCWARRIOR",
                "type": ["water", "beast"],
                "baseHp": 60,
                "baseAttack": 62,
                "baseDefense": 63,
                "baseSpeed": 60,
                "baseSpAttack": 58,
                "baseSpDefense": 60,
                "evolveLevel": 32,
                "evolveTo": "murloc_king",
                "evolveFrom": "murloc",
                "moves": ["tackle", "bubble", "water_gun", "bite", "slash"],
                "description": "Armed with a spear, this Murloc has mastered combat."
            },
            "murloc_king": {
                "id": "murloc_king",
                "name": "MURLOCKING",
                "type": ["water", "beast", "magic"],
                "baseHp": 80,
                "baseAttack": 82,
                "baseDefense": 83,
                "baseSpeed": 80,
                "baseSpAttack": 95,
                "baseSpDefense": 88,
                "evolveLevel": null,
                "evolveTo": null,
                "evolveFrom": "murloc_warrior",
                "moves": ["hydro_pump", "ice_beam", "thunderbolt", "recover"],
                "description": "The ruler of all Murlocs, commanding both sea and magic."
            },
            "wolf": {
                "id": "wolf",
                "name": "WOLF",
                "type": ["beast"],
                "baseHp": 50,
                "baseAttack": 65,
                "baseDefense": 50,
                "baseSpeed": 65,
                "baseSpAttack": 35,
                "baseSpDefense": 45,
                "evolveLevel": 30,
                "evolveTo": "dire_wolf",
                "moves": ["bite", "howl", "quick_attack", "tackle"],
                "description": "A loyal predator of the wild."
            },
            "dire_wolf": {
                "id": "dire_wolf",
                "name": "DIREWOLF",
                "type": ["beast", "shadow"],
                "baseHp": 75,
                "baseAttack": 90,
                "baseDefense": 70,
                "baseSpeed": 85,
                "baseSpAttack": 45,
                "baseSpDefense": 60,
                "evolveLevel": null,
                "evolveTo": null,
                "evolveFrom": "wolf",
                "moves": ["crunch", "shadow_claw", "ice_fang", "iron_tail"],
                "description": "An alpha predator with supernatural strength."
            },
            "imp": {
                "id": "imp",
                "name": "IMP",
                "type": ["fire", "demon"],
                "baseHp": 40,
                "baseAttack": 55,
                "baseDefense": 35,
                "baseSpeed": 55,
                "baseSpAttack": 65,
                "baseSpDefense": 40,
                "evolveLevel": 20,
                "evolveTo": "felguard",
                "moves": ["firebolt", "scratch", "ember", "confuse_ray"],
                "description": "A mischievous demon that loves to cause chaos."
            },
            "felguard": {
                "id": "felguard",
                "name": "FELGUARD",
                "type": ["fire", "demon"],
                "baseHp": 70,
                "baseAttack": 85,
                "baseDefense": 65,
                "baseSpeed": 65,
                "baseSpAttack": 90,
                "baseSpDefense": 70,
                "evolveLevel": null,
                "evolveTo": null,
                "evolveFrom": "imp",
                "moves": ["inferno", "shadow_ball", "drain_life", "dark_pulse"],
                "description": "A powerful demon warrior from the Burning Legion."
            },
            "wisp": {
                "id": "wisp",
                "name": "WISP",
                "type": ["nature", "spirit"],
                "baseHp": 40,
                "baseAttack": 30,
                "baseDefense": 35,
                "baseSpeed": 70,
                "baseSpAttack": 75,
                "baseSpDefense": 55,
                "evolveLevel": 18,
                "evolveTo": "ancient_wisp",
                "moves": ["glow", "nature_power", "sleep_powder", "magical_leaf"],
                "description": "A spirit of the forest that glows with ethereal light."
            },
            "ancient_wisp": {
                "id": "ancient_wisp",
                "name": "ANCIENTWISP",
                "type": ["nature", "spirit"],
                "baseHp": 65,
                "baseAttack": 65,
                "baseDefense": 65,
                "baseSpeed": 90,
                "baseSpAttack": 95,
                "baseSpDefense": 80,
                "evolveLevel": null,
                "evolveTo": null,
                "evolveFrom": "wisp",
                "moves": ["solar_beam", "heal_pulse", "energy_ball", "psychic"],
                "description": "An ancient forest spirit with immense natural power."
            }
        };

        const MOCK_MOVES = {
            "tackle": { "name": "Tackle", "power": 40, "accuracy": 100, "pp": 35, "type": "normal", "category": "physical" },
            "bubble": { "name": "Bubble", "power": 40, "accuracy": 100, "pp": 30, "type": "water", "category": "special" },
            "water_gun": { "name": "Water Gun", "power": 40, "accuracy": 100, "pp": 25, "type": "water", "category": "special" },
            "bite": { "name": "Bite", "power": 60, "accuracy": 100, "pp": 25, "type": "beast", "category": "physical" },
            "scratch": { "name": "Scratch", "power": 40, "accuracy": 100, "pp": 35, "type": "normal", "category": "physical" },
            "ember": { "name": "Ember", "power": 40, "accuracy": 100, "pp": 25, "type": "fire", "category": "special" },
            "firebolt": { "name": "Firebolt", "power": 50, "accuracy": 100, "pp": 20, "type": "fire", "category": "special" },
            "glow": { "name": "Glow", "power": 0, "accuracy": 100, "pp": 20, "type": "nature", "category": "status", "effect": "lower_accuracy" },
            "nature_power": { "name": "Nature Power", "power": 50, "accuracy": 100, "pp": 20, "type": "nature", "category": "special" },
            "howl": { "name": "Howl", "power": 0, "accuracy": 100, "pp": 40, "type": "beast", "category": "status", "effect": "raise_attack" },
            "hydro_pump": { "name": "Hydro Pump", "power": 110, "accuracy": 80, "pp": 5, "type": "water", "category": "special" },
            "ice_beam": { "name": "Ice Beam", "power": 90, "accuracy": 100, "pp": 10, "type": "ice", "category": "special" },
            "thunderbolt": { "name": "Thunderbolt", "power": 90, "accuracy": 100, "pp": 15, "type": "electric", "category": "special" },
            "recover": { "name": "Recover", "power": 0, "accuracy": 100, "pp": 10, "type": "normal", "category": "status", "effect": "heal" },
            "slash": { "name": "Slash", "power": 70, "accuracy": 100, "pp": 20, "type": "normal", "category": "physical" },
            "crunch": { "name": "Crunch", "power": 80, "accuracy": 100, "pp": 15, "type": "beast", "category": "physical" },
            "quick_attack": { "name": "Quick Attack", "power": 40, "accuracy": 100, "pp": 30, "type": "normal", "category": "physical", "priority": 1 },
            "shadow_claw": { "name": "Shadow Claw", "power": 70, "accuracy": 100, "pp": 15, "type": "shadow", "category": "physical" },
            "ice_fang": { "name": "Ice Fang", "power": 65, "accuracy": 95, "pp": 15, "type": "ice", "category": "physical" },
            "iron_tail": { "name": "Iron Tail", "power": 100, "accuracy": 75, "pp": 15, "type": "steel", "category": "physical" },
            "inferno": { "name": "Inferno", "power": 100, "accuracy": 50, "pp": 5, "type": "fire", "category": "special" },
            "shadow_ball": { "name": "Shadow Ball", "power": 80, "accuracy": 100, "pp": 15, "type": "shadow", "category": "special" },
            "drain_life": { "name": "Drain Life", "power": 75, "accuracy": 100, "pp": 10, "type": "shadow", "category": "special", "effect": "drain" },
            "dark_pulse": { "name": "Dark Pulse", "power": 80, "accuracy": 100, "pp": 15, "type": "shadow", "category": "special" },
            "confuse_ray": { "name": "Confuse Ray", "power": 0, "accuracy": 100, "pp": 10, "type": "magic", "category": "status", "effect": "confuse" },
            "sleep_powder": { "name": "Sleep Powder", "power": 0, "accuracy": 75, "pp": 15, "type": "nature", "category": "status", "effect": "sleep" },
            "magical_leaf": { "name": "Magical Leaf", "power": 60, "accuracy": 100, "pp": 20, "type": "nature", "category": "special" },
            "solar_beam": { "name": "Solar Beam", "power": 120, "accuracy": 100, "pp": 10, "type": "nature", "category": "special" },
            "heal_pulse": { "name": "Heal Pulse", "power": 0, "accuracy": 100, "pp": 10, "type": "nature", "category": "status", "effect": "heal" },
            "energy_ball": { "name": "Energy Ball", "power": 80, "accuracy": 100, "pp": 10, "type": "nature", "category": "special" },
            "psychic": { "name": "Psychic", "power": 90, "accuracy": 100, "pp": 10, "type": "magic", "category": "special" }
        };

        // State
        let currentPokemonId = null;
        let allPokemonIds = Object.keys(MOCK_CREATURES);
        let favorites = JSON.parse(localStorage.getItem('wowmon_favorites') || '[]');

        /**
         * Main function to show Pokemon detail view
         * @param {string} pokemonId - The ID of the Pokemon to display
         */
        function showPokemonDetail(pokemonId) {
            // In real implementation, use: const pokemon = game.cartridge.creatures[pokemonId];
            const pokemon = MOCK_CREATURES[pokemonId];

            if (!pokemon) {
                console.error('Pokemon not found:', pokemonId);
                return;
            }

            currentPokemonId = pokemonId;

            // Update header
            document.getElementById('detailPokemonName').textContent = pokemon.name;
            const pokemonIndex = allPokemonIds.indexOf(pokemonId) + 1;
            document.getElementById('detailPokemonNumber').textContent = `#${String(pokemonIndex).padStart(3, '0')}`;

            // Update favorite button
            const favoriteBtn = document.getElementById('favoriteBtn');
            if (favorites.includes(pokemonId)) {
                favoriteBtn.classList.add('active');
            } else {
                favoriteBtn.classList.remove('active');
            }

            // Populate overview tab
            populateOverviewTab(pokemon);

            // Populate stats tab
            populateStatsTab(pokemon);

            // Populate moves tab
            populateMovesTab(pokemon);

            // Populate evolution tab
            populateEvolutionTab(pokemon);

            // Populate abilities tab
            populateAbilitiesTab(pokemon);

            // Show modal
            document.getElementById('pokemonDetailModal').classList.add('active');

            // Reset to overview tab
            switchTab('overview');
        }

        /**
         * Close the Pokemon detail modal
         */
        function closePokemonDetail() {
            document.getElementById('pokemonDetailModal').classList.remove('active');
            currentPokemonId = null;
        }

        /**
         * Switch between tabs
         * @param {string} tabName - Name of the tab to switch to
         */
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update tab panes
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');

            // If switching to stats tab, redraw radar chart
            if (tabName === 'stats' && currentPokemonId) {
                const pokemon = MOCK_CREATURES[currentPokemonId];
                setTimeout(() => drawStatsRadarChart(pokemon), 100);
            }
        }

        /**
         * Populate the overview tab
         */
        function populateOverviewTab(pokemon) {
            // Sprite (using emoji or text placeholder)
            const spriteElement = document.getElementById('detailSprite');
            const spriteEmojis = {
                'murloc': '🐟', 'murloc_warrior': '🔱', 'murloc_king': '👑',
                'wolf': '🐺', 'dire_wolf': '🐺',
                'imp': '😈', 'felguard': '👹',
                'wisp': '✨', 'ancient_wisp': '🌟'
            };
            spriteElement.textContent = spriteEmojis[pokemon.id] || pokemon.name.substring(0, 1);

            // Types
            const typesContainer = document.getElementById('detailTypes');
            typesContainer.innerHTML = pokemon.type.map(type =>
                `<span class="type-badge ${type}">${type}</span>`
            ).join('');

            // Height and weight (mock data)
            document.getElementById('detailHeight').textContent = `${Math.floor(Math.random() * 20 + 10) / 10}m`;
            document.getElementById('detailWeight').textContent = `${Math.floor(Math.random() * 100 + 20)}kg`;

            // Description
            document.getElementById('detailDescription').textContent = pokemon.description;
        }

        /**
         * Populate the stats tab with radar chart and stat bars
         */
        function populateStatsTab(pokemon) {
            const stats = {
                hp: pokemon.baseHp || 50,
                attack: pokemon.baseAttack || 50,
                defense: pokemon.baseDefense || 50,
                spAttack: pokemon.baseSpAttack || 50,
                spDefense: pokemon.baseSpDefense || 50,
                speed: pokemon.baseSpeed || 50
            };

            // Draw radar chart
            drawStatsRadarChart(pokemon);

            // Create stat bars
            const statsBarsList = document.getElementById('statsBarsList');
            const statNames = {
                hp: 'HP',
                attack: 'Attack',
                defense: 'Defense',
                spAttack: 'Sp. Atk',
                spDefense: 'Sp. Def',
                speed: 'Speed'
            };

            let bst = 0;
            let html = '';

            for (const [key, label] of Object.entries(statNames)) {
                const value = stats[key];
                bst += value;
                const percentage = (value / 150) * 100; // Max stat assumed to be 150

                let colorClass = 'low';
                if (value >= 100) colorClass = 'excellent';
                else if (value >= 80) colorClass = 'good';
                else if (value >= 60) colorClass = 'average';

                html += `
                    <div class="stat-row">
                        <div class="stat-name">
                            <span>${label}</span>
                            <span>${value}</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill ${colorClass}" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            }

            statsBarsList.innerHTML = html;

            // Update BST
            document.getElementById('baseStatTotal').textContent = `Base Stat Total: ${bst}`;

            // Add percentile ranking (mock)
            const percentile = Math.floor((bst / 600) * 100);
            document.getElementById('baseStatTotal').innerHTML += `<br><small style="font-size: 14px;">Top ${100 - percentile}% of all Pokemon</small>`;
        }

        /**
         * Draw the stats radar chart on canvas
         */
        function drawStatsRadarChart(pokemon) {
            const canvas = document.getElementById('statsRadarCanvas');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 120;

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Stats data
            const stats = [
                { label: 'HP', value: pokemon.baseHp || 50 },
                { label: 'Attack', value: pokemon.baseAttack || 50 },
                { label: 'Defense', value: pokemon.baseDefense || 50 },
                { label: 'Sp.Atk', value: pokemon.baseSpAttack || 50 },
                { label: 'Sp.Def', value: pokemon.baseSpDefense || 50 },
                { label: 'Speed', value: pokemon.baseSpeed || 50 }
            ];

            const maxStat = 150; // Maximum stat value for scaling
            const numStats = stats.length;
            const angleStep = (Math.PI * 2) / numStats;

            // Draw grid circles
            ctx.strokeStyle = 'rgba(15, 56, 15, 0.2)';
            ctx.lineWidth = 1;
            for (let i = 1; i <= 5; i++) {
                ctx.beginPath();
                const r = (radius / 5) * i;
                for (let j = 0; j <= numStats; j++) {
                    const angle = angleStep * j - Math.PI / 2;
                    const x = centerX + Math.cos(angle) * r;
                    const y = centerY + Math.sin(angle) * r;
                    if (j === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            }

            // Draw axes
            ctx.strokeStyle = 'rgba(15, 56, 15, 0.3)';
            ctx.lineWidth = 1;
            for (let i = 0; i < numStats; i++) {
                const angle = angleStep * i - Math.PI / 2;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(
                    centerX + Math.cos(angle) * radius,
                    centerY + Math.sin(angle) * radius
                );
                ctx.stroke();
            }

            // Draw stat polygon
            ctx.fillStyle = 'rgba(74, 90, 58, 0.5)';
            ctx.strokeStyle = '#0f380f';
            ctx.lineWidth = 3;
            ctx.beginPath();

            for (let i = 0; i <= numStats; i++) {
                const stat = stats[i % numStats];
                const angle = angleStep * i - Math.PI / 2;
                const value = (stat.value / maxStat) * radius;
                const x = centerX + Math.cos(angle) * value;
                const y = centerY + Math.sin(angle) * value;

                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }

            ctx.closePath();
            ctx.fill();
            ctx.stroke();

            // Draw stat points
            ctx.fillStyle = '#0f380f';
            for (let i = 0; i < numStats; i++) {
                const stat = stats[i];
                const angle = angleStep * i - Math.PI / 2;
                const value = (stat.value / maxStat) * radius;
                const x = centerX + Math.cos(angle) * value;
                const y = centerY + Math.sin(angle) * value;

                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
            }

            // Draw labels
            ctx.fillStyle = '#0f380f';
            ctx.font = 'bold 14px monospace';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            for (let i = 0; i < numStats; i++) {
                const stat = stats[i];
                const angle = angleStep * i - Math.PI / 2;
                const labelRadius = radius + 30;
                const x = centerX + Math.cos(angle) * labelRadius;
                const y = centerY + Math.sin(angle) * labelRadius;

                ctx.fillText(stat.label, x, y);
            }
        }

        /**
         * Populate the moves tab
         */
        function populateMovesTab(pokemon) {
            const movesList = document.getElementById('movesList');
            let html = '';

            pokemon.moves.forEach(moveId => {
                // In real implementation: const move = game.cartridge.moves[moveId];
                const move = MOCK_MOVES[moveId] || {
                    name: moveId,
                    type: 'normal',
                    category: 'physical',
                    power: '-',
                    accuracy: '-',
                    pp: '-'
                };

                html += `
                    <div class="move-card">
                        <div class="move-name">${move.name}</div>
                        <div class="move-type type-badge ${move.type}">${move.type}</div>
                        <div class="move-category">${move.category || 'physical'}</div>
                        <div class="move-stat">PWR: ${move.power || '-'}</div>
                        <div class="move-stat">ACC: ${move.accuracy || '-'}</div>
                    </div>
                `;
            });

            movesList.innerHTML = html || '<p>No moves available.</p>';
        }

        /**
         * Filter moves based on search input
         */
        function filterMoves() {
            const searchTerm = document.getElementById('movesSearch').value.toLowerCase();
            const moveCards = document.querySelectorAll('.move-card');

            moveCards.forEach(card => {
                const moveName = card.querySelector('.move-name').textContent.toLowerCase();
                if (moveName.includes(searchTerm)) {
                    card.style.display = 'grid';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        /**
         * Populate the evolution tab with evolution chain
         */
        function populateEvolutionTab(pokemon) {
            const evolutionChain = document.getElementById('evolutionChain');

            // Build evolution chain
            const chain = buildEvolutionChain(pokemon);

            if (chain.length <= 1) {
                evolutionChain.innerHTML = '<div class="no-evolution">This Pokemon does not evolve.</div>';
                return;
            }

            let html = '';

            chain.forEach((stage, index) => {
                const stageData = MOCK_CREATURES[stage.id];
                const isCurrent = stage.id === currentPokemonId;

                const spriteEmojis = {
                    'murloc': '🐟', 'murloc_warrior': '🔱', 'murloc_king': '👑',
                    'wolf': '🐺', 'dire_wolf': '🐺',
                    'imp': '😈', 'felguard': '👹',
                    'wisp': '✨', 'ancient_wisp': '🌟'
                };

                html += `
                    <div class="evolution-stage">
                        <div class="evolution-sprite ${isCurrent ? 'current' : ''}" onclick="showPokemonDetail('${stage.id}')">
                            <div style="font-size: 48px;">${spriteEmojis[stage.id] || stageData.name[0]}</div>
                            <div class="evolution-name">${stageData.name}</div>
                        </div>
                        ${stage.condition ? `<div class="evolution-condition">${stage.condition}</div>` : ''}
                    </div>
                `;

                if (index < chain.length - 1) {
                    html += '<div class="evolution-arrow">→</div>';
                }
            });

            evolutionChain.innerHTML = html;
        }

        /**
         * Build the complete evolution chain for a Pokemon
         */
        function buildEvolutionChain(pokemon) {
            const chain = [];

            // Find the base form
            let currentId = pokemon.id;
            while (true) {
                const current = MOCK_CREATURES[currentId];
                if (!current || !current.evolveFrom) break;
                currentId = current.evolveFrom;
            }

            // Build chain from base
            while (currentId) {
                const current = MOCK_CREATURES[currentId];
                if (!current) break;

                let condition = '';
                if (current.evolveLevel) {
                    condition = `Level ${current.evolveLevel}`;
                } else if (current.evolveStone) {
                    condition = current.evolveStone;
                } else if (current.evolveMethod) {
                    condition = current.evolveMethod;
                }

                chain.push({
                    id: currentId,
                    condition: condition
                });

                currentId = current.evolveTo;
            }

            return chain;
        }

        /**
         * Populate the abilities tab
         */
        function populateAbilitiesTab(pokemon) {
            const abilitiesList = document.getElementById('abilitiesList');

            // Mock abilities based on type
            const typeAbilities = {
                'water': [
                    { name: 'Torrent', type: 'Normal', description: 'Powers up Water-type moves when the Pokemon\'s HP is low.' },
                    { name: 'Swift Swim', type: 'Hidden', description: 'Boosts the Pokemon\'s Speed stat in rain.' }
                ],
                'fire': [
                    { name: 'Blaze', type: 'Normal', description: 'Powers up Fire-type moves when the Pokemon\'s HP is low.' },
                    { name: 'Flash Fire', type: 'Hidden', description: 'Powers up the Pokemon\'s Fire-type moves if it\'s hit by one.' }
                ],
                'nature': [
                    { name: 'Overgrow', type: 'Normal', description: 'Powers up Nature-type moves when the Pokemon\'s HP is low.' },
                    { name: 'Chlorophyll', type: 'Hidden', description: 'Boosts the Pokemon\'s Speed stat in harsh sunlight.' }
                ],
                'beast': [
                    { name: 'Intimidate', type: 'Normal', description: 'Lowers opposing Pokemon\'s Attack stat when the Pokemon enters battle.' },
                    { name: 'Guts', type: 'Hidden', description: 'Boosts Attack if the Pokemon has a status condition.' }
                ],
                'demon': [
                    { name: 'Cursed Body', type: 'Normal', description: 'May disable a move used on the Pokemon.' },
                    { name: 'Pressure', type: 'Hidden', description: 'The Pokemon raises opposing Pokemon\'s PP usage.' }
                ],
                'spirit': [
                    { name: 'Levitate', type: 'Normal', description: 'Gives immunity to Ground-type moves.' },
                    { name: 'Prankster', type: 'Hidden', description: 'Gives priority to status moves.' }
                ],
                'magic': [
                    { name: 'Magic Guard', type: 'Normal', description: 'The Pokemon only takes damage from attacks.' },
                    { name: 'Magic Bounce', type: 'Hidden', description: 'Reflects status moves instead of being hit by them.' }
                ],
                'shadow': [
                    { name: 'Shadow Tag', type: 'Normal', description: 'Prevents opposing Pokemon from fleeing.' },
                    { name: 'Infiltrator', type: 'Hidden', description: 'Passes through the opposing Pokemon\'s barriers and substitutes.' }
                ]
            };

            // Get abilities based on primary type
            const primaryType = pokemon.type[0];
            const abilities = typeAbilities[primaryType] || [
                { name: 'Adaptability', type: 'Normal', description: 'Powers up moves of the same type as the Pokemon.' }
            ];

            let html = '';
            abilities.forEach(ability => {
                html += `
                    <div class="ability-card">
                        <div class="ability-header">
                            <div class="ability-name">${ability.name}</div>
                            <div class="ability-tag">${ability.type} Ability</div>
                        </div>
                        <div class="ability-description">${ability.description}</div>
                    </div>
                `;
            });

            abilitiesList.innerHTML = html;
        }

        /**
         * Navigate to previous/next Pokemon
         */
        function navigatePokemon(direction) {
            if (!currentPokemonId) return;

            const currentIndex = allPokemonIds.indexOf(currentPokemonId);
            let newIndex = currentIndex + direction;

            // Wrap around
            if (newIndex < 0) newIndex = allPokemonIds.length - 1;
            if (newIndex >= allPokemonIds.length) newIndex = 0;

            showPokemonDetail(allPokemonIds[newIndex]);
        }

        /**
         * Toggle favorite status for current Pokemon
         */
        function toggleFavorite() {
            if (!currentPokemonId) return;

            const favoriteBtn = document.getElementById('favoriteBtn');

            if (favorites.includes(currentPokemonId)) {
                favorites = favorites.filter(id => id !== currentPokemonId);
                favoriteBtn.classList.remove('active');
                alert(`${MOCK_CREATURES[currentPokemonId].name} removed from favorites!`);
            } else {
                favorites.push(currentPokemonId);
                favoriteBtn.classList.add('active');
                alert(`${MOCK_CREATURES[currentPokemonId].name} added to favorites!`);
            }

            localStorage.setItem('wowmon_favorites', JSON.stringify(favorites));
        }

        /**
         * Add Pokemon to team
         */
        function addToTeam() {
            if (!currentPokemonId) return;

            // In real implementation, add to game.player.creatures
            alert(`${MOCK_CREATURES[currentPokemonId].name} added to your team!`);
            console.log('Add to team:', currentPokemonId);
        }

        /**
         * Share Pokemon (copy URL with ID)
         */
        function sharePokemon() {
            if (!currentPokemonId) return;

            const url = `${window.location.origin}${window.location.pathname}?pokemon=${currentPokemonId}`;

            // Copy to clipboard
            if (navigator.clipboard) {
                navigator.clipboard.writeText(url).then(() => {
                    alert(`Share link copied to clipboard!\n${url}`);
                });
            } else {
                // Fallback
                const textArea = document.createElement('textarea');
                textArea.value = url;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert(`Share link copied to clipboard!\n${url}`);
            }
        }

        // Close modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closePokemonDetail();
            }
        });

        // Close modal on background click
        document.getElementById('pokemonDetailModal').addEventListener('click', (e) => {
            if (e.target.id === 'pokemonDetailModal') {
                closePokemonDetail();
            }
        });

        // Check for Pokemon ID in URL on load
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const pokemonId = urlParams.get('pokemon');
            if (pokemonId && MOCK_CREATURES[pokemonId]) {
                showPokemonDetail(pokemonId);
            }
        });

        console.log('WoWmon Detail View System loaded successfully!');
        console.log('Available functions:');
        console.log('  - showPokemonDetail(pokemonId)');
        console.log('  - closePokemonDetail()');
        console.log('  - switchTab(tabName)');
        console.log('  - drawStatsRadarChart(pokemon)');
        console.log('  - renderEvolutionChain(pokemon)');
        console.log('  - renderMovesList(pokemon)');
        console.log('  - navigatePokemon(direction)');
        console.log('  - toggleFavorite()');
        console.log('  - addToTeam()');
        console.log('  - sharePokemon()');
    </script>
</body>
</html>
